"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[557],{1557:(Be,J,n)=>{n.r(J),n.d(J,{BlogModule:()=>Ue});var m=n(5357),Q=n(8314),M=n(3881),e=n(5e3);let O=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-blog"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC],encapsulation:2}),i})();var E=n(9646),R=n(7579),g=n(2722),p=n(5094);const S=i=>i.articles,b=((0,p.P1)(S,i=>i.article),(0,p.P1)(S,i=>i.articles));var C=n(8966),Y=n(9602),I=n(7423),T=n(5245),w=n(508),d=n(8735);function W(i,l){1&i&&e._UZ(0,"mat-icon",18),2&i&&e.Q6J("svgIcon","bootstrapicons:bi-star")}function $(i,l){1&i&&e._UZ(0,"mat-icon",19),2&i&&e.Q6J("svgIcon","bootstrapicons:bi-star-fill")}function V(i,l){1&i&&e._UZ(0,"mat-icon",20),2&i&&e.Q6J("svgIcon","bootstrapicons:bi-star-half")}const G=function(i){return{edit:!0,articleId:i}};let H=(()=>{class i{constructor(t){this.data=t}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["blog-view-article"]],decls:25,vars:13,consts:[[1,"flex","flex-col","w-full","filter-listing"],["alt","Article cover image",1,"object-cover",3,"src"],[1,"m-8","mb-4"],[1,"text-2xl","font-semibold","leading-tight"],[1,"flex","items-center","leading-none","mt-2","-ml-1"],[1,"flex","items-center"],["readOnly","",3,"rate","max"],["ratingInactive",""],["ratingActive",""],["ratingFraction",""],[1,"text-secondary","ml-2"],[1,"text-secondary","mx-2"],[1,"text-secondary"],[1,"mt-6"],[1,"mt-6",3,"innerHtml"],[1,"flex","items-center","justify-between","mt-3","-mx-3"],["mat-button","",1,"px-3",3,"color","mat-dialog-close"],["mat-button","","matRipple","","mat-dialog-close","",1,"px-3",3,"color"],[1,"text-orange-500","icon-size-5","star-border",3,"svgIcon"],[1,"text-orange-500","icon-size-5","star-solid",3,"svgIcon"],[1,"text-orange-500","icon-size-5","star-half",3,"svgIcon"]],template:function(t,o){1&t&&(e.TgZ(0,"fuse-card",0),e._UZ(1,"img",1),e.TgZ(2,"div",2)(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"bar-rating",6),e.YNc(8,W,1,1,"ng-template",7),e.YNc(9,$,1,1,"ng-template",8),e.YNc(10,V,1,1,"ng-template",9),e.qZA()(),e.TgZ(11,"div",10),e._uU(12),e.qZA(),e.TgZ(13,"div",11),e._uU(14,"\u2022"),e.qZA(),e.TgZ(15,"div",12),e._uU(16),e.qZA()(),e.TgZ(17,"div",13),e._uU(18),e.qZA(),e._UZ(19,"div",14),e.TgZ(20,"div",15)(21,"a",16),e._uU(22," Editar "),e.qZA(),e.TgZ(23,"a",17),e._uU(24," Cerrar "),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("src",o.data.article.image,e.LSH),e.xp6(3),e.Oqu(o.data.article.title),e.xp6(3),e.Q6J("rate",o.data.article.rating)("max",5),e.xp6(5),e.Oqu(o.data.article.rating),e.xp6(4),e.hij("",o.data.article.reviews," rese\xf1as"),e.xp6(2),e.hij(" ",o.data.article.subtitle," "),e.xp6(1),e.Q6J("innerHtml",o.data.article.content,e.oJD),e.xp6(2),e.Q6J("color","primary")("mat-dialog-close",e.VKq(11,G,o.data.article._id)),e.xp6(2),e.Q6J("color","warn"))},dependencies:[Y.y,I.zs,C.ZT,T.Hw,w.wG,d.OJ,d.qY,d.sr,d.Ik],encapsulation:2}),i})();var _=n(9784),U=n(520),A=n(5698),B=n(3900),Z=n(8505),K=n(4813),j=n(4004),X=n(5840),h=n(3046),ee=n(5714),te=n(2340),ie=n(1235);const f=te.N.API_URL;let F=(()=>{class i{constructor(t,o,r){this.rolesService=t,this._httpClient=o,this.store=r}createArticle(t){return this.store.select(b).pipe((0,A.q)(1),(0,B.w)(o=>this._httpClient.post(`${f}/articles/`,t).pipe((0,Z.b)(r=>{this.store.dispatch((0,h.wc)({articles:[r.article,...o]}))}))))}getArticles(t=0,o=10,r="createdAt",a="desc",c=""){const u=(new U.LE).append("page",t.toString()).append("size",o.toString()).append("sort",r).append("order",a).append("search",c);return this._httpClient.get(`${f}/articles`,{params:u}).pipe((0,Z.b)(({pagination:x,articles:y})=>{this.store.dispatch((0,ee.Jr)({pagination:x})),this.store.dispatch((0,h.wc)({articles:y}))}))}getArticlesByMerchant(t=0,o=10,r="createdAt",a="desc",c="",u){return(new U.LE).append("page",t.toString()).append("size",o.toString()).append("sort",r).append("order",a).append("search",c).append("merchantId",u),this._httpClient.get(`${f}/articles`).pipe((0,Z.b)(({articles:q})=>{this.store.dispatch((0,h.wc)({articles:q}))}))}getArticleById(t){return this._httpClient.get(`${f}/articles/by-id/${t}`).pipe((0,K.j)("article"),(0,Z.b)(o=>{this.store.dispatch((0,h.DU)({article:o}))}))}updateArticle(t){return this.store.select(b).pipe((0,A.q)(1),(0,B.w)(o=>this._httpClient.patch(`${f}/articles/${t._id}`,t).pipe((0,j.U)(r=>{const a=(0,X.Z)(o);return a[o.findIndex(u=>u._id===t._id)]=r.article,this.store.dispatch((0,h.wc)({articles:a})),r}))))}deleteArticle(t){return this.store.select(b).pipe((0,A.q)(1),(0,B.w)(o=>this._httpClient.delete(`${f}/articles/${t}`).pipe((0,j.U)(r=>{const a=[...o],c=a.findIndex(u=>u._id===t);return a.splice(c,1),this.store.dispatch((0,h.wc)({articles:a})),r}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ie.cM),e.LFG(U.eN),e.LFG(p.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var N=n(1683),D=n(7261),v=n(9808),oe=n(7238);function ne(i,l){1&i&&e._UZ(0,"mat-icon",40),2&i&&e.Q6J("svgIcon","bootstrapicons:bi-star")}function re(i,l){1&i&&e._UZ(0,"mat-icon",41),2&i&&e.Q6J("svgIcon","bootstrapicons:bi-star-fill")}function le(i,l){1&i&&e._UZ(0,"mat-icon",42),2&i&&e.Q6J("svgIcon","bootstrapicons:bi-star-half")}const ae=function(i){return["write-article",i]};function se(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"fuse-card",21),e._UZ(2,"img",22),e.TgZ(3,"div",23)(4,"div",24),e._uU(5),e.qZA(),e.TgZ(6,"div",25)(7,"div",26)(8,"bar-rating",27),e.YNc(9,ne,1,1,"ng-template",28),e.YNc(10,re,1,1,"ng-template",29),e.YNc(11,le,1,1,"ng-template",30),e.qZA()(),e.TgZ(12,"div",31),e._uU(13),e.qZA(),e.TgZ(14,"div",32),e._uU(15,"\u2022"),e.qZA(),e.TgZ(16,"div",33),e._uU(17),e.qZA()(),e.TgZ(18,"div",34),e._uU(19),e.qZA(),e.TgZ(20,"div",35)(21,"div",26)(22,"a",36),e._uU(23," Editar "),e.qZA(),e.TgZ(24,"a",37),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.viewArticle(a))}),e._uU(25," Revisar "),e.qZA()(),e.TgZ(26,"a",38),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.deleteArticle(a._id))}),e._UZ(27,"mat-icon",39),e.qZA()()()(),e.BQk()}if(2&i){const t=l.$implicit;e.xp6(2),e.Q6J("src",t.image,e.LSH),e.xp6(3),e.Oqu(t.title),e.xp6(3),e.Q6J("rate",t.rating)("max",5),e.xp6(5),e.Oqu(t.rating),e.xp6(4),e.hij("",t.reviews," rese\xf1as"),e.xp6(2),e.hij(" ",t.subtitle," "),e.xp6(3),e.Q6J("color","primary")("routerLink",e.VKq(11,ae,t._id)),e.xp6(2),e.Q6J("color","primary"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:trash")}}function ce(i,l){if(1&i&&(e.ynx(0),e.TgZ(1,"div",5),e.YNc(2,se,28,13,"ng-container",20),e.qZA(),e.BQk()),2&i){const t=e.oxw().ngIf;e.xp6(2),e.Q6J("ngForOf",t)}}function ue(i,l){if(1&i&&(e.ynx(0),e.YNc(1,ce,3,1,"ng-container",19),e.BQk()),2&i){const t=l.ngIf;e.oxw();const o=e.MAs(30);e.xp6(1),e.Q6J("ngIf",t.length)("ngIfElse",o)}}function ge(i,l){1&i&&(e.TgZ(0,"div",43)(1,"div",44),e._UZ(2,"mat-icon",45),e.TgZ(3,"div",46),e._uU(4," \xa1No ha escrito ning\xfan art\xedculo a\xfan! "),e.qZA()()()),2&i&&(e.xp6(2),e.Q6J("svgIcon","bootstrapicons:bi-newspaper"))}const me=function(){return["write-article/new"]};let de=(()=>{class i{constructor(t,o,r,a,c,u,x){this._blogService=t,this._changeDetectorRef=o,this._dialog=r,this._fuseConfirmationService=a,this._router=c,this._snackBar=u,this.store=x,this.articles$=(0,E.of)([]),this._unsubscribeAll=new R.x}ngOnInit(){this.articles$=this.store.select(b)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}viewArticle(t){this._dialog.open(H,{data:{article:t},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(r=>{r.edit&&this._router.navigate(["/modules/blog/panels/write-article",r.articleId])})}deleteArticle(t){this._fuseConfirmationService.open({title:"Eliminar Art\xedculo",message:"\xbfEsta seguro que desea eliminar el art\xedculo?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._blogService.deleteArticle(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(a=>{this._snackBar.openFromComponent(_.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F),e.Y36(e.sBO),e.Y36(C.uw),e.Y36(N.R),e.Y36(m.F0),e.Y36(D.ux),e.Y36(p.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["blog-panel"]],decls:31,vars:9,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","p-6","mx-auto","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","leading-8","tracking-tight"],[1,"font-medium","tracking-tight","text-secondary"],[1,"grid","w-full","grid-cols-1","gap-8","mt-6","sm:grid-cols-2","lg:grid-cols-4","md:mt-8"],[1,"flex","flex-col","items-center","justify-center","rounded-2xl","cursor-pointer","border-2","border-gray-300","border-dashed","hover:bg-hover","transition-colors","duration-150","ease-in-out",3,"routerLink"],[1,"icon-size-12","text-hint",3,"svgIcon"],[1,"flex","flex-col","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","leading-6","tracking-tight","truncate"],[1,"ml-2"],[1,"h-6","px-2","rounded-lg","min-h-6","bg-yellow-100"],[1,"font-mono","text-lg","font-medium","text-yellow-900"],["matTooltip","En desarrollo",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-not-allowed","bg-card","rounded-2xl","hover:shadow-lg"],[1,"w-full","mt-12"],[1,"text-2xl","font-semibold","leading-6","tracking-tight"],[4,"ngIf"],["noArticles",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","max-w-80","w-full","filter-listing"],["alt","Article cover image",1,"object-cover",3,"src"],[1,"m-8","mb-4"],[1,"text-2xl","font-semibold","leading-tight"],[1,"flex","items-center","leading-none","mt-2","-ml-1"],[1,"flex","items-center"],["readOnly","",3,"rate","max"],["ratingInactive",""],["ratingActive",""],["ratingFraction",""],[1,"text-secondary","ml-2"],[1,"text-secondary","mx-2"],[1,"text-secondary"],[1,"mt-6"],[1,"flex","items-center","justify-between","mt-3","-mx-3"],["mat-button","",1,"px-3",3,"color","routerLink"],["mat-button","",1,"px-3",3,"color","click"],["matTooltip","Eliminar art\xedculo","matRipple","",1,"p-3","w-10","h-10","cursor-pointer","rounded-full","flex","items-center","justify-center",3,"click"],[1,"text-red-500","icon-size-5",3,"svgIcon"],[1,"text-orange-500","icon-size-5","star-border",3,"svgIcon"],[1,"text-orange-500","icon-size-5","star-solid",3,"svgIcon"],[1,"text-orange-500","icon-size-5","star-half",3,"svgIcon"],[1,"flex","flex-col","flex-auto","overflow-y-auto","lg:overflow-hidden","bg-card","dark:bg-default"],[1,"flex","flex-col","flex-auto","items-center","justify-center","bg-gray-100","dark:bg-transparent","pt-20"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Blog"),e.qZA(),e.TgZ(6,"div",4),e._uU(7," En este m\xf3dulo usted podr\xe1 redactar art\xedculos sobre su negocio, productos y servicios que aumenten la interacci\xf3n de los clientes con su Marca. "),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6),e._UZ(10,"mat-icon",7),e.qZA(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10),e._uU(14,"Art\xedculos"),e.qZA(),e.TgZ(15,"div",11)(16,"div",12)(17,"span",13),e._uU(18),e.ALo(19,"async"),e.qZA()()()()(),e.TgZ(20,"div",14)(21,"div",9)(22,"div",10),e._uU(23,"Estad\xedsticas"),e.qZA()()()(),e.TgZ(24,"div",15)(25,"div",16),e._uU(26,"Art\xedculos Publicados"),e.qZA()(),e.YNc(27,ue,2,2,"ng-container",17),e.ALo(28,"async"),e.YNc(29,ge,5,1,"ng-template",null,18,e.W1O),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("routerLink",e.DdM(8,me)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(8),e.hij(" ",e.lcZ(19,4,o.articles$).length," "),e.xp6(9),e.Q6J("ngIf",e.lcZ(28,6,o.articles$)))},dependencies:[m.rH,m.yS,v.sg,v.O5,Y.y,I.zs,T.Hw,w.wG,oe.gM,d.OJ,d.qY,d.sr,d.Ik,v.Ov],encapsulation:2}),i})();var s=n(3075),pe=n(7489),z=n(4787),P=n(4062),he=n(1910),fe=n(7231),ve=n(393),k=n(7322),xe=n(7531);const L=function(i){return{"cursor-not-allowed":i}};function _e(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.createArticle())}),e._UZ(2,"mat-icon",31),e.TgZ(3,"span",32),e._uU(4,"Guardar"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.articleForm.invalid||"placeholderImage"===t.articleForm.get("image").value)("ngClass",e.VKq(3,L,t.articleForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function be(i,l){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.updateArticle())}),e._UZ(2,"mat-icon",31),e.TgZ(3,"span",32),e._uU(4,"Actualizar"),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.articleForm.invalid)("ngClass",e.VKq(3,L,t.articleForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}function Ae(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",33,34),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectFile(r.target.files))}),e.qZA(),e.TgZ(3,"label",35),e._UZ(4,"mat-icon",36),e.qZA()()}2&i&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:camera"))}function Ze(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",37),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.removeFile(r.articleForm.get("image").value))}),e._UZ(2,"mat-icon",36),e.qZA()()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"))}function ye(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El t\xedtulo del art\xedculo es obligatorio. "),e.qZA())}function Ce(i,l){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El t\xedtulo del art\xedculo debe contener entre 3 y 255 caracteres. "),e.qZA())}const Ie=function(){return{height:"470px"}};let Te=(()=>{class i{constructor(t,o,r,a,c,u,x,y,q){this._activatedRoute=t,this._blogService=o,this._changeDetectorRef=r,this._formBuilder=a,this._fuseConfirmationService=c,this._imagesService=u,this._snackBar=x,this._router=y,this.store=q,this.article=null,this.descriptionLength=0,this.editMode=!1,this.merchant=null,this.placeholderImage="https://via.placeholder.com/1000x591.png",this.subtitleLength=0,this.titleLength=0,this.user=null,this.user$=(0,E.of)(null),this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this._unsubscribeAll=new R.x}ngOnInit(){this._activatedRoute.params.pipe((0,g.R)(this._unsubscribeAll)).subscribe(({articleId:t})=>{"new"!==t&&(this.editMode=!0,this._blogService.getArticleById(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(o=>{this.articleForm.patchValue(o)}),this._changeDetectorRef.markForCheck())}),this.user$=this.store.select(z.rk),this.user$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>this.user=t),this.store.select(he.Qs).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>this.merchant=t),this.articleForm=this._formBuilder.group({_id:[""],active:[!0],userId:[this.user._id,[s.kI.required]],merchantId:[this.merchant._id,[s.kI.required]],rating:[0,[s.kI.required,s.kI.min(0),s.kI.max(5)]],reviews:[0,[s.kI.required,s.kI.min(0)]],title:["Titulo de articulo de prueba",[s.kI.required,s.kI.minLength(3)]],subtitle:["Subtitulo de articulo de prueba",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(1e4)]],content:["Estos puclaprse",[s.kI.required,s.kI.maxLength(1e7)]],image:[this.placeholderImage],socials:this._formBuilder.array([])})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createArticle(){let t=this.articleForm.getRawValue();t=(0,pe.omit)(t,["_id"]),t.slug=new P.i(t.title).slug,this._fuseConfirmationService.open({title:"Crear Art\xedculo",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._blogService.createArticle(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(a=>{this._snackBar.openFromComponent(_.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/blog/panels")}),this._changeDetectorRef.markForCheck()})}updateArticle(){const t=this.articleForm.getRawValue();t.slug=new P.i(t.title).slug,this._fuseConfirmationService.open({title:"Actualizar Art\xedculo",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._blogService.updateArticle(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(a=>{this._snackBar.openFromComponent(_.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._router.navigateByUrl("/modules/blog/panels")}),this._changeDetectorRef.markForCheck()})}selectFile(t){0!==t.length&&this._uploadFile(t[0])}removeFile(t){void 0!==t&&this._imagesService.removeImage("articles",t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(()=>{this.articleForm.get("image").setValue(this.placeholderImage),this._blogService.updateArticle(this.articleForm.getRawValue()).subscribe(o=>{this._snackBar.openFromComponent(_.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:o.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})}),this._changeDetectorRef.markForCheck()})}_uploadFile(t){this._imagesService.uploadImage("articles",t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(o=>{this.articleForm.get("image").setValue(o.imageUrl),this.editMode&&this._blogService.updateArticle(this.articleForm.getRawValue()).subscribe(()=>{this._snackBar.openFromComponent(_.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:o.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.gz),e.Y36(F),e.Y36(e.sBO),e.Y36(s.qu),e.Y36(N.R),e.Y36(fe.C),e.Y36(D.ux),e.Y36(m.F0),e.Y36(p.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["blog-write-article"]],decls:74,vars:23,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"z-20","flex","flex-col","p-6","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/blog/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500","truncate"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[4,"ngIf"],[1,"flex","flex-auto","overflow-y-auto","p-1","md:p-10"],[1,"flex","flex-col","w-full","divide-y","divide-dashed",3,"formGroup","autocomplete"],[1,"flex","flex-col","gap-5","p-6","mt-5","border","shadow-md","bg-card","rounded-2xl"],[1,"flex","flex-col","w-full"],[1,"flex","flex-col","mb-5"],[1,"text-xl","font-semibold"],[1,"flex","items-center","justify-center","w-full"],[1,"relative","flex","items-center","justify-center","overflow-hidden","flex-0"],[1,"max-w-100"],["alt","Article cover image",1,"object-cover",3,"src"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],[1,"flex","flex-col","my-5"],[1,"w-full"],["matInput","","type","text","minlength","3","maxlength","255","required","",3,"formControlName"],["matInput","","matTextareaAutosize","","maxlength","10000","rows","4",3,"formControlName"],[1,"text-right"],[1,"h-full",3,"formControlName","styles","modules"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["id","avatar-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["avatarFileInput",""],["for","avatar-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","cursor-pointer","p-5","transition-opacity","ease-linear","delay-200","rounded-full","opacity-50","bg-primary-700","hover:opacity-100"],[1,"text-white",3,"svgIcon"],["mat-mini-fab","",1,"absolute","p-5","transition-opacity","ease-linear","delay-200","rounded-full","opacity-50","bg-primary-700","hover:opacity-100",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Blog"),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",9)(17,"h2",10),e._uU(18),e.qZA()()(),e.TgZ(19,"div",11),e.YNc(20,_e,5,5,"ng-container",12),e.YNc(21,be,5,5,"ng-container",12),e.qZA()(),e.TgZ(22,"div",13)(23,"form",14)(24,"div",15)(25,"div",16)(26,"div",17)(27,"span",18),e._uU(28,"Imagen de portada"),e.qZA(),e.TgZ(29,"span"),e._uU(30," El formato recomendado para la imagen es "),e.TgZ(31,"strong"),e._uU(32,"webp"),e.qZA(),e._uU(33," con dimensiones "),e.TgZ(34,"strong"),e._uU(35,"1000x591px"),e.qZA(),e._uU(36," aunque tambi\xe9n se aceptan los formatos: "),e.TgZ(37,"strong"),e._uU(38,"png, jpeg y jpg"),e.qZA(),e._uU(39,". "),e.qZA()(),e.TgZ(40,"div",19)(41,"div",20)(42,"div",21),e._UZ(43,"img",22),e.qZA(),e.TgZ(44,"div",23),e.YNc(45,Ae,5,3,"div",12),e.YNc(46,Ze,3,1,"div",12),e.qZA()()(),e.TgZ(47,"div",24)(48,"span",18),e._uU(49,"T\xedtulo"),e.qZA(),e.TgZ(50,"span"),e._uU(51," Escriba un texto sugerente o atrevido recuerde que un buen titular siempre vende. "),e.qZA()(),e.TgZ(52,"mat-form-field",25),e._UZ(53,"input",26),e.YNc(54,ye,2,0,"mat-error",12),e.YNc(55,Ce,2,0,"mat-error",12),e.qZA(),e.TgZ(56,"div",17)(57,"span",18),e._uU(58,"Subt\xedtulo"),e.qZA(),e.TgZ(59,"span"),e._uU(60," Escriba un breve resumen que despierte curiosidad para que los clientes lean este art\xedculo. "),e.qZA()(),e.TgZ(61,"mat-form-field",25),e._UZ(62,"textarea",27),e.TgZ(63,"mat-hint",28),e._uU(64),e.qZA()(),e.TgZ(65,"div",17)(66,"span",18),e._uU(67,"Contenido"),e.qZA(),e.TgZ(68,"span"),e._uU(69," Escriba todas las ideas que tenga en su mente. "),e.qZA()(),e._UZ(70,"quill-editor",29),e.qZA(),e.TgZ(71,"pre"),e._uU(72),e.ALo(73,"json"),e.qZA()()()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.hij(" ",null===o.article?"Nuevo":o.article.title," "),e.xp6(3),e.hij(" ",null===o.article?"Nuevo Art\xedculo":o.article.title," "),e.xp6(2),e.Q6J("ngIf",!o.editMode),e.xp6(1),e.Q6J("ngIf",o.editMode),e.xp6(2),e.Q6J("formGroup",o.articleForm)("autocomplete","off"),e.xp6(20),e.Q6J("src",o.articleForm.get("image").value,e.LSH),e.xp6(2),e.Q6J("ngIf",o.articleForm.get("image").value===o.placeholderImage),e.xp6(1),e.Q6J("ngIf",o.articleForm.get("image").value!==o.placeholderImage),e.xp6(7),e.Q6J("formControlName","title"),e.xp6(1),e.Q6J("ngIf",o.articleForm.get("title").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.articleForm.get("title").hasError("minlength")||o.articleForm.get("title").hasError("maxlength")),e.xp6(7),e.Q6J("formControlName","subtitle"),e.xp6(2),e.hij("Total de caracteres ",o.articleForm.get("subtitle").value.length," / 10000"),e.xp6(6),e.Q6J("formControlName","content")("styles",e.DdM(22,Ie))("modules",o.quillModules),e.xp6(2),e.Oqu(e.lcZ(73,20,o.articleForm.value)))},dependencies:[m.yS,v.mk,v.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.sg,s.u,ve.PQ,I.lW,T.Hw,k.TO,k.KE,k.bx,xe.Nt,w.wG,Q.g6,v.Ts],encapsulation:2}),i})();const we=[{path:"",pathMatch:"full",redirectTo:"panels"},{path:"panels",component:O,children:[{path:"",component:de,resolve:{articles:(()=>{class i{constructor(t,o){this._blogService=t,this.store=o,this._user=null,this.store.select(z.rk).pipe((0,A.q)(1)).subscribe(r=>this._user=r)}resolve(t,o){return this._blogService.getArticlesByMerchant(0,12,"createdAt","desc","",this._user.merchantId)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(F),e.LFG(p.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}},{path:"write-article/:articleId",component:Te}]}];let Ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.Bz.forChild(we),M.m,Q.fi]}),i})()}}]);