"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[592],{7231:(M,u,e)=>{e.d(u,{C:()=>o});var i=e(520),h=e(2340),v=e(5e3);const a=h.N.API_URL;let o=(()=>{class t{constructor(s){this._httpClient=s}uploadImage(s,l){const d=new FormData;return d.append("image",l,l.name),this._httpClient.post(`${a}/cloudinary/upload/${s}`,d)}removeImage(s){const l=s.slice(s.indexOf("Athgro"),s.length).split(".")[0];console.log(l);const d=(new i.LE).set("public_id",l);return this._httpClient.delete(`${a}/cloudinary/remove`,{params:d})}}return t.\u0275fac=function(s){return new(s||t)(v.LFG(i.eN))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},2911:(M,u,e)=>{e.d(u,{K:()=>a});var i=e(5e3),h=e(9851),v=e(5094);let a=(()=>{class t{constructor(s,l){this._merchantsService=s,this.store=l}resolve(s,l){return this._merchantsService.getMerchants()}}return t.\u0275fac=function(s){return new(s||t)(i.LFG(h.S),i.LFG(v.yh))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},3668:(M,u,e)=>{e.d(u,{N:()=>a});var i=e(4128),h=e(5e3),v=e(1349);let a=(()=>{class o{constructor(_){this._roleService=_}resolve(_,s){return"new"===_.params.userId?this._roleService.getRoles():(0,i.D)([this._roleService.getRoles(),this._roleService.getPermissions()])}}return o.\u0275fac=function(_){return new(_||o)(h.LFG(v.N))},o.\u0275prov=h.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},1349:(M,u,e)=>{e.d(u,{N:()=>m});var i=e(1135),h=e(2843),v=e(9646),a=e(5698),o=e(3900),t=e(4004),_=e(8505),s=e(2340),l=e(5e3),d=e(520);const E=s.N.API_URL;let m=(()=>{class R{constructor(r){this._httpClient=r,this._singleRole=new i.X(null),this._roles=new i.X(null),this._permissions=new i.X(null)}get singleRole$(){return this._singleRole.asObservable()}get roles$(){return this._roles.asObservable()}get permissions$(){return this._permissions.asObservable()}createRole(r){return this.roles$.pipe((0,a.q)(1),(0,o.w)(n=>this._httpClient.post(`${E}/roles/`,r).pipe((0,t.U)(c=>(this._roles.next([c.role,...n]),c.role)))))}getRoles(){return this._httpClient.get(`${E}/roles/`).pipe((0,_.b)(r=>{this._roles.next(r.roles)}))}getPermissions(){return this._httpClient.get(`${E}/roles/permissions/`).pipe((0,_.b)(r=>{this._permissions.next(r.permissions)}))}getByUserId(r){return this._httpClient.get(`${E}/users/${r}/roles`).pipe((0,t.U)(n=>n.roles))}getRoleById(r){return this._roles.pipe((0,a.q)(1),(0,t.U)(n=>{const c=n.find(p=>p._id===r)||null;return this._singleRole.next(c),c}),(0,o.w)(n=>n?(0,v.of)(n):(0,h._)("No existe un rol con el:"+r+"!")))}updateRole(r){return this.roles$.pipe((0,a.q)(1),(0,o.w)(n=>this._httpClient.patch(`${E}/roles/${r._id}`,r).pipe((0,t.U)(c=>{const p=n.findIndex(I=>I._id===r._id);return n[p]=c.updatedRole,this._roles.next(n),c.updatedRole}))))}deleteRole(r){return this.roles$.pipe((0,a.q)(1),(0,o.w)(n=>this._httpClient.delete(`${E}/roles/${r} `).pipe((0,t.U)(c=>{const p=n.findIndex(I=>I._id===r);return n.splice(p,1),this._roles.next(n),c}))))}}return R.\u0275fac=function(r){return new(r||R)(l.LFG(d.eN))},R.\u0275prov=l.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()}}]);