"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[198],{8198:(bt,v,i)=>{i.r(v),i.d(v,{SettingsModule:()=>_t});var m=i(5357),J=i(4576),t=i(5e3);let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-settings"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[m.lC],encapsulation:2}),o})();var f=i(7579),l=i(2722),_=i(7625),M=i(8288);class w{constructor(a="",e="",n="",c="",s="",d="",h=""){this.name=a,this.address=e,this.city=n,this.state=c,this.country=s,this.phone=d,this.email=h}}var Z=i(5094),u=i(9808),g=i(7423),b=i(5245);function S(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"span",11),t._uU(2," Moneda por defecto "),t.qZA(),t.TgZ(3,"span",12),t._uU(4),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(4),t.AsE(" (",e.merchant.currency.iso||"",") ",e.merchant.currency.name||"No definida"," ")}}function Y(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"div",18)(2,"span",19),t._uU(3),t.qZA(),t.TgZ(4,"span",12),t._uU(5),t.qZA(),t.TgZ(6,"span",12),t._uU(7),t.qZA()(),t.BQk()),2&o){const e=a.$implicit;t.xp6(3),t.hij(" ",e.bank," "),t.xp6(2),t.hij(" ",e.beneficiary," "),t.xp6(2),t.AsE(" (",e.currency,") ",e.no," ")}}const D=function(){return["/"]},R=function(){return["/settings/merchant-info"]},E=function(){return["/settings/merchant-bank-accounts"]};let z=(()=>{class o{constructor(e,n,c,s){this._activatedRoute=e,this._changeDetectorRef=n,this._router=c,this.store=s,this.merchant=new w,this._unsubscribeAll=new f.x}ngOnInit(){this.store.select(_.Q).pipe((0,l.R)(this._unsubscribeAll)).subscribe(e=>{""===e.name&&this._router.navigateByUrl("settings/merchant-info"),this.merchant=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz),t.Y36(t.sBO),t.Y36(m.F0),t.Y36(Z.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["merchant"]],decls:63,vars:22,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full","max-w-5xl"],[1,"-ml-4","sm:mt-8"],["mat-button","",3,"routerLink","color"],[3,"svgIcon"],[1,"ml-2"],[1,"mt-2","text-4xl","sm:text-7xl","font-extrabold","tracking-tight","leading-tight"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","grid-flow-row","gap-y-12","sm:gap-x-4","mt-8","sm:mt-12"],[1,"flex","flex-col","items-start"],[1,"flex","items-center","mb-1","text-2xl","font-semibold"],[1,"mt-3","font-medium","text-primary-500"],[1,"font-medium"],[4,"ngIf"],[1,"flex","items-center","mt-5","pl-4","pr-3","py-0.5","rounded-full","cursor-pointer","bg-gray-200","hover:bg-gray-300","dark:bg-gray-800","dark:hover:bg-gray-700",3,"routerLink"],[1,"text-sm","font-medium","text-secondary"],[1,"ml-2","icon-size-5",3,"svgIcon"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","mt-3"],[1,"font-medium","text-primary-500"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),t._UZ(5,"mat-icon",5),t.TgZ(6,"span",6),t._uU(7,"Regresar"),t.qZA()()(),t.TgZ(8,"div",7),t._uU(9," Informaci\xf3n del negocio "),t.qZA(),t.TgZ(10,"div",8)(11,"div",9)(12,"span",10),t._uU(13," Informaci\xf3n General "),t.qZA(),t.TgZ(14,"span",11),t._uU(15," Nombre "),t.qZA(),t.TgZ(16,"span",12),t._uU(17),t.qZA(),t.TgZ(18,"span",11),t._uU(19," NIT "),t.qZA(),t.TgZ(20,"span",12),t._uU(21),t.qZA(),t.TgZ(22,"span",11),t._uU(23," REUPP "),t.qZA(),t.TgZ(24,"span",12),t._uU(25),t.qZA(),t.YNc(26,S,5,2,"ng-container",13),t.TgZ(27,"span",11),t._uU(28," Impuesto sobre las ventas por defecto "),t.qZA(),t.TgZ(29,"span",12),t._uU(30),t.ALo(31,"percent"),t.qZA()(),t.TgZ(32,"div",9)(33,"span",10),t._uU(34," Informaci\xf3n de Contacto "),t.qZA(),t.TgZ(35,"span",11),t._uU(36," Direcci\xf3n "),t.qZA(),t.TgZ(37,"span",12),t._uU(38),t.qZA(),t.TgZ(39,"span",11),t._uU(40," Sitio Web "),t.qZA(),t.TgZ(41,"span",12),t._uU(42),t.qZA(),t.TgZ(43,"span",11),t._uU(44," Tel\xe9fono "),t.qZA(),t.TgZ(45,"span",12),t._uU(46),t.qZA(),t.TgZ(47,"span",11),t._uU(48," Correo electr\xf3nico "),t.qZA(),t.TgZ(49,"span",12),t._uU(50),t.qZA(),t.TgZ(51,"a",14)(52,"span",15),t._uU(53,"Editar"),t.qZA(),t._UZ(54,"mat-icon",16),t.qZA()(),t.TgZ(55,"div",9)(56,"span",10),t._uU(57," Cuentas de Banco "),t.qZA(),t.YNc(58,Y,8,4,"ng-container",17),t.TgZ(59,"a",14)(60,"span",15),t._uU(61,"Editar"),t.qZA(),t._UZ(62,"mat-icon",16),t.qZA()()()()()()),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(19,D))("color","primary"),t.xp6(1),t.Q6J("svgIcon","mat_solid:west"),t.xp6(12),t.hij(" ",n.merchant.name||"No definida"," "),t.xp6(4),t.hij(" ",n.merchant.nit||"No definida"," "),t.xp6(4),t.hij(" ",n.merchant.reupp||"No definida"," "),t.xp6(1),t.Q6J("ngIf",n.merchant.currency),t.xp6(4),t.hij(" ",t.lcZ(31,17,n.merchant.tax)||"No definido"," "),t.xp6(8),t.hij(" ",n.merchant.address||"No definida"," "),t.xp6(4),t.hij(" ",n.merchant.website||"No definida"," "),t.xp6(4),t.hij(" ",n.merchant.phone||"No definida"," "),t.xp6(4),t.hij(" ",n.merchant.email||"No definida"," "),t.xp6(1),t.Q6J("routerLink",t.DdM(20,R)),t.xp6(3),t.Q6J("svgIcon","mat_solid:east"),t.xp6(4),t.Q6J("ngForOf",n.merchant.bankAccounts),t.xp6(1),t.Q6J("routerLink",t.DdM(21,E)),t.xp6(3),t.Q6J("svgIcon","mat_solid:east"))},dependencies:[m.yS,u.sg,u.O5,g.zs,b.Hw,u.Zx],encapsulation:2,data:{animation:M.L},changeDetection:0}),o})();var r=i(3075),k=i(7489),F=i(9987),x=i(9784),T=i(1683),j=i(1158),y=i(413),C=i(7261),I=i(9071),U=i(508),L=i(4533),p=i(7322),N=i(8833),q=i(4107);const O=["merchantNgForm"];function P(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre de la empresa es obligatorio. "),t.qZA())}function G(o,a){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function H(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Debe seleccionar una provincia. "),t.qZA())}function $(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Debe seleccionar el pa\xeds. "),t.qZA())}function X(o,a){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function K(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Debe seleccionar una provincia. "),t.qZA())}function V(o,a){if(1&o&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.city),t.xp6(1),t.hij(" ",e.city," ")}}function W(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Debe seleccionar un municipio. "),t.qZA())}function tt(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," La direcci\xf3n del negocio es obligatoria. "),t.qZA())}const et=function(){return["../"]};let nt=(()=>{class o{constructor(e,n,c,s,d,h,A,Zt){this._changeDetectorRef=e,this._formBuilder=n,this._fuseConfirmationService=c,this._locationService=s,this._merchantService=d,this._router=h,this._snackBar=A,this.store=Zt,this.currencies=[],this.cities=[],this.states=[],this.stateSelected="",this._unsubscribeAll=new f.x}ngOnInit(){var e;this._locationService.states$.pipe((0,l.R)(this._unsubscribeAll)).subscribe(n=>{this.states=n,this._changeDetectorRef.markForCheck()}),this.merchantForm=this._formBuilder.group({id:new r.NI,name:new r.NI("",r.kI.required),abbr:new r.NI,nit:new r.NI,reupp:new r.NI,foundationDate:new r.NI,tax:new r.NI(0,[r.kI.min(0),r.kI.max(100)]),currencyId:new r.NI("",r.kI.required),country:new r.NI({disabled:!0,value:"Cuba"}),state:new r.NI("",r.kI.required),city:new r.NI({disabled:!0,value:""},r.kI.required),zip:new r.NI,address:new r.NI("",r.kI.required),website:new r.NI}),this.store.select(_.Q).pipe((0,l.R)(this._unsubscribeAll)).subscribe(n=>{this.merchant=n,null!==n&&this.merchantForm.patchValue(n),null!==n&&this.merchantForm.get("tax").setValue(100*n.tax),this._changeDetectorRef.markForCheck()}),null===(e=this.merchantForm.get("state"))||void 0===e||e.valueChanges.pipe((0,l.R)(this._unsubscribeAll)).subscribe(n=>{this._getCitiesByState(n),this.merchantForm.get("city").enable(),this._changeDetectorRef.markForCheck()}),this.store.select(F.zd).pipe((0,l.R)(this._unsubscribeAll)).subscribe(n=>{this.currencies=n,this._changeDetectorRef.markForCheck()})}clearForm(){this.merchantNgForm.resetForm()}saveMerchant(){let e=this.merchantForm.getRawValue();null===e.id&&(e=(0,k.omit)(e,["id"])),e.tax=e.tax/100,this._fuseConfirmationService.open({title:"Actualizar informaci\xf3n del negocio",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.R)(this._unsubscribeAll)).subscribe(c=>{"confirmed"===c&&(e.id||this._merchantService.createMerchant(e).subscribe(({data:s})=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateMerchant.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/settings/merchant")}),e.id&&this._merchantService.updateMerchant(e).subscribe(({data:s})=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:s.updateMerchant.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/settings")}))}),this._changeDetectorRef.markForCheck()}trackByFn(e,n){return n.id||e}_getCitiesByState(e){e!==this.stateSelected&&this._locationService.getCitiesByState(e).subscribe(n=>{this.cities=n,this._changeDetectorRef.markForCheck()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(r.qu),t.Y36(T.R),t.Y36(j.a),t.Y36(y.c),t.Y36(m.F0),t.Y36(C.ux),t.Y36(Z.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["merchant-form"]],viewQuery:function(e,n){if(1&e&&t.Gf(O,5),2&e){let c;t.iGM(c=t.CRH())&&(n.merchantNgForm=c.first)}},decls:85,vars:41,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full","max-w-4xl"],[1,"-ml-4","sm:mt-8"],["mat-button","",3,"routerLink","color"],[3,"svgIcon"],[1,"ml-2"],[1,"mt-2","text-4xl","sm:text-7xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-8","sm:mt-12","p-6","pb-7","sm:p-10","sm:pb-7","shadow","rounded-2xl","bg-card"],[1,"space-y-3",3,"formGroup"],["merchantNgForm","ngForm"],[1,"mb-6"],[1,"text-2xl","font-bold","tracking-tight"],[1,"text-secondary"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"w-full"],["matInput","",1,"mat-fuse-dense",3,"formControlName","required"],[4,"ngIf"],["matInput","",1,"mat-fuse-dense",3,"formControlName"],["required","",1,"mat-fuse-dense",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","min","0","max","100",1,"mat-fuse-dense",3,"type","formControlName"],["value","Cuba"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"md:col-span-2"],["matInput","","cdkTextareaAutosize","",1,"mat-fuse-dense",3,"formControlName","required","rows"],[1,"flex","items-center","justify-end"],["mat-button","",3,"color","disabled","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","click"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),t._UZ(5,"mat-icon",5),t.TgZ(6,"span",6),t._uU(7,"Regresar"),t.qZA()()(),t.TgZ(8,"div",7),t._uU(9," Editar Informaci\xf3n del Negocio "),t.qZA(),t.TgZ(10,"div",8)(11,"form",9,10)(13,"div",11)(14,"div",12),t._uU(15,"Mantenga actualizada la informaci\xf3n de su negocio."),t.qZA(),t.TgZ(16,"div",13),t._uU(17," Esta informaci\xf3n se utilizar\xe1 en la generaci\xf3n de documentos comerciales como ofertas, facturas, tickets etc. "),t.qZA()(),t.TgZ(18,"div",14)(19,"mat-form-field",15),t._UZ(20,"input",16),t.TgZ(21,"mat-label"),t._uU(22,"Nombre"),t.qZA(),t.YNc(23,P,2,0,"mat-error",17),t.qZA(),t.TgZ(24,"mat-form-field",15),t._UZ(25,"input",18),t.TgZ(26,"mat-label"),t._uU(27,"N\xfamero de Identificaci\xf3n Tributaria"),t.qZA()(),t.TgZ(28,"mat-form-field",15),t._UZ(29,"input",18),t.TgZ(30,"mat-label"),t._uU(31,"C\xf3digo REUPP"),t.qZA()(),t.TgZ(32,"mat-form-field",15)(33,"mat-label"),t._uU(34,"Moneda por defecto"),t.qZA(),t.TgZ(35,"mat-select",19),t.YNc(36,G,2,2,"mat-option",20),t.qZA(),t._UZ(37,"mat-icon",21),t.YNc(38,H,2,0,"mat-error",17),t.qZA(),t.TgZ(39,"mat-form-field",15),t._UZ(40,"input",22),t.TgZ(41,"mat-label"),t._uU(42,"Impuesto por defecto"),t.qZA(),t._UZ(43,"mat-icon",21),t.qZA(),t.TgZ(44,"mat-form-field",15),t._UZ(45,"input",18),t.TgZ(46,"mat-label"),t._uU(47,"Sitio Web"),t.qZA(),t._UZ(48,"mat-icon",21),t.qZA(),t.TgZ(49,"mat-form-field",15)(50,"mat-label"),t._uU(51,"Pa\xeds"),t.qZA(),t.TgZ(52,"mat-select",19)(53,"mat-option",23),t._uU(54,"Cuba"),t.qZA()(),t._UZ(55,"mat-icon",21),t.YNc(56,$,2,0,"mat-error",17),t.qZA(),t.TgZ(57,"mat-form-field",15)(58,"mat-label"),t._uU(59,"Provincia"),t.qZA(),t.TgZ(60,"mat-select",19),t.YNc(61,X,2,2,"mat-option",24),t.qZA(),t._UZ(62,"mat-icon",21),t.YNc(63,K,2,0,"mat-error",17),t.qZA(),t.TgZ(64,"mat-form-field",15)(65,"mat-label"),t._uU(66,"Municipio"),t.qZA(),t.TgZ(67,"mat-select",19),t.YNc(68,V,2,2,"mat-option",24),t.qZA(),t._UZ(69,"mat-icon",21),t.YNc(70,W,2,0,"mat-error",17),t.qZA(),t.TgZ(71,"mat-form-field",15),t._UZ(72,"input",18),t.TgZ(73,"mat-label"),t._uU(74,"C\xf3digo Postal"),t.qZA()(),t.TgZ(75,"mat-form-field",25),t._UZ(76,"textarea",26),t.TgZ(77,"mat-label"),t._uU(78,"Direcci\xf3n"),t.qZA(),t.YNc(79,tt,2,0,"mat-error",17),t.qZA()(),t.TgZ(80,"div",27)(81,"button",28),t.NdJ("click",function(){return n.clearForm()}),t._uU(82," Limpiar "),t.qZA(),t.TgZ(83,"button",29),t.NdJ("click",function(){return n.saveMerchant()}),t._uU(84," Guardar "),t.qZA()()()()()()()),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(40,et))("color","primary"),t.xp6(1),t.Q6J("svgIcon","mat_solid:west"),t.xp6(6),t.Q6J("formGroup",n.merchantForm),t.xp6(9),t.Q6J("formControlName","name")("required",!0),t.xp6(3),t.Q6J("ngIf",n.merchantForm.get("name").hasError("required")),t.xp6(2),t.Q6J("formControlName","nit"),t.xp6(4),t.Q6J("formControlName","reupp"),t.xp6(6),t.Q6J("formControlName","currencyId"),t.xp6(1),t.Q6J("ngForOf",n.currencies),t.xp6(1),t.Q6J("svgIcon","mat_solid:attach_money"),t.xp6(1),t.Q6J("ngIf",n.merchantForm.get("currencyId").hasError("required")),t.xp6(2),t.Q6J("type","number")("formControlName","tax"),t.xp6(3),t.Q6J("svgIcon","mat_solid:percent"),t.xp6(2),t.Q6J("formControlName","website"),t.xp6(3),t.Q6J("svgIcon","mat_solid:language"),t.xp6(4),t.Q6J("formControlName","country"),t.xp6(3),t.Q6J("svgIcon","mat_solid:public"),t.xp6(1),t.Q6J("ngIf",n.merchantForm.get("country").hasError("required")),t.xp6(4),t.Q6J("formControlName","state"),t.xp6(1),t.Q6J("ngForOf",n.states)("ngForTrackBy",n.trackByFn),t.xp6(1),t.Q6J("svgIcon","mat_solid:travel_explore"),t.xp6(1),t.Q6J("ngIf",n.merchantForm.get("state").hasError("required")),t.xp6(4),t.Q6J("formControlName","city"),t.xp6(1),t.Q6J("ngForOf",n.cities)("ngForTrackBy",n.trackByFn),t.xp6(1),t.Q6J("svgIcon","mat_solid:place"),t.xp6(1),t.Q6J("ngIf",n.merchantForm.get("city").hasError("required")),t.xp6(2),t.Q6J("formControlName","zip"),t.xp6(4),t.Q6J("formControlName","address")("required",!0)("rows",5),t.xp6(3),t.Q6J("ngIf",n.merchantForm.get("address").hasError("required")),t.xp6(2),t.Q6J("color","accent")("disabled",n.merchantForm.pristine||n.merchantForm.untouched),t.xp6(2),t.Q6J("color","primary")("disabled",n.merchantForm.pristine||n.merchantForm.invalid))},dependencies:[m.yS,u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,I.PQ,U.ey,g.lW,g.zs,b.Hw,L.IC,p.TO,p.KE,p.hX,p.qo,N.Nt,q.gD],encapsulation:2,changeDetection:0}),o})();var ot=i(7238);const rt=["merchantBankAccountsNgForm"];function at(o,a){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Banco"),t.qZA())}function ct(o,a){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Beneficiario"),t.qZA())}function it(o,a){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"N\xfamero de Cuenta"),t.qZA())}function st(o,a){1&o&&(t.TgZ(0,"mat-label"),t._uU(1,"Moneda"),t.qZA())}function mt(o,a){if(1&o&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.iso),t.xp6(1),t.hij(" ",e.iso," ")}}const lt=function(o){return{"mt-6":o}};function ut(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",32)(2,"button",33),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().index,s=t.oxw();return t.KtG(s.removeBankAccount(c))}),t._UZ(3,"mat-icon",18),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw().first;t.xp6(1),t.Q6J("ngClass",t.VKq(2,lt,e)),t.xp6(2),t.Q6J("svgIcon","mat_solid:delete")}}function pt(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"div",23)(2,"mat-form-field",24),t.YNc(3,at,2,0,"mat-label",25),t._UZ(4,"mat-icon",26)(5,"input",27),t.qZA(),t.TgZ(6,"mat-form-field",24),t.YNc(7,ct,2,0,"mat-label",25),t._UZ(8,"mat-icon",26)(9,"input",27),t.qZA(),t.TgZ(10,"mat-form-field",24),t.YNc(11,it,2,0,"mat-label",25),t._UZ(12,"mat-icon",26)(13,"input",28),t.qZA(),t.TgZ(14,"mat-form-field",24),t.YNc(15,st,2,0,"mat-label",25),t._UZ(16,"mat-icon",26),t.TgZ(17,"mat-select",29),t.YNc(18,mt,2,2,"mat-option",30),t.qZA()(),t.YNc(19,ut,4,4,"ng-container",25),t.qZA(),t.BQk()),2&o){const e=a.$implicit,n=a.first,c=a.last,s=t.oxw();t.xp6(2),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("ngIf",n),t.xp6(1),t.Q6J("svgIcon","mat_solid:account_balance"),t.xp6(1),t.Q6J("type","text")("formControl",e.get("bank"))("placeholder","Ejemplo: Banco Financiero")("spellcheck",!1),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("ngIf",n),t.xp6(1),t.Q6J("svgIcon","mat_solid:business"),t.xp6(1),t.Q6J("type","text")("formControl",e.get("beneficiary"))("placeholder","Ejemplo: Empresa SRL")("spellcheck",!1),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("ngIf",n),t.xp6(1),t.Q6J("svgIcon","mat_solid:credit_card"),t.xp6(1),t.Q6J("type","text")("formControl",e.get("no"))("placeholder","Ejemplo: 1234567890123456")("spellcheck",!1),t.xp6(1),t.Q6J("subscriptSizing","dynamic"),t.xp6(1),t.Q6J("ngIf",n),t.xp6(1),t.Q6J("svgIcon","mat_solid:monetization_on"),t.xp6(1),t.Q6J("formControl",e.get("currency"))("placeholder","Ejemplo: USD"),t.xp6(1),t.Q6J("ngForOf",s.currencies),t.xp6(1),t.Q6J("ngIf",!(n&&c))}}const dt=function(){return["../"]};let gt=(()=>{class o{constructor(e,n,c,s,d,h,A){this._changeDetectorRef=e,this._formBuilder=n,this._fuseConfirmationService=c,this._merchantService=s,this._router=d,this._snackBar=h,this.store=A,this.currencies=[],this._unsubscribeAll=new f.x}ngOnInit(){this.merchantBankAccountsForm=this._formBuilder.group({bankAccounts:new r.Oe([])}),this.store.select(_.Q).pipe((0,l.R)(this._unsubscribeAll)).subscribe(e=>{if(this.merchant=e,e.bankAccounts.length>0){this.merchantBankAccountsForm.get("bankAccounts").clear();const n=[];e.bankAccounts.length>0?e.bankAccounts.forEach(c=>{n.push(this._formBuilder.group({bank:new r.NI(c.bank),beneficiary:new r.NI(c.beneficiary),no:new r.NI(c.no),currency:new r.NI(c.currency)}))}):n.push(this._formBuilder.group({bank:new r.NI(null,[r.kI.required,r.kI.maxLength(255)]),beneficiary:new r.NI(null,[r.kI.required,r.kI.maxLength(255)]),no:new r.NI(null,[r.kI.required,r.kI.maxLength(20)]),currency:new r.NI(null,[r.kI.required,r.kI.maxLength(10)])})),n.forEach(c=>{this.merchantBankAccountsForm.get("bankAccounts").push(c)})}this._changeDetectorRef.markForCheck()}),this.store.select(F.zd).pipe((0,l.R)(this._unsubscribeAll)).subscribe(e=>{this.currencies=e,this._changeDetectorRef.markForCheck()})}addBankAccount(){const e=this._formBuilder.group({bank:new r.NI(null,[r.kI.required,r.kI.maxLength(255)]),beneficiary:new r.NI(null,[r.kI.required,r.kI.maxLength(255)]),no:new r.NI(null,[r.kI.required,r.kI.maxLength(20)]),currency:new r.NI(null,[r.kI.required,r.kI.maxLength(10)])});this.merchantBankAccountsForm.get("bankAccounts").push(e),this._changeDetectorRef.markForCheck()}removeBankAccount(e){this.merchantBankAccountsForm.get("bankAccounts").removeAt(e),this._changeDetectorRef.markForCheck()}clearForm(){this.merchantBankAccountsNgForm.resetForm()}saveMerchant(){const e=this.merchantBankAccountsForm.get("bankAccounts").value;let n=Object.assign(Object.assign({},this.merchant),{bankAccounts:e});n=(0,k.omit)(n,["id","userId","slug","bankAccount","createdAt","updatedAt","__v","currency"]),this._fuseConfirmationService.open({title:"Guardar cuentas de banco",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,l.R)(this._unsubscribeAll)).subscribe(s=>{"confirmed"===s&&this._merchantService.updateMerchant(n).subscribe(({data:d})=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:d.updateMerchant.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/settings")})}),this._changeDetectorRef.markForCheck()}trackByFn(e,n){return n.id||e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(r.qu),t.Y36(T.R),t.Y36(y.c),t.Y36(m.F0),t.Y36(C.ux),t.Y36(Z.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["settings-merchant-bank-accounts"]],viewQuery:function(e,n){if(1&e&&t.Gf(rt,5),2&e){let c;t.iGM(c=t.CRH())&&(n.merchantBankAccountsNgForm=c.first)}},decls:30,vars:12,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full","max-w-4xl"],[1,"-ml-4","sm:mt-8"],["mat-button","",3,"routerLink","color"],[3,"svgIcon"],[1,"ml-2"],[1,"mt-2","text-4xl","sm:text-7xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-8","sm:mt-12","p-6","pb-7","sm:p-10","sm:pb-7","shadow","rounded-2xl","bg-card"],[1,"space-y-3",3,"formGroup"],["merchantBankAccountsNgForm","ngForm"],[1,"mb-6"],[1,"text-2xl","font-bold","tracking-tight"],[1,"text-secondary"],[1,"mt-8"],[1,"space-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4","rounded","cursor-pointer",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"flex","items-center","justify-end"],["mat-button","",3,"color","disabled","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"flex-auto","mat-fuse-dense",3,"subscriptSizing"],[4,"ngIf"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["maxlength","255","matInput","",3,"type","formControl","placeholder","spellcheck"],["maxlength","20","matInput","",3,"type","formControl","placeholder","spellcheck"],["required","",3,"formControl","placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar cuenta",1,"w-8","h-8","min-h-8",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),t._UZ(5,"mat-icon",5),t.TgZ(6,"span",6),t._uU(7,"Regresar"),t.qZA()()(),t.TgZ(8,"div",7),t._uU(9," Cuentas Bancarias del Negocio "),t.qZA(),t.TgZ(10,"div",8)(11,"form",9,10)(13,"div",11)(14,"div",12),t._uU(15," Agregue todas las cuentas bancarias que utilizar\xe1 en el negocio. "),t.qZA(),t.TgZ(16,"div",13),t._uU(17," Esta informaci\xf3n se utilizar\xe1 en la generaci\xf3n de documentos comerciales como las facturas y contratos. "),t.qZA()(),t.TgZ(18,"div",14)(19,"div",15),t.YNc(20,pt,20,28,"ng-container",16),t.qZA(),t.TgZ(21,"div",17),t.NdJ("click",function(){return n.addBankAccount()}),t._UZ(22,"mat-icon",18),t.TgZ(23,"span",19),t._uU(24," Agregar Cuenta "),t.qZA()()(),t.TgZ(25,"div",20)(26,"button",21),t.NdJ("click",function(){return n.clearForm()}),t._uU(27," Limpiar "),t.qZA(),t.TgZ(28,"button",22),t.NdJ("click",function(){return n.saveMerchant()}),t._uU(29," Guardar "),t.qZA()()()()()()()),2&e&&(t.xp6(4),t.Q6J("routerLink",t.DdM(11,dt))("color","primary"),t.xp6(1),t.Q6J("svgIcon","mat_solid:west"),t.xp6(6),t.Q6J("formGroup",n.merchantBankAccountsForm),t.xp6(9),t.Q6J("ngForOf",n.merchantBankAccountsForm.get("bankAccounts").controls)("ngForTrackBy",n.trackByFn),t.xp6(2),t.Q6J("svgIcon","mat_solid:add_circle"),t.xp6(4),t.Q6J("color","accent")("disabled",n.merchantBankAccountsForm.pristine||n.merchantBankAccountsForm.untouched),t.xp6(2),t.Q6J("color","primary")("disabled",n.merchantBankAccountsForm.pristine||n.merchantBankAccountsForm.invalid))},dependencies:[m.yS,u.mk,u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.nD,r.oH,r.sg,I.PQ,U.ey,g.lW,g.zs,b.Hw,p.KE,p.hX,p.qo,N.Nt,q.gD,ot.gM],encapsulation:2,changeDetection:0}),o})();var ht=i(1227),Q=i(5681);const ft=[{path:"",component:B,children:[{path:"",pathMatch:"full",redirectTo:"merchant"},{path:"merchant",component:z},{path:"merchant-bank-accounts",component:gt,resolve:{currencies:Q.Y}},{path:"merchant-info",component:nt,resolve:{state:ht.G,currencies:Q.Y}}]}];let _t=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(ft),J.m]}),o})()}}]);