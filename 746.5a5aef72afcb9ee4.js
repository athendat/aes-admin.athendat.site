"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[746],{6428:(nt,ce,m)=>{m.d(ce,{B:()=>le});const le=(0,m(5094).P1)(j=>j.pagination,j=>j.pagination)},6746:(nt,ce,m)=>{m.r(ce),m.d(ce,{StockModule:()=>Yi});var C=m(5357),e=m(5e3),le=m(655),j=m(2313),h=m(9808);const rt=["wrapper"],at=["sourceImage"];function st(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"img",4,5),e.NdJ("load",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.imageLoadedInView())})("mousedown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))})("touchstart",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Drag))}),e.qZA()}if(2&i){const t=e.oxw();e.Udp("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),e.ekj("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Q6J("src",t.safeImgDataUrl,e.LSH)}}function ct(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",9),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topleft"))}),e._UZ(2,"span",10),e.qZA(),e.TgZ(3,"span",11),e._UZ(4,"span",10),e.qZA(),e.TgZ(5,"span",12),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"topright"))}),e._UZ(6,"span",10),e.qZA(),e.TgZ(7,"span",13),e._UZ(8,"span",10),e.qZA(),e.TgZ(9,"span",14),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomright"))}),e._UZ(10,"span",10),e.qZA(),e.TgZ(11,"span",15),e._UZ(12,"span",10),e.qZA(),e.TgZ(13,"span",16),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottomleft"))}),e._UZ(14,"span",10),e.qZA(),e.TgZ(15,"span",17),e._UZ(16,"span",10),e.qZA(),e.TgZ(17,"span",18),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"top"))}),e.qZA(),e.TgZ(18,"span",19),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"right"))}),e.qZA(),e.TgZ(19,"span",20),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"bottom"))}),e.qZA(),e.TgZ(20,"span",21),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))})("touchstart",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.startMove(n,r.moveTypes.Resize,"left"))}),e.qZA(),e.BQk()}}function lt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("keydown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.keyboardAccess(n))}),e.TgZ(1,"div",7),e.NdJ("mousedown",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))})("touchstart",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.startMove(n,r.moveTypes.Move))}),e.qZA(),e.YNc(2,ct,21,0,"ng-container",8),e.qZA()}if(2&i){const t=e.oxw();e.Udp("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),e.ekj("ngx-ic-round",t.roundCropper),e.xp6(2),e.Q6J("ngIf",!t.hideResizeSquares)}}class dt{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(t=>t in this).forEach(t=>this[t]=s[t].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var A=(()=>{return(i=A||(A={})).Drag="drag",i.Move="move",i.Resize="resize",i.Pinch="pinch",A;var i})();function Re(i,s){return i/100*s}let ht=(()=>{class i{crop(t,o,n,r){const a=this.getImagePosition(t,o,n,r),l=a.x2-a.x1,d=a.y2-a.y1,p=document.createElement("canvas");p.width=l,p.height=d;const g=p.getContext("2d");if(!g)return null;null!=r.backgroundColor&&(g.fillStyle=r.backgroundColor,g.fillRect(0,0,l,d));const _=(r.transform.scale||1)*(r.transform.flipH?-1:1),w=(r.transform.scale||1)*(r.transform.flipV?-1:1),{translateH:$,translateV:L}=this.getCanvasTranslate(t,o,r),Q=o.transformed;g.setTransform(_,0,0,w,Q.size.width/2+$,Q.size.height/2+L),g.translate(-a.x1/_,-a.y1/w),g.rotate((r.transform.rotate||0)*Math.PI/180),g.drawImage(Q.image,-Q.size.width/2,-Q.size.height/2);const S={width:l,height:d,imagePosition:a,cropperPosition:Object.assign({},n)};r.containWithinAspectRatio&&(S.offsetImagePosition=this.getOffsetImagePosition(t,o,n,r));const se=this.getResizeRatio(l,d,r);return 1!==se&&(S.width=Math.round(l*se),S.height=r.maintainAspectRatio?Math.round(S.width/r.aspectRatio):Math.round(d*se),function gt(i,s,t){const o=i.width,n=i.height,r=o/(s=Math.round(s)),a=n/(t=Math.round(t)),l=Math.ceil(r/2),d=Math.ceil(a/2),p=i.getContext("2d");if(p){const g=p.getImageData(0,0,o,n),_=p.createImageData(s,t),w=g.data,$=_.data;for(let L=0;L<t;L++)for(let Q=0;Q<s;Q++){const S=4*(Q+L*s),se=L*a;let B=0,we=0,Ke=0,Ve=0,Xe=0,et=0,tt=0;const Pi=Math.floor(Q*r),Hi=Math.floor(L*a);let qe=Math.ceil((Q+1)*r),Qe=Math.ceil((L+1)*a);qe=Math.min(qe,o),Qe=Math.min(Qe,n);for(let Ae=Hi;Ae<Qe;Ae++){const ot=Math.abs(se-Ae)/d,$i=Q*r,Wi=ot*ot;for(let Te=Pi;Te<qe;Te++){const it=Math.abs($i-Te)/l,W=Math.sqrt(Wi+it*it);if(W>=1)continue;B=2*W*W*W-3*W*W+1;const G=4*(Te+Ae*o);tt+=B*w[G+3],Ke+=B,w[G+3]<255&&(B=B*w[G+3]/250),Ve+=B*w[G],Xe+=B*w[G+1],et+=B*w[G+2],we+=B}}$[S]=Ve/we,$[S+1]=Xe/we,$[S+2]=et/we,$[S+3]=tt/Ke}i.width=s,i.height=t,p.putImageData(_,0,0)}}(p,S.width,S.height)),S.base64=p.toDataURL("image/"+r.format,this.getQuality(r)),S}getCanvasTranslate(t,o,n){if("px"===n.transform.translateUnit){const r=this.getRatio(t,o);return{translateH:(n.transform.translateH||0)*r,translateV:(n.transform.translateV||0)*r}}return{translateH:n.transform.translateH?Re(n.transform.translateH,o.transformed.size.width):0,translateV:n.transform.translateV?Re(n.transform.translateV,o.transformed.size.height):0}}getRatio(t,o){return o.transformed.size.width/t.nativeElement.offsetWidth}getImagePosition(t,o,n,r){const a=this.getRatio(t,o),l={x1:Math.round(n.x1*a),y1:Math.round(n.y1*a),x2:Math.round(n.x2*a),y2:Math.round(n.y2*a)};return r.containWithinAspectRatio||(l.x1=Math.max(l.x1,0),l.y1=Math.max(l.y1,0),l.x2=Math.min(l.x2,o.transformed.size.width),l.y2=Math.min(l.y2,o.transformed.size.height)),l}getOffsetImagePosition(t,o,n,r){const d=o.transformed.size.width/t.nativeElement.offsetWidth;let p,g;(r.canvasRotation+o.exifTransform.rotate)%2?(p=(o.transformed.size.width-o.original.size.height)/2,g=(o.transformed.size.height-o.original.size.width)/2):(p=(o.transformed.size.width-o.original.size.width)/2,g=(o.transformed.size.height-o.original.size.height)/2);const _={x1:Math.round(n.x1*d)-p,y1:Math.round(n.y1*d)-g,x2:Math.round(n.x2*d)-p,y2:Math.round(n.y2*d)-g};return r.containWithinAspectRatio||(_.x1=Math.max(_.x1,0),_.y1=Math.max(_.y1,0),_.x2=Math.min(_.x2,o.transformed.size.width),_.y2=Math.min(_.y2,o.transformed.size.height)),_}getResizeRatio(t,o,n){const r=n.resizeToWidth/t,a=n.resizeToHeight/o,l=new Array;n.resizeToWidth>0&&l.push(r),n.resizeToHeight>0&&l.push(a);const d=0===l.length?1:Math.min(...l);return d>1&&!n.onlyScaleDown?d:Math.min(d,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_t=(()=>{class i{resetCropperPosition(t,o,n){if(null==t||!t.nativeElement)return;const r=t.nativeElement;if(n.cropperStaticHeight&&n.cropperStaticWidth)o.x1=0,o.x2=r.offsetWidth>n.cropperStaticWidth?n.cropperStaticWidth:r.offsetWidth,o.y1=0,o.y2=r.offsetHeight>n.cropperStaticHeight?n.cropperStaticHeight:r.offsetHeight;else{const a=Math.min(n.cropperScaledMaxWidth,r.offsetWidth),l=Math.min(n.cropperScaledMaxHeight,r.offsetHeight);if(n.maintainAspectRatio)if(r.offsetWidth/n.aspectRatio<r.offsetHeight){o.x1=0,o.x2=a;const d=a/n.aspectRatio;o.y1=(r.offsetHeight-d)/2,o.y2=o.y1+d}else{o.y1=0,o.y2=l;const d=l*n.aspectRatio;o.x1=(r.offsetWidth-d)/2,o.x2=o.x1+d}else o.x1=0,o.x2=a,o.y1=0,o.y2=l}}move(t,o,n){const r=this.getClientX(t)-o.clientX,a=this.getClientY(t)-o.clientY;n.x1=o.x1+r,n.y1=o.y1+a,n.x2=o.x2+r,n.y2=o.y2+a}resize(t,o,n,r,a){const l=this.getClientX(t)-o.clientX,d=this.getClientY(t)-o.clientY;switch(o.position){case"left":n.x1=Math.min(Math.max(o.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth);break;case"topleft":n.x1=Math.min(Math.max(o.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y1=Math.min(Math.max(o.y1+d,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"top":n.y1=Math.min(Math.max(o.y1+d,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"topright":n.x2=Math.max(Math.min(o.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y1=Math.min(Math.max(o.y1+d,n.y2-a.cropperScaledMaxHeight),n.y2-a.cropperScaledMinHeight);break;case"right":n.x2=Math.max(Math.min(o.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth);break;case"bottomright":n.x2=Math.max(Math.min(o.x2+l,n.x1+a.cropperScaledMaxWidth),n.x1+a.cropperScaledMinWidth),n.y2=Math.max(Math.min(o.y2+d,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottom":n.y2=Math.max(Math.min(o.y2+d,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"bottomleft":n.x1=Math.min(Math.max(o.x1+l,n.x2-a.cropperScaledMaxWidth),n.x2-a.cropperScaledMinWidth),n.y2=Math.max(Math.min(o.y2+d,n.y1+a.cropperScaledMaxHeight),n.y1+a.cropperScaledMinHeight);break;case"center":const p=t.scale,g=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(o.x2-o.x1)*p),a.cropperScaledMaxWidth),_=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(o.y2-o.y1)*p),a.cropperScaledMaxHeight);n.x1=o.clientX-g/2,n.x2=o.clientX+g/2,n.y1=o.clientY-_/2,n.y2=o.clientY+_/2,n.x1<0?(n.x2-=n.x1,n.x1=0):n.x2>r.width&&(n.x1-=n.x2-r.width,n.x2=r.width),n.y1<0?(n.y2-=n.y1,n.y1=0):n.y2>r.height&&(n.y1-=n.y2-r.height,n.y2=r.height)}a.maintainAspectRatio&&this.checkAspectRatio(o.position,n,r,a)}checkAspectRatio(t,o,n,r){let a=0,l=0;switch(t){case"top":o.x2=o.x1+(o.y2-o.y1)*r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(0-o.y1,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y1+=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"bottom":o.x2=o.x1+(o.y2-o.y1)*r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(o.y2-n.height,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y2-=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"topleft":o.y1=o.y2-(o.x2-o.x1)/r.aspectRatio,a=Math.max(0-o.x1,0),l=Math.max(0-o.y1,0),(a>0||l>0)&&(o.x1+=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y1+=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"topright":o.y1=o.y2-(o.x2-o.x1)/r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(0-o.y1,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y1+=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"right":case"bottomright":o.y2=o.y1+(o.x2-o.x1)/r.aspectRatio,a=Math.max(o.x2-n.width,0),l=Math.max(o.y2-n.height,0),(a>0||l>0)&&(o.x2-=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y2-=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"left":case"bottomleft":o.y2=o.y1+(o.x2-o.x1)/r.aspectRatio,a=Math.max(0-o.x1,0),l=Math.max(o.y2-n.height,0),(a>0||l>0)&&(o.x1+=l*r.aspectRatio>a?l*r.aspectRatio:a,o.y2-=l*r.aspectRatio>a?l:a/r.aspectRatio);break;case"center":o.x2=o.x1+(o.y2-o.y1)*r.aspectRatio,o.y2=o.y1+(o.x2-o.x1)/r.aspectRatio;const d=Math.max(0-o.x1,0),p=Math.max(o.x2-n.width,0),g=Math.max(o.y2-n.height,0),_=Math.max(0-o.y1,0);(d>0||p>0||g>0||_>0)&&(o.x1+=g*r.aspectRatio>d?g*r.aspectRatio:d,o.x2-=_*r.aspectRatio>p?_*r.aspectRatio:p,o.y1+=_*r.aspectRatio>p?_:p/r.aspectRatio,o.y2-=g*r.aspectRatio>d?g:d/r.aspectRatio)}}getClientX(t){var o;return(null===(o=t.touches)||void 0===o?void 0:o[0].clientX)||t.clientX||0}getClientY(t){var o;return(null===(o=t.touches)||void 0===o?void 0:o[0].clientY)||t.clientY||0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();let yt=(()=>{class i{constructor(){this.autoRotateSupported=function xt(){return new Promise(i=>{const s=new Image;s.onload=()=>{i(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(t,o){return new Promise((n,r)=>{const a=new FileReader;a.onload=l=>{this.loadImage(l.target.result,t.type,o).then(n).catch(r)},a.readAsDataURL(t)})}loadImage(t,o,n){return this.isValidImageType(o)?this.loadBase64Image(t,n):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,o){return new Promise((n,r)=>{const a=new Image;a.onerror=()=>r,a.onload=()=>{const l=document.createElement("canvas"),d=l.getContext("2d");l.width=a.width,l.height=a.height,null==d||d.drawImage(a,0,0),this.loadBase64Image(l.toDataURL(),o).then(n)},a.crossOrigin="anonymous",a.src=t})}loadBase64Image(t,o){return new Promise((n,r)=>{const a=new Image;a.onload=()=>n({originalImage:a,originalBase64:t}),a.onerror=r,a.src=t}).then(n=>this.transformImageBase64(n,o))}transformImageBase64(t,o){return(0,le.mG)(this,void 0,void 0,function*(){const n=yield this.autoRotateSupported,r=yield function vt(i){switch("string"==typeof i&&(i=function bt(i){const s=new DataView(function Ct(i){i=i.replace(/^data\:([^\;]+)\;base64,/gim,"");const s=atob(i),t=s.length,o=new Uint8Array(t);for(let n=0;n<t;n++)o[n]=s.charCodeAt(n);return o.buffer}(i));if(65496!==s.getUint16(0,!1))return-2;const t=s.byteLength;let o=2;for(;o<t;){if(s.getUint16(o+2,!1)<=8)return-1;const n=s.getUint16(o,!1);if(o+=2,65505==n){if(1165519206!==s.getUint32(o+=2,!1))return-1;const r=18761==s.getUint16(o+=6,!1);o+=s.getUint32(o+4,r);const a=s.getUint16(o,r);o+=2;for(let l=0;l<a;l++)if(274==s.getUint16(o+12*l,r))return s.getUint16(o+12*l+8,r)}else{if(65280!=(65280&n))break;o+=s.getUint16(o,!1)}}return-1}(i)),i){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(n?-1:t.originalBase64);return t.originalImage&&t.originalImage.complete?this.transformLoadedImage({original:{base64:t.originalBase64,image:t.originalImage,size:{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:r},o):Promise.reject(new Error("No image loaded"))})}transformLoadedImage(t,o){return(0,le.mG)(this,void 0,void 0,function*(){const n=o.canvasRotation+t.exifTransform.rotate,r={width:t.original.image.naturalWidth,height:t.original.image.naturalHeight};if(0===n&&!t.exifTransform.flip&&!o.containWithinAspectRatio)return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},transformed:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},exifTransform:t.exifTransform};const a=this.getTransformedSize(r,t.exifTransform,o),l=document.createElement("canvas");l.width=a.width,l.height=a.height;const d=l.getContext("2d");null==d||d.setTransform(t.exifTransform.flip?-1:1,0,0,1,l.width/2,l.height/2),null==d||d.rotate(Math.PI*(n/2)),null==d||d.drawImage(t.original.image,-r.width/2,-r.height/2);const p=l.toDataURL(),g=yield this.loadImageFromBase64(p);return{original:{base64:t.original.base64,image:t.original.image,size:Object.assign({},r)},transformed:{base64:p,image:g,size:{width:g.width,height:g.height}},exifTransform:t.exifTransform}})}loadImageFromBase64(t){return new Promise((o,n)=>{const r=new Image;r.onload=()=>o(r),r.onerror=n,r.src=t})}getTransformedSize(t,o,n){const r=n.canvasRotation+o.rotate;if(n.containWithinAspectRatio){if(r%2){const l=t.height/n.aspectRatio;return{width:Math.max(t.height,t.width*n.aspectRatio),height:Math.max(t.width,l)}}{const l=t.width/n.aspectRatio;return{width:Math.max(t.width,t.height*n.aspectRatio),height:Math.max(t.height,l)}}}return r%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Fe=(()=>{class i{constructor(t,o,n,r,a){this.cropService=t,this.cropperPositionService=o,this.loadImageService=n,this.sanitizer=r,this.cd=a,this.Hammer=(null==window?void 0:window.Hammer)||null,this.settings=new dt,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=A,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new e.vpe,this.startCropImage=new e.vpe,this.imageLoaded=new e.vpe,this.cropperReady=new e.vpe,this.loadImageFailed=new e.vpe,this.transformChange=new e.vpe,this.reset()}ngOnChanges(t){var o;this.onChangesUpdateSettings(t),this.onChangesInputImage(t),(null===(o=this.loadedImage)||void 0===o?void 0:o.original.image.complete)&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(n=>this.setLoadedImage(n)).catch(n=>this.loadImageError(n)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck())}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var t,o,n;return(null===(n=null===(o=null===(t=this.imageChangedEvent)||void 0===t?void 0:t.target)||void 0===o?void 0:o.files)||void 0===n?void 0:n.length)>0}setCssTransform(){var t;const o=(null===(t=this.transform)||void 0===t?void 0:t.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${o}, ${this.transform.translateV||0}${o}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(o=>this.setLoadedImage(o)).catch(o=>this.loadImageError(o))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.base64),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var t,o;return(null===(o=null===(t=this.sourceImage)||void 0===t?void 0:t.nativeElement)||void 0===o?void 0:o.offsetWidth)>0}onResize(){!this.loadedImage||(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else(0,e.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;(this.maxSize.width!==t.offsetWidth||this.maxSize.height!==t.offsetHeight)&&(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const o=+t.key;o>=1&&o<=9&&(this.settings.stepSize=o)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const n=t.shiftKey?A.Resize:A.Move,r=t.altKey?function pt(i){switch(i){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function mt(i){switch(i){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),a=function ut(i,s){switch(i){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},n,r),this.moveImg(a),this.moveStop()}startMove(t,o,n=null){var r,a;this.disabled||(null===(r=this.moveStart)||void 0===r?void 0:r.active)&&(null===(a=this.moveStart)||void 0===a?void 0:a.type)===A.Pinch||o===A.Drag&&!this.allowMoveImage||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:o,position:n,transform:Object.assign({},this.transform),clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper))}startPinch(t){!this.safeImgDataUrl||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:A.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){var o,n;if(this.moveStart.active){if(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===A.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===A.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===A.Drag){const r=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,a=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform=Object.assign(Object.assign({},this.transform),{translateH:((null===(o=this.moveStart.transform)||void 0===o?void 0:o.translateH)||0)+r,translateV:((null===(n=this.moveStart.transform)||void 0===n?void 0:n.translateV)||0)+a}),this.setCssTransform()}this.cd.detectChanges()}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===A.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var t,o;null!==(o=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)&&void 0!==o&&o.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){var t,o;if(null!==(o=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)&&void 0!==o&&o.image){const n=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/n:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/n:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){var t;this.moveStart.active&&(this.moveStart.active=!1,(null===(t=this.moveStart)||void 0===t?void 0:t.type)===A.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){var t,o;if(null!=(null===(o=null===(t=this.loadedImage)||void 0===t?void 0:t.transformed)||void 0===o?void 0:o.image)){this.startCropImage.emit();const n=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=n&&this.imageCropped.emit(n),n}return null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ht),e.Y36(_t),e.Y36(yt),e.Y36(j.H7),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["image-cropper"]],viewQuery:function(t,o){if(1&t&&(e.Gf(rt,7),e.Gf(at,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.wrapper=n.first),e.iGM(n=e.CRH())&&(o.sourceImage=n.first)}},hostVars:4,hostBindings:function(t,o){1&t&&e.NdJ("resize",function(){return o.onResize()},!1,e.Jf7)("mousemove",function(r){return o.moveImg(r)},!1,e.evT)("touchmove",function(r){return o.moveImg(r)},!1,e.evT)("mouseup",function(){return o.moveStop()},!1,e.evT)("touchend",function(){return o.moveStop()},!1,e.evT),2&t&&(e.Udp("text-align",o.alignImage),e.ekj("disabled",o.disabled))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[e.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(t,o){1&t&&(e.TgZ(0,"div",null,0),e.YNc(2,st,2,7,"img",1),e._UZ(3,"div",2),e.YNc(4,lt,3,15,"div",3),e.qZA()),2&t&&(e.Udp("background",o.imageVisible&&o.backgroundColor),e.xp6(2),e.Q6J("ngIf",o.safeImgDataUrl),e.xp6(1),e.Udp("width",o.maxSize.width,"px")("height",o.maxSize.height,"px")("margin-left","center"===o.alignImage?o.marginLeft:null),e.xp6(1),e.Q6J("ngIf",o.imageVisible))},dependencies:[h.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),i})(),kt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.ez]]}),i})();var Je=m(8314),Zt=m(2266),c=m(3075),y=m(9646),T=m(7579),u=m(2722),de=m(5119),z=m(4787);const Ne={_id:null,userId:null,merchantId:null,active:null,name:null};var J=m(520),I=m(8505),me=m(4813),k=m(5698),x=m(3900),b=m(4004),pe=m(5714),ue=m(2340),K=m(8124),v=m(5094);const De=i=>i.brands,Y=((0,v.P1)(De,i=>i.brand),(0,v.P1)(De,i=>i.brands)),V=ue.N.API_URL;let ge=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o}getBrands(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${V}/brands/`,{params:l}).pipe((0,I.b)(({pagination:d,brands:p})=>{this.store.dispatch((0,pe.Jr)({pagination:d})),this.store.dispatch((0,K.dk)({brands:p}))}))}getBrandById(t){return this._httpClient.get(`${V}/brands/${t}`).pipe((0,me.j)("brand"),(0,I.b)(o=>{this.store.dispatch((0,K.HB)({brand:o}))}))}createBrand(t){return this.store.select(Y).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${V}/brands/`,t).pipe((0,I.b)(n=>{this.store.dispatch((0,K.dk)({brands:[n.brand,...o]}))}))))}updateBrand(t){return this.store.select(Y).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${V}/brands/${t._id}`,t).pipe((0,b.U)(n=>([...o][o.findIndex(l=>l._id===t._id)]=n.brand,this.store.dispatch((0,K.dk)({brands:o})),n)))))}deleteBrand(t){return this.store.select(Y).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${V}/brands/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this.store.dispatch((0,K.dk)({brands:o})),n}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=m(1683),Be=m(7231),ze=m(393),U=m(7423),F=m(5245),f=m(7322),R=m(7531),he=m(2368);function wt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createBrand())}),e._UZ(2,"mat-icon",31),e.TgZ(3,"span",32),e._uU(4,"Guardar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:save"))}function At(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateBrand())}),e._UZ(2,"mat-icon",31),e.TgZ(3,"span",32),e._uU(4,"Actualizar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:refresh"))}let Tt=(()=>{class i{constructor(t,o,n,r,a,l,d,p){this._activatedRoute=t,this._brandsService=o,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=a,this._imagesService=l,this._router=d,this.store=p,this.brandId=null,this.croppedImage="",this.editMode=!1,this.imageChangedEvent="",this.selectedBrand=Ne,this.user=null,this.user$=(0,y.of)(null),this._unsubscribeAll=new T.x}ngOnInit(){this._activatedRoute.params.pipe((0,u.R)(this._unsubscribeAll)).subscribe(({brandId:t})=>{this.brandId=t,"new"!==this.brandId&&(this.editMode=!0,this._brandsService.getBrandById(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(o=>{this.selectedBrand=o,this.brandForm.patchValue(this.selectedBrand)})),this._changeDetectorRef.markForCheck()}),this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.brandForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],description:[null,[c.kI.minLength(3),c.kI.maxLength(250)]],logoUrl:[null]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createBrand(){let t=this.brandForm.getRawValue();t=(0,de.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.createBrand(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/stock/panels/brands")}),this._changeDetectorRef.markForCheck()})}updateBrand(){const t=this.brandForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.updateBrand(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._router.navigateByUrl("/stock/panels/brands"),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.base64;const o=this.base64ToFile(t.base64,this.brandForm.get("name").value);this._imagesService.uploadImage("brands",o).pipe((0,u.R)(this._unsubscribeAll)).subscribe(n=>{this.brandForm.get("logoUrl").setValue(n.imageUrl),this.editMode&&this._brandsService.updateBrand(this.brandForm.getRawValue()).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Imagen guardada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}base64ToFile(t,o){const n=t.split(","),a=n[0].match(/:(.*?);/)[1].split("/")[1],l=o+"."+a,d=atob(n[1]);let p=d.length;const g=new Uint8Array(p);for(;p--;)g[p]=d.charCodeAt(p);return new File([g],l,{type:a})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.gz),e.Y36(ge),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(Be.C),e.Y36(C.F0),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-brand-details"]],decls:54,vars:21,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"z-20","flex","flex-col","p-6","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],["routerLink","/stock/panels/brands",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[4,"ngIf"],["cdkScrollable","",1,"flex","flex-auto","p-6","overflow-y-auto","sm:py-8","sm:px-10"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["matInput","","matTextareaAutosize","","maxlength","250",3,"formControlName"],[1,"flex","flex-col","gap-5","mt-4","sm:flex-row"],[1,"flex","flex-col"],[1,"mb-4","font-medium"],["type","file",3,"change"],[3,"formControlName","color"],[1,"flex","flex-row","pb-10","mt-3","gap-x-3"],[1,"w-40","h-40"],["format","[png, jpeg, webp, jpg]",1,"w-40","h-40","border","shadow-sm",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","resizeToHeight","imageCropped"],[1,"w-40","h-40","border","shadow-sm"],[3,"src"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Inventario"),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Marcas"),e.qZA()(),e.TgZ(16,"div",5),e._UZ(17,"mat-icon",6),e.TgZ(18,"a",9),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",10)(21,"h2",11),e._uU(22),e.qZA()()(),e.TgZ(23,"div",12),e.YNc(24,wt,5,1,"ng-container",13),e.YNc(25,At,5,1,"ng-container",13),e.qZA()(),e.TgZ(26,"div",14)(27,"form",15)(28,"div",16)(29,"mat-form-field",17)(30,"mat-label"),e._uU(31,"Nombre"),e.qZA(),e._UZ(32,"input",18),e.qZA()(),e.TgZ(33,"div",16)(34,"mat-form-field",17)(35,"mat-label"),e._uU(36,"Descripci\xf3n"),e.qZA(),e.TgZ(37,"textarea",19),e._uU(38,"                    "),e.qZA()()(),e.TgZ(39,"div",20)(40,"div",21)(41,"span",22),e._uU(42,"Logo"),e.qZA(),e.TgZ(43,"input",23),e.NdJ("change",function(r){return o.fileChangeEvent(r)}),e.qZA()(),e.TgZ(44,"div",21)(45,"span",22),e._uU(46,"Estado"),e.qZA(),e.TgZ(47,"mat-slide-toggle",24),e._uU(48),e.qZA()()(),e.TgZ(49,"div",25)(50,"div",26)(51,"image-cropper",27),e.NdJ("imageCropped",function(r){return o.imageCropped(r)}),e.qZA()(),e.TgZ(52,"div",28),e._UZ(53,"img",29),e.qZA()()()()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Oqu("new"===o.brandId?"Nuevo":o.selectedBrand.name),e.xp6(3),e.hij(" ","new"===o.brandId?"Nuevo":o.selectedBrand.name," "),e.xp6(2),e.Q6J("ngIf",!o.editMode),e.xp6(1),e.Q6J("ngIf",o.editMode),e.xp6(2),e.Q6J("formGroup",o.brandForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Marca"),e.xp6(5),e.Q6J("formControlName","description"),e.xp6(10),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===o.brandForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(3),e.Q6J("imageChangedEvent",o.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",800)("resizeToHeight",800),e.xp6(2),e.Q6J("src",o.croppedImage,e.LSH))},dependencies:[Fe,C.yS,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,ze.PQ,U.lW,F.Hw,f.KE,f.hX,R.Nt,he.Rr],encapsulation:2}),i})();var E=m(6087),q=m(4847),_e=m(6451),P=m(8372),fe=m(6428),xe=m(8288),Z=m(8966);function It(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Marca "),e.qZA())}function St(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Editar Marca "),e.qZA())}function Mt(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(t.data.brand.name||"Sin nombre")}}function Ut(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"textarea",21),e._uU(13,"                                "),e.qZA()()(),e.TgZ(14,"div",22)(15,"span",23),e._uU(16,"Estado"),e.qZA(),e.TgZ(17,"mat-slide-toggle",24),e._uU(18),e.qZA()(),e.TgZ(19,"div",22)(20,"span",23),e._uU(21,"Logo"),e.qZA(),e.TgZ(22,"input",25),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.fileChangeEvent(n))}),e.qZA(),e.TgZ(23,"div",26)(24,"div",27)(25,"image-cropper",28),e.NdJ("imageCropped",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.imageCropped(n))})("imageLoaded",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.imageLoaded())})("cropperReady",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cropperReady())})("loadImageFailed",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.loadImageFailed())}),e.qZA()(),e.TgZ(26,"div",29),e._UZ(27,"img",30),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.brandForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Marca"),e.xp6(5),e.Q6J("matAutosizeMinRows",1)("formControlName","description"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.brandForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(7),e.Q6J("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1),e.xp6(2),e.Q6J("src",t.croppedImage,e.LSH)}}function qt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",33),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateBrand())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.brandForm.invalid)("matDialogClose","confirmed")}}function Qt(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",33),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createBrand())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.brandForm.invalid)("matDialogClose","confirmed")}}function Rt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",31),e.ynx(2),e.TgZ(3,"button",32),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,qt,3,3,"ng-container",6),e.YNc(6,Qt,3,3,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Ft=(()=>{class i{constructor(t,o,n,r,a,l,d){this.data=t,this._brandsService=o,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=a,this._dialogRef=l,this.store=d,this.dialogMode="view",this.user$=(0,y.of)(null),this.user=null,this.imageChangedEvent="",this.croppedImage="",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.brand=t.brand}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.brandForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],description:[null,[c.kI.minLength(3),c.kI.maxLength(250)]],logoUrl:[null]}),"edit"===this.dialogMode&&this.brandForm.patchValue(this.brand)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createBrand(){let t=this.brandForm.getRawValue();t=(0,de.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.createBrand(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateBrand(){const t=this.brandForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Marca",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._brandsService.updateBrand(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.base64}imageLoaded(t){}cropperReady(){}loadImageFailed(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(ge),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(Z.so),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-brand-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["matInput","","matTextareaAutosize","","maxlength","250",3,"matAutosizeMinRows","formControlName"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],["type","file",3,"change"],[1,"flex","flex-row","mt-3","gap-x-3"],[1,"w-2/3"],["format","[png, jpeg, webp, jpg]",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"w-1/3","border","shadow-sm"],[3,"src"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,It,2,0,"h2",2),e.YNc(4,St,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Mt,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Ut,28,13,"div",5),e.BQk(),e.qZA(),e.YNc(10,Rt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[Fe,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,U.lW,Z.ZT,f.KE,f.hX,R.Nt,he.Rr],encapsulation:2}),i})();function Jt(i,s){if(1&i&&e._UZ(0,"img",42),2&i){const t=e.oxw().$implicit;e.Q6J("alt","Brand Logo")("src",t.logoUrl,e.LSH)}}function Nt(i,s){1&i&&(e.TgZ(0,"div",43),e._uU(1," SIN LOGO "),e.qZA())}function Dt(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",44),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Bt(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",45),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}const zt=function(i){return["/modules/stock/panels/brand",i]};function Et(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",31)(2,"div",32)(3,"div",33),e.YNc(4,Jt,1,2,"img",34),e.YNc(5,Nt,2,0,"div",35),e.qZA()(),e.TgZ(6,"div",36),e._uU(7),e.qZA(),e.TgZ(8,"div",37)(9,"div",38),e._uU(10),e.qZA()(),e.TgZ(11,"div",39),e.YNc(12,Dt,2,1,"ng-container",20),e.YNc(13,Bt,2,1,"ng-container",20),e.qZA(),e.TgZ(14,"div")(15,"button",40),e._UZ(16,"mat-icon",41),e.qZA()()(),e.BQk()),2&i){const t=s.$implicit;e.xp6(4),e.Q6J("ngIf",t.logoUrl),e.xp6(1),e.Q6J("ngIf",!t.logoUrl),e.xp6(2),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("routerLink",e.VKq(8,zt,t._id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil")}}function Lt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Et,17,10,"ng-container",30),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const Ot=function(i){return{"pointer-events-none":i}},Yt=function(){return[5,10,25,100]};function Pt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24),e._UZ(3,"div"),e.TgZ(4,"div",25),e._uU(5,"Nombre"),e.qZA(),e.TgZ(6,"div",26),e._uU(7," Descripci\xf3n "),e.qZA(),e.TgZ(8,"div",27),e._uU(9," Activo "),e.qZA(),e.TgZ(10,"div",28),e._uU(11,"Detalles"),e.qZA()(),e.YNc(12,Lt,2,2,"ng-container",20),e.ALo(13,"async"),e.qZA(),e._UZ(14,"mat-paginator",29),e.BQk()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(13,9,t.brands$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,Ot,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(13,Yt))("showFirstLastButtons",!0)}}function Ht(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Pt,15,14,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function $t(i,s){1&i&&(e.TgZ(0,"div",46),e._uU(1,"\xa1No se ha creado ninguna marca!"),e.qZA())}let Wt=(()=>{class i{constructor(t,o,n,r,a){this._brandsService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=r,this.store=a,this.flashMessage=null,this.brands$=(0,y.of)([]),this.merchantInputControl=new c.p4,this.isLoading=!1,this.searchInputControl=new c.p4,this._unsubscribeAll=new T.x}ngOnInit(){this.brands$=this.store.select(Y),this.store.select(fe.B).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,u.R)(this._unsubscribeAll),(0,P.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._brandsService.getBrands(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,_e.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._brandsService.getBrands(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createBrand(){this._openDialog(Ne,"add")}updateBrand(t){this._openDialog(t,"edit")}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(Ft,{data:{brand:t,dialogMode:o},panelClass:"ath-dialog-panel"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ge),e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-brands"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noBrands",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","brands-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","md:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","brands-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Inventario"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Marcas"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Marcas "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return o.createBrand()}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,Ht,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,$t,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar marcas"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.brands$)))},dependencies:[C.rH,C.yS,h.mk,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov],styles:[".brands-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.brands-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.brands-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.brands-grid{grid-template-columns:72px auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:xe.L},changeDetection:0}),i})();var ve=m(3259),Gt=m(8258),O=m(149),jt=m(449),N=m(7489),Kt=m(1910),Vt=m(8675),be=m(7261),Xt=m(2494);let Ce=(()=>{class i{constructor(t){this.data=t,this.title="",this.message="",this.message=this.data.message,this.title=this.data.title}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(be.qD))},i.\u0275cmp=e.Xpm({type:i,selectors:[["categories-success"]],decls:5,vars:5,consts:[[3,"type","appearance"],["fuseAlertIcon","",1,"icon-size-5",3,"svgIcon"],["fuseAlertTitle",""]],template:function(t,o){1&t&&(e.TgZ(0,"fuse-alert",0),e._UZ(1,"mat-icon",1),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e._uU(4),e.qZA()),2&t&&(e.Q6J("type","success")("appearance","fill"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"),e.xp6(2),e.Oqu(o.title),e.xp6(1),e.hij(" ",o.message,"\n"))},dependencies:[Xt.W,F.Hw],encapsulation:2}),i})();var ye=m(2682),Ee=m(1079),X=m(508);function eo(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la categor\xeda es obligatorio. "),e.qZA())}function to(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," La cueta padre es obligatoria. "),e.qZA())}function oo(i,s){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}const io=function(i){return{"cursor-not-allowed":i}};let no=(()=>{class i{constructor(t,o,n,r,a,l,d,p){this.data=t,this._athConfirmationService=o,this._categoriesService=n,this._changeDetectorRef=r,this._dialogRef=a,this._formBuilder=l,this._snackBar=d,this.store=p,this.categories=[],this.categoriesData=[],this.category=null,this._unsubscribeAll=new T.x}ngOnInit(){this.store.select(z.rk).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t}),this.store.select(ve.us).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=[{_id:"000000000000000000000000",parentId:"root",name:"Principal",level:0},...t],this.categoriesData=[{_id:"000000000000000000000000",parentId:"root",name:"Principal",level:0},...t]}),this.searchCategoriesControl=new c.p4(""),this.categoryForm=this._formBuilder.group({_id:[null],userId:[this.user._id,[c.kI.required]],active:[!1],name:[null,[c.kI.required,c.kI.maxLength(250)]],businessId:["000000000000000000000000"],parentId:["000000000000000000000000"],level:[0,[c.kI.required,c.kI.min(0)]]}),this.filteredCategories=this.searchCategoriesControl.valueChanges.pipe((0,u.R)(this._unsubscribeAll),(0,P.b)(600),(0,Vt.O)(""),(0,x.w)(t=>(0,y.of)(this.categories.filter(o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())))))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}fillOwnerCategories(t){const o=t.option.value;this.categoryForm.get("parentId").setValue(o._id),this.categoryForm.get("level").setValue(o.level),this.searchCategoriesControl.setValue(o.name)}closeDialog(t){this.category=t,this.data.category=t,this._dialogRef.close(this.data)}createCategory(){let t=this.categoryForm.getRawValue();t=(0,N.omit)(t,["_id","createdAt","updatedAt"]),this._athConfirmationService.open({title:"Crear Categor\xeda",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._categoriesService.createCategory(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._snackBar.openFromComponent(Ce,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n"}}),this._changeDetectorRef.markForCheck(),this.closeDialog(r.category)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(M.R),e.Y36(ye.G),e.Y36(e.sBO),e.Y36(Z.so),e.Y36(c.QS),e.Y36(be.ux),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["categories-dialog"]],decls:33,vars:19,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title",""],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-x-4"],[1,""],[1,"w-full"],["matInput","","require","",3,"formControlName","type","placeholder"],[4,"ngIf"],["aria-label","String","matInput","","required","",3,"type","placeholder","formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","bg-gray-50"],["mat-button","",1,"-ml-4","rounded-full",3,"color","click"],["mat-flat-button","",1,"rounded-full","bg-primary-500","text-black",3,"ngClass","disabled","click"],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1)(3,"h2",2),e._uU(4,"Agregar categor\xeda"),e.qZA()(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.TgZ(7,"div",4)(8,"div",5)(9,"form",6)(10,"div",7)(11,"div",8)(12,"mat-form-field",9)(13,"mat-label"),e._uU(14,"Nombre de la categor\xeda"),e.qZA(),e._UZ(15,"input",10),e.YNc(16,eo,2,0,"mat-error",11),e.qZA()(),e.TgZ(17,"div",8)(18,"mat-form-field",9)(19,"mat-label"),e._uU(20,"Categor\xeda Padre"),e.qZA(),e._UZ(21,"input",12),e.YNc(22,to,2,0,"mat-error",11),e.TgZ(23,"mat-autocomplete",13,14),e.NdJ("optionSelected",function(r){return o.fillOwnerCategories(r)}),e.YNc(25,oo,2,2,"mat-option",15),e.ALo(26,"async"),e.qZA()()()()()()(),e.BQk(),e.qZA(),e.ynx(27),e.TgZ(28,"div",16)(29,"button",17),e.NdJ("click",function(){return o.closeDialog(null)}),e._uU(30,"Cancelar"),e.qZA(),e.TgZ(31,"button",18),e.NdJ("click",function(){return o.createCategory()}),e._uU(32,"Agregar"),e.qZA()(),e.BQk(),e.qZA()),2&t){const n=e.MAs(24);e.xp6(9),e.Q6J("formGroup",o.categoryForm)("autocomplete","off"),e.xp6(6),e.Q6J("formControlName","name")("type","text")("placeholder","Introduzca el nombre de la categor\xeda"),e.xp6(1),e.Q6J("ngIf",o.categoryForm.get("name").hasError("required")),e.xp6(5),e.Q6J("type","text")("placeholder","Filtre por nombre o n\xfamero de categor\xeda")("formControl",o.searchCategoriesControl)("matAutocomplete",n),e.xp6(1),e.Q6J("ngIf",o.categoryForm.get("parentId").hasError("required")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(26,15,o.filteredCategories)),e.xp6(4),e.Q6J("color","warn"),e.xp6(2),e.Q6J("ngClass",e.VKq(17,io,o.categoryForm.invalid))("disabled",o.categoryForm.invalid)}},dependencies:[h.mk,h.sg,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,Ee.XC,Ee.ZL,X.ey,U.lW,Z.uh,f.TO,f.KE,f.hX,R.Nt,h.Ov],encapsulation:2,changeDetection:0}),i})();var ro=m(7839),ee=m(1233);function ao(i,s){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la categor\xeda es obligatorio. "),e.qZA())}const Le=function(i){return{"cursor-not-allowed":i}};function so(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createCategory())}),e._UZ(1,"mat-icon",8),e._uU(2," Salvar "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,Le,t.categoryForm.invalid))("disabled",t.categoryForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function co(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateCategory())}),e._UZ(1,"mat-icon",8),e._uU(2," Editar "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(3,Le,t.categoryForm.invalid))("disabled",t.categoryForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}let lo=(()=>{class i{constructor(t,o,n,r,a,l){this._athConfirmationService=t,this._categoriesService=o,this._changeDetectorRef=n,this._formBuilder=r,this.store=a,this._snackBar=l,this.mode="add",this._unsubscribeAll=new T.x}ngOnInit(){this.categoryForm=this._formBuilder.group({name:[this.node.item.name,[c.kI.required,c.kI.maxLength(250)]]}),this.store.select(z.rk).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}fillOwnerCategories(t){}createCategory(){const t=(0,N.omit)(this.node.item,["_id"]);t.active=!0,t.icon="document-text",t.name=this.categoryForm.get("name").value,t.userId=this.user._id,this._categoriesService.createCategory(t).subscribe(o=>{this._snackBar.openFromComponent(Ce,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:o.message,title:"Confirmaci\xf3n de creaci\xf3n"}})})}updateCategory(){const t=Object.assign({},this.node.item);t.active=!0,t.name=this.categoryForm.get("name").value,this._categoriesService.updateCategory(t).subscribe(o=>{this._snackBar.openFromComponent(Ce,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:o.message,title:"Confirmaci\xf3n de actualizaci\xf3n"}})})}discardItem(){if("add"===this.mode)this.store.dispatch((0,ee.sT)({category:{_id:"",parentId:this.node.item._id,businessId:this.node.item.businessId,level:this.node.item.level}}));else{const t=Object.assign({},this.node.item);t.mode="none","edit"===this.mode&&this.store.dispatch((0,ee.yr)({category:t}))}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.R),e.Y36(ye.G),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(v.yh),e.Y36(be.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["categories-single-input"]],inputs:{mode:"mode",node:"node"},decls:12,vars:9,consts:[[1,"flex","flex-wrap"],[3,"formGroup","autocomplete"],[1,"fuse-mat-dense","fuse-mat-no-subscript","min-w-64"],["matInput","","require","",3,"formControlName","type","placeholder"],[4,"ngIf"],[1,"flex","ml-5","justify-around","min-w-[70%]","max-w-[75%]","sm:min-w-[20%]","sm:max-w-[20%]"],["mat-button","",3,"ngClass","disabled","click",4,"ngIf"],["mat-button","",3,"click"],[1,"icon-size-5","mr-2",3,"svgIcon"],["mat-button","",3,"ngClass","disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2),e._UZ(3,"input",3),e.YNc(4,ao,2,0,"mat-error",4),e.qZA()(),e.ynx(5),e.TgZ(6,"div",5),e.YNc(7,so,3,5,"button",6),e.YNc(8,co,3,5,"button",6),e.TgZ(9,"button",7),e.NdJ("click",function(){return o.discardItem()}),e._UZ(10,"mat-icon",8),e._uU(11," Descartar "),e.qZA()(),e.BQk(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.categoryForm)("autocomplete","off"),e.xp6(2),e.Q6J("formControlName","name")("type","text")("placeholder","Introduzca el nombre de la categor\xeda"),e.xp6(1),e.Q6J("ngIf",o.categoryForm.get("name").hasError("required")),e.xp6(3),e.Q6J("ngIf","add"===o.mode),e.xp6(1),e.Q6J("ngIf","edit"===o.mode),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:backspace"))},dependencies:[h.mk,h.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,U.lW,F.Hw,f.TO,f.KE,R.Nt],encapsulation:2,changeDetection:0}),i})();const Oe=function(i,s){return{"bg-primary-100":i,"bg-gradient-to-r from-primary-200 to-primary-300":s}},Ye=function(i){return{display:i}};function mo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",20),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("mouseleave",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseOver(r.item._id))}),e.TgZ(1,"button",21),e._UZ(2,"mat-icon",22),e.qZA(),e.TgZ(3,"span",23),e._uU(4),e.qZA(),e.TgZ(5,"div",24)(6,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addNewItem(r))}),e._UZ(7,"mat-icon",22),e.qZA(),e.TgZ(8,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addUpdateItem(r))}),e._UZ(9,"mat-icon",22),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteCategory(r.item))}),e._UZ(11,"mat-icon",22),e.qZA()()()}if(2&i){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.WLB(8,Oe,t.item._id===o.selectedCategoryId,t.item._id===o.overCategoryId)),e.xp6(1),e.uIk("aria-label","Expandir "+t.item.name),e.xp6(1),e.Q6J("svgIcon","assignment"),e.xp6(2),e.Oqu(t.item.name),e.xp6(1),e.Q6J("ngStyle",e.VKq(11,Ye,t.item._id===o.overCategoryId||t.item._id===o.selectedCategoryId?"flex":"none")),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash")}}function po(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",26),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("mouseleave",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseOver(r.item._id))}),e._UZ(1,"categories-single-input",27),e.qZA()}if(2&i){const t=s.$implicit,o=e.oxw();e.xp6(1),e.Q6J("node",o.flatNodeMap.get(t))("mode",t.item.mode)}}function uo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tree-node",28),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("mouseleave",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseEnterLeave(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.mauseOver(r.item._id))})("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.dobleClick(r))}),e.TgZ(1,"button",21),e._UZ(2,"mat-icon",13),e.qZA(),e.TgZ(3,"span",23),e._uU(4),e.qZA(),e.TgZ(5,"div",24)(6,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addNewItem(r))}),e._UZ(7,"mat-icon",22),e.qZA(),e.TgZ(8,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addUpdateItem(r))}),e._UZ(9,"mat-icon",22),e.qZA(),e.TgZ(10,"button",25),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteCategory(r.item))}),e._UZ(11,"mat-icon",22),e.qZA()(),e.TgZ(12,"span",29),e._uU(13),e.qZA()()}if(2&i){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.WLB(9,Oe,t.item._id===o.selectedCategoryId,t.item._id===o.overCategoryId)),e.xp6(1),e.uIk("aria-label","Expandir "+t.item.name),e.xp6(1),e.Q6J("svgIcon",o.treeControl.isExpanded(t)?"folder_open":"folder"),e.xp6(2),e.Oqu(t.item.name),e.xp6(1),e.Q6J("ngStyle",e.VKq(12,Ye,t.item._id===o.overCategoryId||t.item._id===o.selectedCategoryId?"flex":"none")),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:trash"),e.xp6(2),e.Oqu(o.flatNodeMap.get(t).children.length)}}let go=(()=>{class i{constructor(t,o,n,r,a,l){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._categoriesService=r,this.store=a,this._snackBar=l,this.merchants=[],this.merchants$=(0,y.of)([]),this.categoriesNodes=[],this.categoriesNodes$=(0,y.of)([]),this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.oldTreeControl=null,this.newItemName="",this.checklistSelection=new jt.Ov(!0),this.selectedCategoryId="",this.overCategoryId="",this._unsubscribeAll=new T.x,this.getLevel=d=>d.level,this.isExpandable=d=>d.expandable,this.getChildren=d=>d.children,this.hasChild=(d,p)=>p.expandable,this.hasNoContent=(d,p)=>"add"===p.item.mode||"edit"===p.item.mode,this.transformer=(d,p)=>{var g;const _=this.nestedNodeMap.get(d),w=_&&_.item.name===d.item.name?_:new ro.K;return w.item=d.item,w.level=p,w.expandable=!(null===(g=d.children)||void 0===g||!g.length),this.flatNodeMap.set(w,d),this.nestedNodeMap.set(d,w),w},this.treeFlattener=new O.JZ(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new Gt.C2(this.getLevel,this.isExpandable),this.dataSource=new O.kc(this.treeControl,this.treeFlattener)}ngOnInit(){this.merchants$=this.store.select(Kt.UV),this.merchants$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.merchants=t}),this.categoriesNodes$=this.store.select(ve.YK),this.categoriesNodes$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{if(this.oldTreeControl=N.cloneDeep(this.treeControl),this.dataSource.data=t,this.oldTreeControl&&void 0!==this.oldTreeControl.dataNodes)for(const o of this.oldTreeControl.dataNodes)if(this.oldTreeControl.isExpanded(o)){const n=this.treeControl.dataNodes.find(r=>r.item._id===o.item._id);this.treeControl.expand(n)}if(this.selectedParent){const o=this.treeControl.dataNodes.find(n=>n.item._id===this.selectedParent.item._id);"edit"===this.selectedParent.item.mode?this.treeControl.collapse(o):this.treeControl.expand(o)}}),this._categoriesService.getCategoriesByBusiness("000000000000000000000000").subscribe()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}mauseEnterLeave(t){this.selectedCategoryId=t===this.selectedCategoryId?"":t}mauseOver(t){this.overCategoryId=t===this.overCategoryId?"":t}dobleClick(t){this.treeControl.isExpanded(t)?this.treeControl.collapse(t):this.treeControl.expand(t)}descendantsAllSelected(t){const o=this.treeControl.getDescendants(t);return o.length>0&&o.every(r=>this.checklistSelection.isSelected(r))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(r=>this.checklistSelection.isSelected(r))&&!this.descendantsAllSelected(t)}getParentNode(t){const o=this.getLevel(t);if(o<1)return null;for(let r=this.treeControl.dataNodes.indexOf(t)-1;r>=0;r--){const a=this.treeControl.dataNodes[r];if(this.getLevel(a)<o)return a}return null}getRootParentsNode(t){if(!t||void 0===t)return null;const o=this.treeControl.dataNodes.find(n=>n.item._id===t.item.parentId);return o&&void 0!==o?this.getRootParentsNode(o):t}addNewItem(t){const o=this.flatNodeMap.get(t),n=(0,N.cloneDeep)(t);n.item.mode="add",this.selectedParent=n,this.store.dispatch((0,ee.BD)({category:{_id:"",mode:"add",parentId:o.item._id,businessId:o.item.businessId,level:o.item.level+1}}))}addUpdateItem(t){const o=this.flatNodeMap.get(t),n=(0,N.cloneDeep)(t);n.item.mode="edit",this.selectedParent=n;const r=n.item;r.mode="edit",this.store.dispatch((0,ee.sT)({category:{_id:"",parentId:o.item._id,businessId:o.item.businessId,level:r.level+1}})),this.store.dispatch((0,ee.yr)({category:r}))}saveNode(t,o,n){const r=this.flatNodeMap.get(t);r.item.name=o,r.item.isGroup=n;const a=(0,N.omit)(r.item,["_id"]);this._categoriesService.createCategory(a).subscribe(l=>{this.treeControl.expand(this.selectedParent)})}openDialog(){this._dialog.open(no,{data:{account:null},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(o=>{let n;if(o.category){for(const r of this.flatNodeMap.keys())r.item._id===o.category.parentId&&(n=r);this.treeControl.expand(n)}})}deleteCategory(t){this._fuseConfirmationService.open({title:"Eliminar categor\xeda",message:`\xbfEst\xe1 seguro que desea eliminar el categor\xeda ${t.name}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._categoriesService.deleteCategory(t._id).subscribe(r=>{!r||(this._snackBar.openFromComponent(Ce,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:`Categor\xeda ${t.name} eliminada correctamente`,title:"Confirmaci\xf3n de eliminaci\xf3n"}}),this._changeDetectorRef.markForCheck())},r=>{console.warn(r)})}),this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(ye.G),e.Y36(v.yh),e.Y36(be.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-categories"]],decls:28,vars:7,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"bg-gradient-to-r","from-primary-500","to-primary-600","text-white",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1","text-white","hidden","sm:block"],[1,"flex","flex-auto","overflow-auto","p-10"],[1,"w-full",3,"dataSource","treeControl"],["class","flex flex-wrap","matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"mouseenter","mouseleave","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["class","relative flex flex-wrap","matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","flex-wrap",3,"ngClass","mouseenter","mouseleave","click"],["mat-icon-button","","matTreeNodeToggle","","color","primary"],[1,"icon-size-5",3,"svgIcon"],[1,"whitespace-nowrap","cursor-default"],[1,"tree-actions",3,"ngStyle"],["mat-icon-button","",3,"click"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",3,"mouseenter","mouseleave","click"],[1,"w-full",3,"node","mode"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"relative","flex","flex-wrap",3,"ngClass","mouseenter","mouseleave","click"],[1,"absolute","right-5"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Inventario"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Categor\xedas"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Categor\xedas "),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){return o.openDialog()}),e._UZ(20,"mat-icon",13),e.TgZ(21,"span",14),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",15)(24,"mat-tree",16),e.YNc(25,mo,12,13,"mat-tree-node",17),e.YNc(26,po,2,2,"mat-tree-node",18),e.YNc(27,uo,14,14,"mat-tree-node",19),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(4),e.Q6J("dataSource",o.dataSource)("treeControl",o.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",o.hasNoContent),e.xp6(1),e.Q6J("matTreeNodeDefWhen",o.hasChild))},dependencies:[C.yS,h.mk,h.PC,U.lW,F.Hw,O.fQ,O.ah,O.eu,O.gi,O.uo,lo],encapsulation:2}),i})(),ho=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["ath-stock"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[C.lC],encapsulation:2}),i})();var _o=m(2451),fo=m(7238);let xo=(()=>{class i{constructor(t){this.store=t,this.stats$=null,this.stats=null,this._unsubscribeAll=new T.x}ngOnInit(){this.stats$=this.store.select(_o.q),this.stats$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.stats=t})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-panel"]],decls:163,vars:9,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","p-6","mx-auto","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","leading-8","tracking-tight"],[1,"font-medium","tracking-tight","text-secondary"],[1,"grid","w-full","grid-cols-1","gap-8","mt-6","sm:grid-cols-2","lg:grid-cols-4","md:mt-8"],[1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","leading-6","tracking-tight","truncate"],[1,"ml-2"],[1,"h-6","px-2","bg-yellow-100","rounded-lg","min-h-6"],[1,"font-mono","text-lg","font-medium","text-yellow-900"],["routerLink","/modules/stock/panels/categories",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],["routerLink","/modules/stock/panels/products",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],["routerLink","/modules/stock/panels/suppliers",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],["routerLink","/modules/stock/panels/brands",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],["routerLink","/modules/selling/panels/orders",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"w-full","mt-12"],[1,"text-2xl","font-semibold","leading-6","tracking-tight"],[1,"flex","flex-col","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],[1,"flex","items-start","justify-start"],[1,"mr-3",3,"svgIcon"],[1,"flex","flex-col","mt-5"],["routerLink","/modules/stock/panels/products",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],[1,"flex","items-center","justify-center","w-6","h-6","mr-3","rounded-lg","bg-primary-100"],[1,"w-1","h-1","rounded-full","bg-primary-500"],[1,"text-lg","leading-6","tracking-tight"],["routerLink","/modules/stock/panels/categories",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["matTooltip","En desarrollo",1,"flex","items-center","justify-start","p-1.5","cursor-not-allowed","rounded-lg","hover:bg-hover"],[1,"flex","items-center","justify-center","w-6","h-6","mr-3","rounded-lg","bg-slate-100"],[1,"w-1","h-1","rounded-full","bg-slate-900"],["routerLink","/modules/selling/panels/orders",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],[1,"w-1","h-1","rounded-full","bg-primary-900"],["matTooltip","En desarrollo",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/modules/stock/panels/warehouse",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/modules/stock/panels/suppliers",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/modules/stock/panels/brands",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/modules/stock/panels/uom",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Gesti\xf3n de Inventarios"),e.qZA(),e.TgZ(6,"div",4),e._uU(7," Este m\xf3dulo est\xe1 dedicado a todos los componentes de la gesti\xf3n de inventarios y productos. "),e.qZA()()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8),e._uU(12,"Almacenes"),e.qZA(),e.TgZ(13,"div",9)(14,"div",10)(15,"span",11),e._uU(16,"0"),e.qZA()()()()(),e.TgZ(17,"div",12)(18,"div",7)(19,"div",8),e._uU(20,"Categor\xedas"),e.qZA(),e.TgZ(21,"div",9)(22,"div",10)(23,"span",11),e._uU(24),e.qZA()()()()(),e.TgZ(25,"div",13)(26,"div",7)(27,"div",8),e._uU(28,"Productos"),e.qZA(),e.TgZ(29,"div",9)(30,"div",10)(31,"span",11),e._uU(32),e.qZA()()()()(),e.TgZ(33,"div",14)(34,"div",7)(35,"div",8),e._uU(36,"Proveedores"),e.qZA(),e.TgZ(37,"div",9)(38,"div",10)(39,"span",11),e._uU(40),e.qZA()()()()(),e.TgZ(41,"div",15)(42,"div",7)(43,"div",8),e._uU(44,"Marcas"),e.qZA(),e.TgZ(45,"div",9)(46,"div",10)(47,"span",11),e._uU(48),e.qZA()()()()(),e.TgZ(49,"div",16)(50,"div",7)(51,"div",8),e._uU(52,"\xd3rdenes"),e.qZA(),e.TgZ(53,"div",9)(54,"div",10)(55,"span",11),e._uU(56),e.qZA()()()()(),e.TgZ(57,"div",6)(58,"div",7)(59,"div",8),e._uU(60,"Entradas"),e.qZA()()(),e.TgZ(61,"div",6)(62,"div",7)(63,"div",8),e._uU(64,"Despachos"),e.qZA()()()(),e.TgZ(65,"div",17)(66,"div",18),e._uU(67,"Reportes y Listados"),e.qZA()(),e.TgZ(68,"div",5)(69,"div",19)(70,"div",20),e._UZ(71,"mat-icon",21),e.TgZ(72,"div",8),e._uU(73,"Productos y Precios"),e.qZA()(),e.TgZ(74,"div",22)(75,"div",23)(76,"div",24),e._UZ(77,"div",25),e.qZA(),e.TgZ(78,"div",26),e._uU(79,"Productos"),e.qZA()(),e.TgZ(80,"div",27)(81,"div",24),e._UZ(82,"div",25),e.qZA(),e.TgZ(83,"div",26),e._uU(84,"Categor\xedas de productos"),e.qZA()(),e.TgZ(85,"div",28)(86,"div",29),e._UZ(87,"div",30),e.qZA(),e.TgZ(88,"div",26),e._uU(89,"Arancel aduanero"),e.qZA()()()(),e.TgZ(90,"div",19)(91,"div",20),e._UZ(92,"mat-icon",21),e.TgZ(93,"div",8),e._uU(94,"Movimiento de inventarios"),e.qZA()(),e.TgZ(95,"div",22)(96,"div",31)(97,"div",24),e._UZ(98,"div",32),e.qZA(),e.TgZ(99,"div",26),e._uU(100,"\xd3rdenes"),e.qZA()(),e.TgZ(101,"div",28)(102,"div",29),e._UZ(103,"div",30),e.qZA(),e.TgZ(104,"div",26),e._uU(105,"Facturas de Compras"),e.qZA()(),e.TgZ(106,"div",28)(107,"div",29),e._UZ(108,"div",30),e.qZA(),e.TgZ(109,"div",26),e._uU(110,"Entrada de productos"),e.qZA()(),e.TgZ(111,"div",28)(112,"div",29),e._UZ(113,"div",30),e.qZA(),e.TgZ(114,"div",26),e._uU(115,"Registro de despachos"),e.qZA()()()(),e.TgZ(116,"div",19)(117,"div",20),e._UZ(118,"mat-icon",21),e.TgZ(119,"div",8),e._uU(120,"Informes de existencias"),e.qZA()(),e.TgZ(121,"div",22)(122,"div",33)(123,"div",29),e._UZ(124,"div",30),e.qZA(),e.TgZ(125,"div",26),e._uU(126,"Registro de operaciones"),e.qZA()(),e.TgZ(127,"div",28)(128,"div",29),e._UZ(129,"div",30),e.qZA(),e.TgZ(130,"div",26),e._uU(131,"Balance de inventarios"),e.qZA()(),e.TgZ(132,"div",28)(133,"div",29),e._UZ(134,"div",30),e.qZA(),e.TgZ(135,"div",26),e._uU(136,"Productos envejecidos"),e.qZA()()()(),e.TgZ(137,"div",19)(138,"div",20),e._UZ(139,"mat-icon",21),e.TgZ(140,"div",8),e._uU(141,"Nomencladores"),e.qZA()(),e.TgZ(142,"div",22)(143,"div",34)(144,"div",24),e._UZ(145,"div",25),e.qZA(),e.TgZ(146,"div",26),e._uU(147,"Almacenes"),e.qZA()(),e.TgZ(148,"div",35)(149,"div",24),e._UZ(150,"div",25),e.qZA(),e.TgZ(151,"div",26),e._uU(152,"Proveedores"),e.qZA()(),e.TgZ(153,"div",36)(154,"div",24),e._UZ(155,"div",25),e.qZA(),e.TgZ(156,"div",26),e._uU(157,"Marcas"),e.qZA()(),e.TgZ(158,"div",37)(159,"div",24),e._UZ(160,"div",25),e.qZA(),e.TgZ(161,"div",26),e._uU(162,"Unidades de medida"),e.qZA()()()()()()()),2&t&&(e.xp6(24),e.Oqu(o.stats.entitiesLength.categoriesQty),e.xp6(8),e.Oqu(o.stats.entitiesLength.productsQty),e.xp6(8),e.Oqu(o.stats.entitiesLength.suppliersQty),e.xp6(8),e.Oqu(o.stats.entitiesLength.brandsQty),e.xp6(8),e.Oqu(o.stats.entitiesLength.ordersQty),e.xp6(15),e.Q6J("svgIcon","heroicons_outline:document-text"),e.xp6(21),e.Q6J("svgIcon","heroicons_outline:document-text"),e.xp6(26),e.Q6J("svgIcon","heroicons_outline:document-text"),e.xp6(21),e.Q6J("svgIcon","heroicons_outline:document-text"))},dependencies:[C.rH,F.Hw,fo.gM],encapsulation:2}),i})();const Pe=i=>i.uoms,H=((0,v.P1)(Pe,i=>i.uom),(0,v.P1)(Pe,i=>i.uoms)),vo={_id:null,user:null,active:!0,category:"",name:"",description:"",guaranty:"",tags:[],sku:"",barcode:"",brand:"",supplier:"",uom:"",currency:"",stock:0,onSale:0,cost:0,discount:0,taxPercent:0,price:0,weight:0,thumbnail:"",images:[],cumRatePoints:0,rates:0,comments:[],salesQty:0};var bo=m(1135),Co=m(9300),yo=m(5840),te=m(4967);const He=i=>i.products,oe=((0,v.P1)(He,i=>i.product),(0,v.P1)(He,i=>i.products)),D=ue.N.API_URL;let ke=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o,this._tags=new bo.X(null)}get tags$(){return this._tags.asObservable()}getProducts(t=0,o=10,n="name",r="asc",a=""){console.log("Hello");const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return console.log("Params:",l),this._httpClient.get(`${D}/products/`,{params:l}).pipe((0,I.b)(({pagination:d,products:p})=>{this.store.dispatch((0,pe.Jr)({pagination:d})),this.store.dispatch((0,te.RU)({products:p}))}))}getProductById(t){return this._httpClient.get(`${D}/products/find-by-id/${t}`).pipe((0,me.j)("product"),(0,I.b)(o=>{this.store.dispatch((0,te.Gr)({product:o}))}))}createProduct(t){return this.store.select(oe).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${D}/products/`,t).pipe((0,I.b)(n=>{this.store.dispatch((0,te.RU)({products:[n.product,...o]}))}))))}updateProduct(t){return this.store.select(oe).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${D}/products/${t._id}`,t).pipe((0,b.U)(n=>{const r=(0,yo.Z)(o);return r[o.findIndex(l=>l._id===t._id)]=n.updatedProduct,this.store.dispatch((0,te.RU)({products:r})),n}))))}deleteProduct(t){return this.store.select(oe).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${D}/products/${t}`).pipe((0,b.U)(n=>{const r=[...o],a=r.findIndex(l=>l._id===t);return r.splice(a,1),this.store.dispatch((0,te.RU)({products:r})),n}))))}getTags(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${D}/tags`,{params:l}).pipe((0,I.b)(({tags:d})=>{this._tags.next(d)}))}createTag(t){return this.tags$.pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${D}/tags`,t).pipe((0,b.U)(n=>(this._tags.next([...o,n.tag]),n.tag)))))}updateTag(t){return this.tags$.pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${D}/tags/${t._id}`,t).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t._id);return o[r]=n.tag,this._tags.next(o),n.tag}))))}deleteTag(t){return this.tags$.pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${D}/tags/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this._tags.next(o),n}),(0,Co.h)(n=>n),(0,x.w)(n=>this.store.select(oe).pipe((0,k.q)(1),(0,b.U)(r=>(r.forEach(a=>{const l=a.tags.findIndex(d=>d===t);l>-1&&a.tags.splice(l,1)}),n)))))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ko=m(7446),Ie=m(4107);function Zo(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",65),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createProduct())}),e._UZ(2,"mat-icon",66),e.TgZ(3,"span",67),e._uU(4,"Guardar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:save"))}function wo(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",65),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.updateProduct())}),e._UZ(2,"mat-icon",66),e.TgZ(3,"span",67),e._uU(4,"Actualizar"),e.qZA()(),e.BQk()}2&i&&(e.xp6(2),e.Q6J("svgIcon","heroicons_outline:refresh"))}function Ao(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",68),e._uU(2),e.qZA(),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function To(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",68),e._uU(2),e.qZA(),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.name," ")}}function Io(i,s){1&i&&e._UZ(0,"mat-icon",31),2&i&&e.Q6J("svgIcon","heroicons_solid:pencil-alt")}function So(i,s){1&i&&e._UZ(0,"mat-icon",31),2&i&&e.Q6J("svgIcon","heroicons_solid:check")}function Mo(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-checkbox",70),e.NdJ("change",function(n){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.toggleProductTag(a,n))}),e._uU(2),e.qZA(),e.BQk()}if(2&i){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("checked",o.selectedProduct.tags.includes(t._id)),e.xp6(1),e.hij(" ",t.name," ")}}function Uo(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Mo,3,3,"ng-container",69),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function qo(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",72)(2,"input",73),e.NdJ("input",function(n){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.updateTagName(a,n))}),e.qZA(),e.TgZ(3,"button",74),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.deleteTag(r))}),e._UZ(4,"mat-icon",31),e.qZA()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(2),e.Q6J("value",t.name),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Qo(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",71),e.YNc(2,qo,5,2,"ng-container",69),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.filteredTags)("ngForTrackBy",t.trackByFn)}}function Ro(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",75),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(),r=e.MAs(64);return n.createTag(r.value),e.KtG(r.value="")}),e._UZ(1,"mat-icon",76),e.TgZ(2,"div",77),e._uU(3,'Crear "'),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._uU(6,'"'),e.qZA()()}if(2&i){e.oxw();const t=e.MAs(64);e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Oqu(t.value)}}function Fo(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",68),e._uU(2),e.qZA(),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.hij(" ",t.abbr," ")}}function Jo(i,s){if(1&i&&e._UZ(0,"img",78),2&i){const t=e.oxw();e.Q6J("alt","Product thumbnail image")("src",t.thumbnail,e.LSH)}}function No(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",79),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeFile(n.thumbnail,"thumbnail"))}),e._UZ(1,"mat-icon",80),e.qZA()}}function Do(i,s){1&i&&(e.TgZ(0,"div",81),e._uU(1," SIN IMAGEN "),e.qZA())}function Bo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"input",60,61),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.selectFiles(n,"thumbnail"))}),e.qZA(),e.TgZ(3,"label",62)(4,"div",63),e._UZ(5,"mat-icon",31),e.TgZ(6,"span",64),e._uU(7," Agregar imagen principal "),e.qZA()()()()}2&i&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:plus-circle"))}function zo(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",53)(2,"div",54),e._UZ(3,"img",78),e.TgZ(4,"button",79),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.removeFile(r,"images"))}),e._UZ(5,"mat-icon",80),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(3),e.Q6J("alt","Product images")("src",t,e.LSH)}}const Eo=function(){return{height:"470px"}};let Lo=(()=>{class i{constructor(t,o,n,r,a,l,d,p){this._activatedRoute=t,this._changeDetectorRef=o,this._formBuilder=n,this._fuseConfirmationService=r,this._imagesService=a,this._productsService=l,this._router=d,this.store=p,this.categories=[],this.editMode=!1,this.flashMessage=null,this.images=[],this.isLoading=!1,this.productId=null,this.products$=(0,y.of)([]),this.searchInputControl=new c.p4,this.selectedProduct=vo,this.tagsEditMode=!1,this.uoms=[],this.uoms$=(0,y.of)(null),this.user=null,this.user$=(0,y.of)(null),this.descriptionLength=0,this.thumbnail="",this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this._unsubscribeAll=new T.x}ngOnInit(){this._activatedRoute.params.pipe((0,u.R)(this._unsubscribeAll)).subscribe(({productId:t})=>{this.productId=t,"new"!==this.productId&&(this.editMode=!0,this._productsService.getProductById(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(o=>{this.selectedProduct=o,this.productForm.patchValue(this.selectedProduct),this.productForm.get("category").patchValue(this.selectedProduct.category._id),this.productForm.get("brand").patchValue(this.selectedProduct.brand._id),this.productForm.get("supplier").patchValue(this.selectedProduct.supplier._id),o.thumbnail&&(this.thumbnail=o.thumbnail),this.images=this.selectedProduct.images})),this._changeDetectorRef.markForCheck()}),this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.uoms$=this.store.select(H),this.uoms$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.uoms=t,this._changeDetectorRef.markForCheck()}),this.store.select(Y).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this.store.select(ve.us).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this._productsService.tags$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()}),this.productForm=this._formBuilder.group({_id:[""],user:[this.user._id,[c.kI.required]],category:["",[c.kI.required]],name:["",[c.kI.required,c.kI.maxLength(255)]],description:["",[c.kI.maxLength(1e4)]],specifications:["",[c.kI.maxLength(1e6)]],tags:[[""]],sku:["",[c.kI.maxLength(50)]],barcode:["",[c.kI.maxLength(50)]],brand:["",[c.kI.required]],supplier:["",[c.kI.required]],uom:["",[c.kI.required]],currency:[{disabled:!0,value:"usd"},[c.kI.required]],stock:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],onSale:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],cost:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9),c.kI.pattern("[0-9.]+(.[0-9]{2})?")]],basePrice:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9),c.kI.pattern("[0-9.]+(.[0-9]{2})?")]],taxPercent:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],price:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9),c.kI.pattern("[0-9.]+(.[0-9]{2})?")]],weight:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],volume:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],size:["",[c.kI.maxLength(9)]],thumbnail:[""],images:[[]],currentImageIndex:[0],active:[!0,[c.kI.required]]},{validators:this._checkOnSaleQty("stock","onSale")}),this.productForm.get("thumbnail").valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>this.thumbnail=t),this.productForm.get("images").valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>this.images=t),this.productForm.get("description").valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>this.descriptionLength=t.length)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}cycleImages(t=!0){const o=this.productForm.get("images").value.length,n=this.productForm.get("currentImageIndex").value,r=n+1===o?0:n+1,a=n-1<0?o-1:n-1;t?this.productForm.get("currentImageIndex").setValue(r):this.productForm.get("currentImageIndex").setValue(a)}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(t){const o=t.target.value.toLowerCase();this.filteredTags=this.tags.filter(n=>n.name.toLowerCase().includes(o))}filterTagsInputKeyDown(t){if("Enter"!==t.key)return;if(0===this.filteredTags.length)return this.createTag(t.target.value),void(t.target.value="");const o=this.filteredTags[0];this.selectedProduct.tags.find(r=>r===o._id)?this.removeTagFromProduct(o):this.addTagToProduct(o)}createTag(t){this._productsService.createTag({active:!0,user:this.user._id,name:t}).subscribe(n=>{this.addTagToProduct(n)})}updateTagName(t,o){t.name=o.target.value,this._productsService.updateTag(t).pipe((0,P.b)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(t){this._productsService.deleteTag(t._id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(t){const o=(0,N.cloneDeep)(this.selectedProduct);o.tags.unshift(t._id),this.productForm.get("tags").patchValue(o.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(t){const o=this.productForm.getRawValue();o.tags.splice(o.tags.findIndex(n=>n===t._id),1),this.productForm.get("tags").patchValue(o.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(t,o){o.checked?this.addTagToProduct(t):this.removeTagFromProduct(t)}shouldShowCreateTagButton(t){return!(""===t||this.tags.findIndex(o=>o.name.toLowerCase()===t.toLowerCase())>-1)}createProduct(){let t=this.productForm.getRawValue();t=(0,N.omit)(t,["_id","currentImageIndex"]),this._fuseConfirmationService.open({title:"Crear Producto",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._productsService.createProduct(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._router.navigateByUrl("/modules/stock/panels/products"),this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateProduct(){let t=this.productForm.getRawValue();t=(0,N.omit)(t,["currentImageIndex"]),this._fuseConfirmationService.open({title:"Actualizar Producto",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._productsService.updateProduct(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._router.navigateByUrl("/modules/stock/panels/products"),this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}selectFiles(t,o){if(0!==t.target.files.length){this.selectedFiles=t.target.files;for(const n of t.target.files)this._uploadFile(n,o)}}removeFile(t,o){void 0!==t&&this._imagesService.removeImage(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{if("thumbnail"===o&&this.productForm.get("thumbnail").reset(),"images"===o){const n=[...this.productForm.get("images").value],r=n.findIndex(a=>a===t);n.splice(r,1),this.productForm.get("images").setValue(n)}this._productsService.updateProduct(this.productForm.getRawValue()).subscribe(n=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Imagen eliminada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:n.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:"No se han podido eliminar la imagen del servidor,\n                        int\xe9ntelo nuevamente si el error persistes contacte con el personal de soporte.",icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})}_uploadFile(t,o){this._imagesService.uploadImage("products",t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(n=>{if("thumbnail"===o&&this.productForm.get("thumbnail").setValue(n.imageUrl),"images"===o){const r=[...this.productForm.get("images").value,n.imageUrl];this.productForm.get("images").setValue(r)}this.editMode&&this._productsService.updateProduct(this.productForm.getRawValue()).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Imagen guardada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()},n=>{this._fuseConfirmationService.open({title:`${n.statusText}: ${n.status}`,message:"No se han podido guardar la im\xe1genes en el servidor,\n                            int\xe9ntelo nuevamente si el error persistes contacte con el personal de soporte.",icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})}_checkOnSaleQty(t,o){return n=>{const r=n.get(t),a=n.get(o);if(!r||!a||(a.hasError("invalid")&&(delete a.errors.invalid,a.updateValueAndValidity()),r.value<=a.value))return null;const l={invalid:"La cantidad en venta no debe ser mayor a la disponible"};return a.setErrors(l),l}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.gz),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(Be.C),e.Y36(ke),e.Y36(C.F0),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-product-detail"]],decls:192,vars:49,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"z-20","flex","flex-col","p-6","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],["routerLink","/modules/stock/panels/products",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[4,"ngIf"],["cdkScrollable","",1,"flex","flex-auto","overflow-y-auto"],[1,"flex","flex-col","w-full","divide-y","divide-dashed",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","p-10"],[1,"flex","flex-col"],[1,"text-xl","font-semibold"],[1,"flex","flex-col","sm:flex-row","gap-5","mt-5","p-6","border","shadow-md","bg-card","rounded-2xl"],[1,"flex","flex-col","w-full"],[1,"w-full"],["matInput","","type","text","maxlength","250","required","",3,"formControlName"],["matInput","","matTextareaAutosize","","maxlength","10000","rows","19",3,"formControlName"],[1,"text-right"],[3,"formControlName"],[4,"ngFor","ngForOf"],[1,"mb-px","font-medium","leading-tight"],[1,"mt-1.5","rounded-md","border","border-gray-300","dark:border-gray-500","shadow-sm","overflow-hidden"],[1,"flex","items-center","px-3","py-2","-my-px"],[1,"flex","items-center","flex-auto","min-w-0"],[1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Buscar",1,"min-w-0","py-1","ml-2","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"w-8","h-8","ml-3","min-h-8",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"overflow-y-auto","leading-none","border-t","border-gray-300","h-44","dark:border-gray-500"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer border-t hover:bg-gray-50 dark:hover:bg-hover","matRipple","",3,"click",4,"ngIf"],[1,"w-full","mt-5","p-6","border","shadow-md","bg-card","rounded-2xl"],[1,"h-full",3,"formControlName","styles","modules"],[1,"grid","grid-cols-1","p-10","md:grid-cols-2"],[1,"flex","flex-col","w-full","p-6","border","shadow-md","bg-card","rounded-2xl"],["value","usd"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName"],["matSuffix",""],["type","number","matInput","","min","0","max","999999999","maxlength","9","required","",3,"formControlName"],["matInput","","type","number","min","0","max","999999999","maxlength","50",3,"formControlName"],["matInput","","type","text","maxlength","50",3,"formControlName"],["matInput","","type","number","min","0","max","999999999","maxlength","9",3,"formControlName"],["matInput","","type","number","maxlength","9",3,"formControlName"],[1,"flex","flex-col","w-full","p-6","border","divide-y","shadow-md","bg-card","rounded-2xl","gap-y-6"],[1,"font-medium"],[1,"flex","items-center","mt-3"],[1,"relative","flex","items-center","justify-center","mr-6","overflow-hidden","border","rounded","w-26","h-26","flex-0"],[3,"alt","src",4,"ngIf"],["mat-mini-fab","","class","absolute p-5 transition-opacity ease-linear delay-200 rounded-full opacity-50 bg-primary-700 hover:opacity-100",3,"click",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"flex","flex-col","pt-6"],[1,"flex","flex-row","flex-wrap"],["id","image-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["imageFileInput",""],["for","image-file-input","matRipple",""],[1,"inline-flex","items-center","px-4","py-2","mt-2","-ml-4","rounded","cursor-pointer","group"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[3,"value"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","h-10","px-4","min-h-10",3,"color","checked","change"],[1,"p-4","space-y-2"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","border-t","hover:bg-gray-50","dark:hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[3,"alt","src"],["mat-mini-fab","",1,"absolute","p-5","transition-opacity","ease-linear","delay-200","rounded-full","opacity-50","bg-primary-700","hover:opacity-100",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white","icon-size-5"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Inventario"),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"mat-icon",6),e.TgZ(14,"a",8),e._uU(15,"Productos"),e.qZA()(),e.TgZ(16,"div",5),e._UZ(17,"mat-icon",6),e.TgZ(18,"a",9),e._uU(19),e.qZA()()()(),e.TgZ(20,"div",10)(21,"h2",11),e._uU(22),e.qZA()()(),e.TgZ(23,"div",12),e.YNc(24,Zo,5,1,"ng-container",13),e.YNc(25,wo,5,1,"ng-container",13),e.qZA()(),e.TgZ(26,"div",14)(27,"form",15)(28,"div",16)(29,"div",17)(30,"span",18),e._uU(31,"Descripci\xf3n"),e.qZA(),e.TgZ(32,"span"),e._uU(33,"Ingrese la informaci\xf3n necesaria para describir e identificar el producto"),e.qZA()(),e.TgZ(34,"div",19)(35,"div",20)(36,"mat-form-field",21)(37,"mat-label"),e._uU(38,"Nombre"),e.qZA(),e._UZ(39,"input",22),e.qZA(),e.TgZ(40,"mat-form-field",21)(41,"mat-label"),e._uU(42,"Descripci\xf3n"),e.qZA(),e._UZ(43,"textarea",23),e.TgZ(44,"mat-hint",24),e._uU(45),e.qZA()()(),e.TgZ(46,"div",20)(47,"mat-form-field",21)(48,"mat-label"),e._uU(49,"Categor\xeda"),e.qZA(),e.TgZ(50,"mat-select",25),e.YNc(51,Ao,3,2,"ng-container",26),e.qZA()(),e.TgZ(52,"mat-form-field",21)(53,"mat-label"),e._uU(54,"Marca"),e.qZA(),e.TgZ(55,"mat-select",25),e.YNc(56,To,3,2,"ng-container",26),e.qZA()(),e.TgZ(57,"span",27),e._uU(58,"Etiquetas"),e.qZA(),e.TgZ(59,"div",28)(60,"div",29)(61,"div",30),e._UZ(62,"mat-icon",31),e.TgZ(63,"input",32,33),e.NdJ("input",function(r){return o.filterTags(r)})("keydown",function(r){return o.filterTagsInputKeyDown(r)}),e.qZA()(),e.TgZ(65,"button",34),e.NdJ("click",function(){return o.toggleTagsEditMode()}),e.YNc(66,Io,1,1,"mat-icon",35),e.YNc(67,So,1,1,"mat-icon",35),e.qZA()(),e.TgZ(68,"div",36),e.YNc(69,Uo,2,2,"ng-container",13),e.YNc(70,Qo,3,2,"ng-container",13),e.YNc(71,Ro,7,2,"div",37),e.qZA()()()()(),e.TgZ(72,"div",16)(73,"div",17)(74,"span",18),e._uU(75,"Especificaciones"),e.qZA(),e.TgZ(76,"span"),e._uU(77," Ingrese la informaci\xf3n detallada que le permita conocer al cliente las bondades el producto o sus m\xe9todos de empleo. "),e.qZA()(),e.TgZ(78,"div",38),e._UZ(79,"quill-editor",39),e.qZA()(),e.TgZ(80,"div",40)(81,"div",17)(82,"span",18),e._uU(83,"Valores"),e.qZA(),e.TgZ(84,"span"),e._uU(85,"Ingrese los precios, costes e impuestos del producto"),e.qZA()(),e.TgZ(86,"div",41)(87,"mat-form-field",21)(88,"mat-label"),e._uU(89,"Moneda"),e.qZA(),e.TgZ(90,"mat-select",25)(91,"mat-option",42),e._uU(92,"USD"),e.qZA()()(),e.TgZ(93,"mat-form-field",21)(94,"mat-label"),e._uU(95,"Costo"),e.qZA(),e.TgZ(96,"span",43),e._uU(97,"$"),e.qZA(),e._UZ(98,"input",44),e.qZA(),e.TgZ(99,"mat-form-field",21)(100,"mat-label"),e._uU(101,"Precio Base"),e.qZA(),e.TgZ(102,"span",43),e._uU(103,"$"),e.qZA(),e._UZ(104,"input",44),e.qZA(),e.TgZ(105,"mat-form-field",21)(106,"mat-label"),e._uU(107,"Impuesto"),e.qZA(),e.TgZ(108,"span",45),e._uU(109,"%"),e.qZA(),e._UZ(110,"input",46),e.qZA(),e.TgZ(111,"mat-form-field",21)(112,"mat-label"),e._uU(113,"Precio"),e.qZA(),e.TgZ(114,"span",45),e._uU(115,"$"),e.qZA(),e._UZ(116,"input",44),e.qZA()()(),e.TgZ(117,"div",40)(118,"div",17)(119,"span",18),e._uU(120,"Informaci\xf3n log\xedstica"),e.qZA(),e.TgZ(121,"span"),e._uU(122,"Ingrese los relacionados con la tipolog\xeda del producto"),e.qZA()(),e.TgZ(123,"div",41)(124,"mat-form-field",21)(125,"mat-label"),e._uU(126,"Unidad de Medida"),e.qZA(),e.TgZ(127,"mat-select",25),e.YNc(128,Fo,3,2,"ng-container",26),e.qZA()(),e.TgZ(129,"mat-form-field",21)(130,"mat-label"),e._uU(131,"Cantidad"),e.qZA(),e._UZ(132,"input",47),e.qZA(),e.TgZ(133,"mat-form-field",21)(134,"mat-label"),e._uU(135,"En Venta"),e.qZA(),e._UZ(136,"input",47),e.qZA(),e.TgZ(137,"mat-form-field",21)(138,"mat-label"),e._uU(139,"SKU"),e.qZA(),e._UZ(140,"input",48),e.qZA(),e.TgZ(141,"mat-form-field",21)(142,"mat-label"),e._uU(143,"C\xf3digo de Barra"),e.qZA(),e._UZ(144,"input",48),e.qZA(),e.TgZ(145,"mat-form-field",21)(146,"mat-label"),e._uU(147,"Peso"),e.qZA(),e.TgZ(148,"span",45),e._uU(149,"g"),e.qZA(),e._UZ(150,"input",44),e.qZA(),e.TgZ(151,"mat-form-field",21)(152,"mat-label"),e._uU(153,"Volumen"),e.qZA(),e.TgZ(154,"span",45),e._uU(155,"cm3"),e.qZA(),e._UZ(156,"input",49),e.qZA(),e.TgZ(157,"mat-form-field",21)(158,"mat-label"),e._uU(159,"Dimensiones"),e.qZA(),e.TgZ(160,"span",45),e._uU(161,"A-L-H"),e.qZA(),e._UZ(162,"input",50),e.qZA()()(),e.TgZ(163,"div",40)(164,"div",17)(165,"span",18),e._uU(166,"Im\xe1genes"),e.qZA(),e.TgZ(167,"span"),e._uU(168,"Inserte las im\xe1genes que del producto"),e.qZA()(),e.TgZ(169,"div",51)(170,"div",17)(171,"span",52),e._uU(172,"Imagen Principal"),e.qZA(),e.TgZ(173,"div",53)(174,"div",54),e.YNc(175,Jo,1,2,"img",55),e.YNc(176,No,2,0,"button",56),e.YNc(177,Do,2,0,"div",57),e.qZA()(),e.YNc(178,Bo,8,3,"div",13),e.qZA(),e.TgZ(179,"div",58)(180,"span",52),e._uU(181,"Im\xe1genes de Apoyo"),e.qZA(),e.TgZ(182,"div",59),e.YNc(183,zo,6,2,"ng-container",26),e.qZA(),e.TgZ(184,"div")(185,"input",60,61),e.NdJ("change",function(r){return o.selectFiles(r,"images")}),e.qZA(),e.TgZ(187,"label",62)(188,"div",63),e._UZ(189,"mat-icon",31),e.TgZ(190,"span",64),e._uU(191," Agregar im\xe1genes "),e.qZA()()()()()()()()()()),2&t){const n=e.MAs(64);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Oqu("new"===o.productId?"Nuevo":o.selectedProduct.name),e.xp6(3),e.hij(" ","new"===o.productId?"Nuevo":o.selectedProduct.name," "),e.xp6(2),e.Q6J("ngIf",!o.editMode),e.xp6(1),e.Q6J("ngIf",o.editMode),e.xp6(2),e.Q6J("formGroup",o.productForm)("autocomplete","off"),e.xp6(12),e.Q6J("formControlName","name"),e.xp6(4),e.Q6J("formControlName","description"),e.xp6(2),e.hij("Total de caracteres ",o.descriptionLength," / 10000"),e.xp6(5),e.Q6J("formControlName","category"),e.xp6(1),e.Q6J("ngForOf",o.categories),e.xp6(4),e.Q6J("formControlName","brand"),e.xp6(1),e.Q6J("ngForOf",o.brands),e.xp6(6),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("maxLength",50),e.xp6(3),e.Q6J("ngIf",!o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.tagsEditMode),e.xp6(2),e.Q6J("ngIf",!o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.tagsEditMode),e.xp6(1),e.Q6J("ngIf",o.shouldShowCreateTagButton(n.value)),e.xp6(8),e.Q6J("formControlName","specifications")("styles",e.DdM(48,Eo))("modules",o.quillModules),e.xp6(11),e.Q6J("formControlName","currency"),e.xp6(8),e.Q6J("formControlName","cost"),e.xp6(6),e.Q6J("formControlName","basePrice"),e.xp6(6),e.Q6J("formControlName","taxPercent"),e.xp6(6),e.Q6J("formControlName","price"),e.xp6(11),e.Q6J("formControlName","uom"),e.xp6(1),e.Q6J("ngForOf",o.uoms),e.xp6(4),e.Q6J("formControlName","stock"),e.xp6(4),e.Q6J("formControlName","onSale"),e.xp6(4),e.Q6J("formControlName","sku"),e.xp6(4),e.Q6J("formControlName","barcode"),e.xp6(6),e.Q6J("formControlName","weight"),e.xp6(6),e.Q6J("formControlName","volume"),e.xp6(6),e.Q6J("formControlName","size"),e.xp6(13),e.Q6J("ngIf",o.thumbnail),e.xp6(1),e.Q6J("ngIf",o.thumbnail),e.xp6(1),e.Q6J("ngIf",!o.thumbnail),e.xp6(1),e.Q6J("ngIf",!o.thumbnail),e.xp6(5),e.Q6J("ngForOf",o.images),e.xp6(2),e.Q6J("multiple",!0)("accept","image/jpeg, image/jpg, image/webp, image/png"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:plus-circle")}},dependencies:[C.yS,h.sg,h.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.nD,c.qQ,c.Fd,c.sg,c.u,ze.PQ,X.ey,U.lW,ko.oG,F.Hw,f.KE,f.bx,f.hX,f.qo,f.R9,R.Nt,X.wG,Ie.gD,Je.g6],styles:[".ql-container[_ngcontent-%COMP%]   .ql-editor[_ngcontent-%COMP%]{min-height:500px!important;max-height:100%!important;height:100%!important}"]}),i})(),Oo=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-products"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[C.lC],encapsulation:2}),i})();function Yo(i,s){if(1&i&&e._UZ(0,"img",50),2&i){const t=e.oxw().$implicit;e.Q6J("alt","Product thumbnail image")("src",t.thumbnail,e.LSH)}}function Po(i,s){1&i&&(e.TgZ(0,"div",51),e._uU(1," SIN IMAGEN "),e.qZA())}function Ho(i,s){1&i&&(e.TgZ(0,"div",52),e._UZ(1,"div",53),e.qZA())}function $o(i,s){1&i&&(e.TgZ(0,"div",54),e._UZ(1,"div",55),e.qZA())}function Wo(i,s){1&i&&(e.TgZ(0,"div",56),e._UZ(1,"div",57),e.qZA())}function Go(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",58),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function jo(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",59),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Ko(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"div",33)(3,"div",34),e.YNc(4,Yo,1,2,"img",35),e.YNc(5,Po,2,0,"div",36),e.qZA()(),e.TgZ(6,"div",37),e._uU(7),e.qZA(),e.TgZ(8,"div",38),e._uU(9),e.qZA(),e.TgZ(10,"div",39),e._uU(11),e.ALo(12,"currency"),e.qZA(),e.TgZ(13,"div",40)(14,"div",41),e._uU(15),e.qZA(),e.YNc(16,Ho,2,0,"div",42),e.YNc(17,$o,2,0,"div",43),e.YNc(18,Wo,2,0,"div",44),e.qZA(),e.TgZ(19,"div",45),e._uU(20),e.qZA(),e.TgZ(21,"div",45),e.YNc(22,Go,2,1,"ng-container",20),e.YNc(23,jo,2,1,"ng-container",20),e.qZA(),e.TgZ(24,"div",46)(25,"button",47),e._UZ(26,"mat-icon",48),e.qZA(),e.TgZ(27,"button",49),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(4);return e.KtG(a.deleteProduct(r._id))}),e._UZ(28,"mat-icon",48),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(4),e.Q6J("ngIf",t.thumbnail),e.xp6(1),e.Q6J("ngIf",!t.thumbnail),e.xp6(2),e.hij(" ",t.sku," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",e.gM2(12,15,t.price,"$ ","symbol","1.2-2")," "),e.xp6(4),e.Oqu(t.stock),e.xp6(1),e.Q6J("ngIf",t.stock<20),e.xp6(1),e.Q6J("ngIf",t.stock>=20&&t.stock<30),e.xp6(1),e.Q6J("ngIf",t.stock>=30),e.xp6(2),e.hij(" ",t.salesQty," "),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(2),e.Q6J("routerLink","/modules/stock/panels/product/"+t._id),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Vo(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ko,29,20,"ng-container",31),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const Xo=function(i){return{"pointer-events-none":i}},ei=function(){return[5,10,25,100]};function ti(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24),e._UZ(3,"div"),e.TgZ(4,"div",25),e._uU(5," SKU "),e.qZA(),e.TgZ(6,"div",26),e._uU(7," Nombre "),e.qZA(),e.TgZ(8,"div",27),e._uU(9," Precio "),e.qZA(),e.TgZ(10,"div",28),e._uU(11," Stock "),e.qZA(),e.TgZ(12,"div",28),e._uU(13," Unidades Vendidas "),e.qZA(),e.TgZ(14,"div",28),e._uU(15," Activo "),e.qZA(),e.TgZ(16,"div",29),e._uU(17,"Detalles"),e.qZA()(),e.YNc(18,Vo,2,2,"ng-container",20),e.ALo(19,"async"),e.qZA(),e._UZ(20,"mat-paginator",30),e.BQk()),2&i){const t=e.oxw(2);e.xp6(6),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","price"),e.xp6(2),e.Q6J("mat-sort-header","stock"),e.xp6(2),e.Q6J("mat-sort-header","salesQty"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(19,12,t.products$)),e.xp6(2),e.Q6J("ngClass",e.VKq(14,Xo,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(16,ei))("showFirstLastButtons",!0)}}function oi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ti,21,17,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function ii(i,s){1&i&&(e.TgZ(0,"div",60),e._uU(1,"\xa1No se ha creado ning\xfan producto!"),e.qZA())}let ni=(()=>{class i{constructor(t,o,n,r,a){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._formBuilder=n,this._productsService=r,this.store=a,this.flashMessage=null,this.isLoading=!1,this.products$=(0,y.of)([]),this.searchInputControl=new c.p4,this.selectedProduct=null,this.tagsEditMode=!1,this.user$=(0,y.of)(null),this.uoms$=(0,y.of)(null),this.user=null,this._unsubscribeAll=new T.x}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.uoms$=this.store.select(H),this.store.select(Y).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this.store.select(ve.us).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.categories=t,this._changeDetectorRef.markForCheck()}),this.store.select(fe.B).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.products$=this.store.select(oe),this._productsService.tags$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.tags=t,this.filteredTags=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,u.R)(this._unsubscribeAll),(0,P.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._productsService.getProducts(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,_e.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._productsService.getProducts(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteProduct(t){this._fuseConfirmationService.open({title:"Eliminar Producto",message:"\xbfEsta seguro que desea eliminar el producto?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._productsService.deleteProduct(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(M.R),e.Y36(c.QS),e.Y36(ke),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-products-list"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","","routerLink","/modules/stock/panels/product/new",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noProducts",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","inventory-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"items-center","justify-center","hidden","md:flex"],[1,"flex","items-center","justify-start",3,"mat-sort-header"],[1,"items-center","justify-center","hidden","sm:flex",3,"mat-sort-header"],[1,"items-center","justify-center","hidden","lg:flex",3,"mat-sort-header"],[1,"items-center","justify-center","hidden","sm:flex"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","inventory-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"hidden","truncate","md:block"],[1,"truncate"],[1,"hidden","text-right","sm:block"],[1,"items-center","justify-center","hidden","lg:flex"],[1,"min-w-4"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-red-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-orange-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-green-100 rounded",4,"ngIf"],[1,"hidden","text-center","lg:block"],[1,"flex","flex-row","flex-wrap","gap-3","justify-center"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-red-200","rounded"],[1,"flex","w-full","bg-red-600","h-1/3"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-orange-200","rounded"],[1,"flex","w-full","bg-orange-400","h-2/4"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-green-100","rounded"],[1,"flex","w-full","h-full","bg-green-400"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Inventario"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Productos"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Productos "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,oi,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,ii,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar productos"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.products$)))},dependencies:[C.rH,C.yS,h.mk,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov,h.H9],styles:[".inventory-grid{grid-template-columns:48px auto 40px}@media (min-width: 600px){.inventory-grid{grid-template-columns:48px auto 112px 72px}}@media (min-width: 960px){.inventory-grid{grid-template-columns:48px 112px auto 200px 112px 72px}}@media (min-width: 1280px){.inventory-grid{grid-template-columns:5% 15% auto 5% 10% 5% 5% 10%}}\n"],encapsulation:2,data:{animation:xe.L},changeDetection:0}),i})();var ie=m(1411);const ne=ue.N.API_URL;let Se=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o}getUoms(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${ne}/uoms/`,{params:l}).pipe((0,I.b)(({pagination:d,uoms:p})=>{this.store.dispatch((0,pe.Jr)({pagination:d})),this.store.dispatch((0,ie.u8)({uoms:p}))}))}getUomById(t){return this._httpClient.get(`${ne}/uoms/${t}`).pipe((0,me.j)("uom"),(0,I.b)(o=>{this.store.dispatch((0,ie.sh)({uom:o}))}))}createUom(t){return this.store.select(H).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${ne}/uoms/`,t).pipe((0,I.b)(n=>{this.store.dispatch((0,ie.u8)({uoms:[n.uom,...o]}))}))))}updateUom(t){return this.store.select(H).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${ne}/uoms/${t._id}`,t).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t._id);return o[r]=n.uom,this.store.dispatch((0,ie.u8)({uoms:o})),n}))))}deleteUom(t){return this.store.select(H).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${ne}/uoms/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this.store.dispatch((0,ie.u8)({uoms:o})),n}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ri(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Unidad de Medida "),e.qZA())}function ai(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Editar Unidad de Medida "),e.qZA())}function si(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(t.data.uom.name||"Sin nombre")}}function ci(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Sigla"),e.qZA(),e._UZ(12,"input",20),e.qZA()(),e.TgZ(13,"div",18)(14,"mat-form-field",19)(15,"mat-label"),e._uU(16,"Tipo"),e.qZA(),e.TgZ(17,"mat-select",21)(18,"mat-option",22),e._uU(19,"Peso"),e.qZA(),e.TgZ(20,"mat-option",22),e._uU(21,"Volumen"),e.qZA(),e.TgZ(22,"mat-option",22),e._uU(23,"Conteo"),e.qZA()()()(),e.TgZ(24,"div",23)(25,"span",24),e._uU(26,"Estado"),e.qZA(),e.TgZ(27,"mat-slide-toggle",25),e._uU(28),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.uomForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del Unidad de Medida"),e.xp6(5),e.Q6J("formControlName","abbr")("placeholder","Siglas"),e.xp6(5),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","peso"),e.xp6(2),e.Q6J("value","volumen"),e.xp6(2),e.Q6J("value","conteo"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.uomForm.get("active").value?"Activo":"Inactivo"," ")}}function li(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateUom())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function di(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createUom())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.uomForm.invalid)("matDialogClose","confirmed")}}function mi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",26),e.ynx(2),e.TgZ(3,"button",27),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,li,3,3,"ng-container",6),e.YNc(6,di,3,3,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let pi=(()=>{class i{constructor(t,o,n,r,a,l,d){this.data=t,this._changeDetectorRef=o,this._formBuilder=n,this._fuseConfirmationService=r,this._dialogRef=a,this._uomService=l,this.store=d,this.dialogMode="view",this.user$=(0,y.of)(null),this.user=null,this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.uom=t.uom}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.uomForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],abbr:[null,[c.kI.required,c.kI.maxLength(20)]],type:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(100)]]}),"edit"===this.dialogMode&&this.uomForm.patchValue(this.uom)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createUom(){let t=this.uomForm.getRawValue();t=(0,de.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.createUom(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateUom(){const t=this.uomForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._uomService.updateUom(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(e.sBO),e.Y36(c.QS),e.Y36(M.R),e.Y36(Z.so),e.Y36(Se),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-uom-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,ri,2,0,"h2",2),e.YNc(4,ai,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,si,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,ci,29,13,"div",5),e.BQk(),e.qZA(),e.YNc(10,mi,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,X.ey,U.lW,Z.ZT,f.KE,f.hX,R.Nt,Ie.gD,he.Rr],encapsulation:2}),i})();const ui={_id:null,active:null,userId:null,name:null,abbr:null,type:null};function gi(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",37),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function hi(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function _i(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e._uU(6),e.qZA()(),e.TgZ(7,"div",32)(8,"div",33),e._uU(9),e.qZA()(),e.TgZ(10,"div",34),e.YNc(11,gi,2,1,"ng-container",20),e.YNc(12,hi,2,1,"ng-container",20),e.qZA(),e.TgZ(13,"div")(14,"button",35),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(4);return e.KtG(a.updateUom(r))}),e._UZ(15,"mat-icon",36),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.abbr),e.xp6(3),e.Oqu(t.type),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil")}}function fi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,_i,16,6,"ng-container",29),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const xi=function(){return[5,10,25,100]};function vi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"div",26),e._uU(6," Siglas "),e.qZA(),e.TgZ(7,"div",27),e._uU(8," Tipo "),e.qZA(),e.TgZ(9,"div",27),e._uU(10," Activo "),e.qZA(),e.TgZ(11,"div",26),e._uU(12,"Detalles"),e.qZA()(),e.YNc(13,fi,2,2,"ng-container",20),e.ALo(14,"async"),e.qZA(),e._UZ(15,"mat-paginator",28),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","value"),e.xp6(2),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,9,t.uoms$)),e.xp6(2),e.Q6J("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(11,xi))("showFirstLastButtons",!0)}}function bi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,vi,16,12,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function Ci(i,s){1&i&&(e.TgZ(0,"div",39),e._uU(1,"\xa1No se ha creado ninguna unidad de medida!"),e.qZA())}let yi=(()=>{class i{constructor(t,o,n,r,a){this._changeDetectorRef=t,this._dialog=o,this._fuseConfirmationService=n,this._uomService=r,this.store=a,this.flashMessage=null,this.uoms$=(0,y.of)([]),this.searchInputControl=new c.p4,this.isLoading=!1,this._unsubscribeAll=new T.x}ngOnInit(){this.uoms$=this.store.select(H),this.store.select(fe.B).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,u.R)(this._unsubscribeAll),(0,P.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._uomService.getUoms(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,_e.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUom(){this._openDialog(ui,"add")}updateUom(t){this._openDialog(t,"edit")}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(pi,{data:{uom:t,dialogMode:o},panelClass:"ath-dialog-panel"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(Se),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-uom"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"bg-gradient-to-r","from-primary-500","to-primary-600","text-white",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1","text-white","hidden","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noUoms",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","uom-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","uom-grid","md:px-8"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Inventario"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Unidades de Medida"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Unidades de Medida "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return o.createUom()}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,bi,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,Ci,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.uoms$)))},dependencies:[C.yS,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov],styles:[".uom-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.uom-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.uom-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.uom-grid{grid-template-columns:auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:xe.L},changeDetection:0}),i})(),Me=(()=>{class i{constructor(t){this._brandsService=t}resolve(t,o){return this._brandsService.getBrands()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ge))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$e=(()=>{class i{constructor(t){this._categoriesService=t}resolve(t,o){return this._categoriesService.getCategoriesByBusiness("000000000000000000000000")}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ye.G))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),We=(()=>{class i{constructor(t){this._productsService=t}resolve(t,o){return this._productsService.getProducts()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ke))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ki=(()=>{class i{constructor(t){this._productsService=t}resolve(t,o){return this._productsService.getTags()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ke))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ge=(()=>{class i{constructor(t){this._uomService=t}resolve(t,o){return this._uomService.getUoms()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Se))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const je=i=>i.suppliers,Ze=((0,v.P1)(je,i=>i.supplier),(0,v.P1)(je,i=>i.suppliers));var re=m(3024);const ae=ue.N.API_URL;let Ue=(()=>{class i{constructor(t,o){this._httpClient=t,this.store=o}getSuppliers(t=0,o=10,n="name",r="asc",a=""){const l=(new J.LE).append("page",t.toString()).append("size",o.toString()).append("sort",n).append("order",r).append("search",a);return this._httpClient.get(`${ae}/suppliers/`,{params:l}).pipe((0,I.b)(({pagination:d,suppliers:p})=>{this.store.dispatch((0,pe.Jr)({pagination:d})),this.store.dispatch((0,re.bz)({suppliers:p}))}))}getSupplierById(t){return this._httpClient.get(`${ae}/suppliers/${t}`).pipe((0,me.j)("supplier"),(0,I.b)(o=>{this.store.dispatch((0,re.n2)({supplier:o}))}))}createSupplier(t){return this.store.select(Ze).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.post(`${ae}/suppliers/`,t).pipe((0,I.b)(n=>{this.store.dispatch((0,re.bz)({suppliers:[n.supplier,...o]}))}))))}updateSupplier(t){return this.store.select(Ze).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.patch(`${ae}/suppliers/${t._id}`,t).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t._id);return o[r]=n.supplier,this.store.dispatch((0,re.bz)({suppliers:o})),n}))))}deleteSupplier(t){return this.store.select(Ze).pipe((0,k.q)(1),(0,x.w)(o=>this._httpClient.delete(`${ae}/suppliers/${t}`).pipe((0,b.U)(n=>{const r=o.findIndex(a=>a._id===t);return o.splice(r,1),this.store.dispatch((0,re.bz)({suppliers:o})),n}))))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(J.eN),e.LFG(v.yh))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Zi(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Proveedor "),e.qZA())}function wi(i,s){1&i&&(e.TgZ(0,"h2",7),e._uU(1," Editar Proveedor "),e.qZA())}function Ai(i,s){if(1&i&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&i){const t=e.oxw();e.xp6(8),e.Oqu(t.data.supplier.name||"Sin nombre")}}function Ti(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),e._uU(11,"Categor\xeda"),e.qZA(),e.TgZ(12,"mat-select",21)(13,"mat-option",22),e._uU(14,"Farmac\xe9utico"),e.qZA(),e.TgZ(15,"mat-option",22),e._uU(16,"Material Sanitario"),e.qZA(),e.TgZ(17,"mat-option",22),e._uU(18,"Insumos M\xe9dicos"),e.qZA(),e.TgZ(19,"mat-option",22),e._uU(20,"Equipos M\xe9dicos"),e.qZA()()()(),e.TgZ(21,"div",18)(22,"mat-form-field",19)(23,"mat-label"),e._uU(24,"Tipo"),e.qZA(),e.TgZ(25,"mat-select",21)(26,"mat-option",22),e._uU(27,"Empresa"),e.qZA(),e.TgZ(28,"mat-option",22),e._uU(29,"Individual"),e.qZA()()()(),e.TgZ(30,"div",18)(31,"mat-form-field",19)(32,"mat-label"),e._uU(33,"Direcci\xf3n"),e.qZA(),e._UZ(34,"textarea",23),e.qZA()(),e.TgZ(35,"div",18)(36,"mat-form-field",19)(37,"mat-label"),e._uU(38,"Sitio web"),e.qZA(),e._UZ(39,"input",24),e.qZA()(),e.TgZ(40,"div",25)(41,"span",26),e._uU(42,"Estado"),e.qZA(),e.TgZ(43,"mat-slide-toggle",27),e._uU(44),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.supplierForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Nombre del proveedor"),e.xp6(5),e.Q6J("formControlName","category"),e.xp6(1),e.Q6J("value","farmac\xe9utico"),e.xp6(2),e.Q6J("value","material sanitario"),e.xp6(2),e.Q6J("value","insumos m\xe9dicos"),e.xp6(2),e.Q6J("value","equipos m\xe9dicos"),e.xp6(6),e.Q6J("formControlName","type"),e.xp6(1),e.Q6J("value","empresa"),e.xp6(2),e.Q6J("value","individual"),e.xp6(6),e.Q6J("matAutosizeMinRows",1)("formControlName","address"),e.xp6(5),e.Q6J("formControlName","website")("placeholder","https://....."),e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.supplierForm.get("active").value?"Activo":"Inactivo"," ")}}function Ii(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateSupplier())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.supplierForm.invalid)("matDialogClose","confirmed")}}function Si(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createSupplier())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.supplierForm.invalid)("matDialogClose","confirmed")}}function Mi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",28),e.ynx(2),e.TgZ(3,"button",29),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Ii,3,3,"ng-container",6),e.YNc(6,Si,3,3,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Ui=(()=>{class i{constructor(t,o,n,r,a,l,d){this.data=t,this._changeDetectorRef=o,this._dialogRef=n,this._formBuilder=r,this._fuseConfirmationService=a,this._suppliersService=l,this.store=d,this.dialogMode="view",this.user$=(0,y.of)(null),this.user=null,this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.supplier=t.supplier}ngOnInit(){this.user$=this.store.select(z.rk),this.user$.subscribe(t=>this.user=t),this.supplierForm=this._formBuilder.group({_id:[null],user:[this.user._id,[c.kI.required]],active:[!0,[c.kI.required]],name:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],category:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],type:[null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(250)]],address:[null,[c.kI.minLength(3),c.kI.maxLength(250)]],website:[null,[c.kI.minLength(3),c.kI.maxLength(250),c.kI.pattern("/^(?:(?:(?:https?|ftp):)?//)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z\xa1-\uffff0-9]-*)*[a-z\xa1-\uffff0-9]+)(?:.(?:[a-z\xa1-\uffff0-9]-*)*[a-z\xa1-\uffff0-9]+)*(?:.(?:[a-z\xa1-\uffff]{2,})))(?::d{2,5})?(?:[/?#]S*)?$/i")]]}),"edit"===this.dialogMode&&this.supplierForm.patchValue(this.supplier)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createSupplier(){let t=this.supplierForm.getRawValue();t=(0,de.Z)(t,["_id"]),this._fuseConfirmationService.open({title:"Crear Proveedor",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._suppliersService.createSupplier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateSupplier(){const t=this.supplierForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Proveedor",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._suppliersService.updateSupplier(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},r=>{this._fuseConfirmationService.open({title:`${r.statusText}: ${r.status}`,message:r.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.WI),e.Y36(e.sBO),e.Y36(Z.so),e.Y36(c.QS),e.Y36(M.R),e.Y36(Ue),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-supplier-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],["matInput","","matTextareaAutosize","","maxlength","250",3,"matAutosizeMinRows","formControlName"],["matInput","","type","text","maxlength","250",3,"formControlName","placeholder"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Zi,2,0,"h2",2),e.YNc(4,wi,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Ai,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Ti,45,19,"div",5),e.BQk(),e.qZA(),e.YNc(10,Mi,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[h.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.nD,c.sg,c.u,X.ey,U.lW,Z.ZT,f.KE,f.hX,R.Nt,Ie.gD,he.Rr],encapsulation:2}),i})();const qi={_id:null,user:null,active:null,name:null,category:null,type:null};function Qi(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Ri(i,s){1&i&&(e.ynx(0),e._UZ(1,"mat-icon",39),e.BQk()),2&i&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Fi(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",31)(2,"div",32),e._uU(3),e.qZA(),e.TgZ(4,"div",33)(5,"div",34),e._uU(6),e.qZA()(),e.TgZ(7,"div",35),e.YNc(8,Qi,2,1,"ng-container",20),e.YNc(9,Ri,2,1,"ng-container",20),e.qZA(),e.TgZ(10,"div")(11,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,a=e.oxw(4);return e.KtG(a.updateSupplier(r))}),e._UZ(12,"mat-icon",37),e.qZA()()(),e.BQk()}if(2&i){const t=s.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil")}}function Ji(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Fi,13,5,"ng-container",30),e.BQk()),2&i){const t=s.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}const Ni=function(i){return{"pointer-events-none":i}},Di=function(){return[5,10,25,100]};function Bi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24)(3,"div",25),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"div",26),e._uU(6," Descripci\xf3n "),e.qZA(),e.TgZ(7,"div",27),e._uU(8," Activo "),e.qZA(),e.TgZ(9,"div",28),e._uU(10,"Detalles"),e.qZA()(),e.YNc(11,Ji,2,2,"ng-container",20),e.ALo(12,"async"),e.qZA(),e._UZ(13,"mat-paginator",29),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","active"),e.xp6(4),e.Q6J("ngIf",e.lcZ(12,9,t.suppliers$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,Ni,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(13,Di))("showFirstLastButtons",!0)}}function zi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Bi,14,14,"ng-container",22),e.BQk()),2&i){const t=s.ngIf;e.oxw();const o=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function Ei(i,s){1&i&&(e.TgZ(0,"div",40),e._uU(1,"\xa1No se ha creado ning\xfan proveedor!"),e.qZA())}const Li=[{path:"",pathMatch:"full",redirectTo:"panels"},{path:"panels",component:ho,children:[{path:"",component:xo},{path:"products",component:Oo,children:[{path:"",component:ni,resolve:{products:We}}]},{path:"product/:productId",component:Lo,resolve:{brands:Me,categories:$e,products:We,tags:ki,uoms:Ge}},{path:"brands",component:Wt,resolve:{brands:Me}},{path:"brand/:brandId",component:Tt,resolve:{brands:Me}},{path:"categories",component:go,resolve:{categories:$e}},{path:"suppliers",component:(()=>{class i{constructor(t,o,n,r,a){this._suppliersService=t,this._changeDetectorRef=o,this._dialog=n,this._fuseConfirmationService=r,this.store=a,this.flashMessage=null,this.suppliers$=(0,y.of)([]),this.merchantInputControl=new c.p4,this.isLoading=!1,this.searchInputControl=new c.p4,this._unsubscribeAll=new T.x}ngOnInit(){this.suppliers$=this.store.select(Ze),this.store.select(fe.B).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,u.R)(this._unsubscribeAll),(0,P.b)(300),(0,x.w)(t=>(this.isLoading=!0,this._suppliersService.getSuppliers(0,10,"name","asc",t))),(0,b.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,_e.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._suppliersService.getSuppliers(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,b.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createSupplier(){this._openDialog(qi,"add")}updateSupplier(t){this._openDialog(t,"edit")}trackByFn(t,o){return t||o.id}_openDialog(t,o){this._dialog.open(Ui,{data:{supplier:t,dialogMode:o},panelClass:"ath-dialog-panel"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ue),e.Y36(e.sBO),e.Y36(Z.uw),e.Y36(M.R),e.Y36(v.yh))},i.\u0275cmp=e.Xpm({type:i,selectors:[["stock-suppliers"]],viewQuery:function(t,o){if(1&t&&(e.Gf(E.NW,5),e.Gf(q.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(o._paginator=n.first),e.iGM(n=e.CRH())&&(o._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/home",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"bg-gradient-to-r","from-primary-500","to-primary-600","text-white",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1","text-white","hidden","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noSuppliers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","suppliers-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","md:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","suppliers-grid","md:px-8"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Inventario"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",8),e._uU(14,"Proveedores"),e.qZA()()(),e.TgZ(15,"div",9)(16,"h2",10),e._uU(17," Proveedores "),e.qZA()()(),e.TgZ(18,"div",11)(19,"mat-form-field",12),e._UZ(20,"mat-icon",13)(21,"input",14),e.qZA(),e.TgZ(22,"button",15),e.NdJ("click",function(){return o.createSupplier()}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"div",19),e.YNc(28,zi,2,2,"ng-container",20),e.ALo(29,"async"),e.YNc(30,Ei,2,0,"ng-template",null,21,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar proveedores"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,o.suppliers$)))},dependencies:[C.yS,h.mk,h.sg,h.O5,c.Fj,c.JJ,c.oH,U.lW,F.Hw,f.KE,f.qo,R.Nt,E.NW,q.YE,q.nU,h.Ov],styles:[".suppliers-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.suppliers-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.suppliers-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.suppliers-grid{grid-template-columns:auto 250px 150px 72px 72px}}\n"],encapsulation:2,data:{animation:xe.L},changeDetection:0}),i})(),resolve:{suppliers:(()=>{class i{constructor(t){this._suppliersService=t}resolve(t,o){return this._suppliersService.getSuppliers()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Ue))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}},{path:"uom",component:yi,resolve:{uoms:Ge}}]}];var Oi=m(7775);let Yi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[kt,C.Bz.forChild(Li),Zt.m,Je.fi,Oi.fC]}),i})()}}]);