"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[207],{6428:(ft,U,l)=>{l.d(U,{B:()=>q});const q=(0,l(5094).P1)(I=>I.pagination,I=>I.pagination)},8207:(ft,U,l)=>{l.r(U),l.d(U,{StockModule:()=>Ao});var g=l(5357),Q=l(3877),q=l(8314),I=l(4576),t=l(5e3);let ht=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["ath-stock"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[g.lC],encapsulation:2}),o})();var F=l(7579),m=l(2722),xt=l(2451),_=l(5094),J=l(5245),vt=l(1235);function Zt(o,r){if(1&o&&(t.TgZ(0,"div",25)(1,"div",8)(2,"div",9),t._uU(3,"Categor\xedas"),t.qZA(),t.TgZ(4,"div",10)(5,"div",11)(6,"span",12),t._uU(7),t.qZA()()()()()),2&o){const e=t.oxw();t.xp6(7),t.Oqu(e.stats.entitiesLength.categoriesQty)}}function Ct(o,r){1&o&&(t.TgZ(0,"div",29)(1,"div",21),t._UZ(2,"div",22),t.qZA(),t.TgZ(3,"div",23),t._uU(4,"Categor\xedas de productos"),t.qZA()())}const G=function(){return["Super Administrador"]};function kt(o,r){1&o&&(t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"mat-icon",18),t.TgZ(3,"div",9),t._uU(4,"Nomencladores"),t.qZA()(),t.TgZ(5,"div",19)(6,"div",26)(7,"div",21),t._UZ(8,"div",22),t.qZA(),t.TgZ(9,"div",23),t._uU(10,"Marcas"),t.qZA()(),t.TgZ(11,"div",27)(12,"div",21),t._UZ(13,"div",22),t.qZA(),t.TgZ(14,"div",23),t._uU(15,"Unidades de medida"),t.qZA()(),t.YNc(16,Ct,5,0,"div",28),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("svgIcon","mat_solid:description"),t.xp6(14),t.Q6J("ngxPermissionsOnly",t.DdM(2,G)))}let bt=(()=>{class o{constructor(e){this.store=e,this.stats$=null,this.stats=null,this._unsubscribeAll=new F.x}ngOnInit(){this.stats$=this.store.select(xt.qo),this.stats$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.stats=e})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["stock-panel"]],decls:42,vars:7,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","p-6","mx-auto","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","leading-8","tracking-tight"],[1,"font-medium","tracking-tight","text-secondary"],[1,"grid","w-full","grid-cols-1","gap-8","mt-6","sm:grid-cols-2","lg:grid-cols-4","md:mt-8"],["class","flex flex-col flex-auto p-6 overflow-hidden transition-shadow duration-100 ease-linear shadow cursor-pointer bg-card rounded-2xl hover:shadow-lg","routerLink","/modules/stock/panels/categories",4,"ngxPermissionsOnly"],["routerLink","/modules/stock/panels/products",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","leading-6","tracking-tight","truncate"],[1,"ml-2"],[1,"h-6","px-2","bg-yellow-100","rounded-lg","min-h-6"],[1,"font-mono","text-lg","font-medium","text-yellow-900"],["routerLink","/modules/stock/panels/brands",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],[1,"w-full","mt-12"],[1,"text-2xl","font-semibold","leading-6","tracking-tight"],[1,"flex","flex-col","flex-auto","p-6","overflow-hidden","shadow","bg-card","rounded-2xl"],[1,"flex","items-start","justify-start"],[1,"mr-3",3,"svgIcon"],[1,"flex","flex-col","mt-5"],["routerLink","/modules/stock/panels/products",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],[1,"flex","items-center","justify-center","w-6","h-6","mr-3","rounded-lg","bg-primary-100"],[1,"w-1","h-1","rounded-full","bg-primary-500"],[1,"text-lg","leading-6","tracking-tight"],["class","flex flex-col flex-auto p-6 overflow-hidden shadow bg-card rounded-2xl",4,"ngxPermissionsOnly"],["routerLink","/modules/stock/panels/categories",1,"flex","flex-col","flex-auto","p-6","overflow-hidden","transition-shadow","duration-100","ease-linear","shadow","cursor-pointer","bg-card","rounded-2xl","hover:shadow-lg"],["routerLink","/modules/stock/panels/brands",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["routerLink","/modules/stock/panels/uom",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"],["class","flex items-center justify-start p-1.5 cursor-pointer rounded-lg hover:bg-hover","routerLink","/modules/stock/panels/categories",4,"ngxPermissionsOnly"],["routerLink","/modules/stock/panels/categories",1,"flex","items-center","justify-start","p-1.5","cursor-pointer","rounded-lg","hover:bg-hover"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5,"Gesti\xf3n de Producto"),t.qZA(),t.TgZ(6,"div",4),t._uU(7," Este m\xf3dulo est\xe1 dedicado a todos los componentes de la gesti\xf3n de productos. "),t.qZA()()(),t.TgZ(8,"div",5),t.YNc(9,Zt,8,1,"div",6),t.TgZ(10,"div",7)(11,"div",8)(12,"div",9),t._uU(13,"Productos"),t.qZA(),t.TgZ(14,"div",10)(15,"div",11)(16,"span",12),t._uU(17),t.qZA()()()()(),t.TgZ(18,"div",13)(19,"div",8)(20,"div",9),t._uU(21,"Marcas"),t.qZA(),t.TgZ(22,"div",10)(23,"div",11)(24,"span",12),t._uU(25),t.qZA()()()()()(),t.TgZ(26,"div",14)(27,"div",15),t._uU(28,"Reportes y Listados"),t.qZA()(),t.TgZ(29,"div",5)(30,"div",16)(31,"div",17),t._UZ(32,"mat-icon",18),t.TgZ(33,"div",9),t._uU(34,"Productos"),t.qZA()(),t.TgZ(35,"div",19)(36,"div",20)(37,"div",21),t._UZ(38,"div",22),t.qZA(),t.TgZ(39,"div",23),t._uU(40,"Productos"),t.qZA()()()(),t.YNc(41,kt,17,3,"div",24),t.qZA()()()),2&e&&(t.xp6(9),t.Q6J("ngxPermissionsOnly",t.DdM(5,G)),t.xp6(8),t.Oqu(n.stats.entitiesLength.productsQty),t.xp6(8),t.Oqu(n.stats.entitiesLength.brandsQty),t.xp6(7),t.Q6J("svgIcon","mat_solid:description"),t.xp6(9),t.Q6J("ngxPermissionsOnly",t.DdM(6,G)))},dependencies:[g.rH,J.Hw,vt.gE],encapsulation:2}),o})();var c=l(3075),et=l(1159),N=l(9646),Tt=l(8675),Z=l(4004),ot=l(8372),D=l(7489);const nt=o=>o.brands,L=((0,_.P1)(nt,o=>o.brand),(0,_.P1)(nt,o=>o.brands));var yt=l(9987),B=l(2075);const it=o=>o.uoms,Y=((0,_.P1)(it,o=>o.uom),(0,_.P1)(it,o=>o.uoms));var C=l(9784);class rt{constructor(){this.tags=[]}}const at=o=>o.categories,b=((0,_.P1)(at,o=>o.category),(0,_.P1)(at,o=>o.categories));var It=l(123),T=l(8966),ct=l(1683),st=l(7231),H=l(3312),R=l(7261),p=l(9808),lt=l(9071),dt=l(1079),E=l(508),O=l(7423),At=l(7446),M=l(6688),k=l(7322),mt=l(8833),wt=l(4107),ut=l(2368),St=l(7238),Pt=l(4534);const K=function(o){return{"cursor-not-allowed":o}};function Ut(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createProduct())}),t._UZ(2,"mat-icon",56),t.TgZ(3,"span",57),t._uU(4,"Guardar"),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.productForm.invalid&&"standard"!==e.productForm.get("type").value&&0===e.variants.length)("ngClass",t.VKq(3,K,!e.productForm.invalid&&"standard"!==e.productForm.get("type").value&&0===e.variants.length)),t.xp6(1),t.Q6J("svgIcon","mat_solid:save")}}function Qt(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateProduct())}),t._UZ(2,"mat-icon",56),t.TgZ(3,"span",57),t._uU(4,"Actualizar"),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.productForm.invalid)("ngClass",t.VKq(3,K,e.productForm.invalid)),t.xp6(1),t.Q6J("svgIcon","mat_solid:refresh")}}function qt(o,r){1&o&&(t.ynx(0),t._UZ(1,"mat-icon",62),t.BQk()),2&o&&(t.xp6(1),t.Q6J("svgIcon","mat_solid:check_circle"))}const Ft=function(o,r,e){return{"ring ring-inset ring-primary":o,"cursor-not-allowed bg-slate-300 bg-opacity-50":r,"cursor-pointer":e}};function Jt(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",58),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.selectType(a.value))}),t.YNc(2,qt,2,1,"ng-container",11),t.TgZ(3,"div",59),t._uU(4),t.qZA(),t.TgZ(5,"div",60),t._uU(6),t.qZA(),t._UZ(7,"div",61),t.qZA(),t.BQk()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(5,Ft,n.productForm.get("type").value===e.value,"group"===e.value,"group"!==e.value))("matTooltip",e.tooltip),t.xp6(1),t.Q6J("ngIf",n.productForm.get("type").value===e.value),t.xp6(2),t.Oqu(e.label),t.xp6(2),t.Oqu(e.details)}}function Nt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre del producto es obligatorio. "),t.qZA())}function Dt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El nombre del producto debe contener entre 3 y 255 caracteres. "),t.qZA())}function Lt(o,r){if(1&o&&(t.TgZ(0,"mat-option",64),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.name),t.xp6(1),t.hij(" ",e.name," ")}}function Bt(o,r){if(1&o&&(t.TgZ(0,"mat-optgroup",63),t.YNc(1,Lt,2,2,"mat-option",30),t.qZA()),2&o){const e=r.$implicit;t.Q6J("label",e.name)("disabled",!e.active),t.xp6(1),t.Q6J("ngForOf",e.children)}}function Yt(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",65),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.resetCategoryField())}),t.qZA(),t.BQk()}}function Rt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Debe seleccionar una categor\xeda. "),t.qZA())}function Et(o,r){1&o&&(t.ynx(0),t.TgZ(1,"mat-form-field",20)(2,"mat-label"),t._uU(3,"SKU"),t.qZA(),t._UZ(4,"input",66),t.qZA(),t.BQk()),2&o&&(t.xp6(4),t.Q6J("formControlName","sku"))}function Ot(o,r){1&o&&(t.ynx(0),t.TgZ(1,"mat-form-field",67)(2,"mat-label"),t._uU(3,"UPC"),t.qZA(),t._UZ(4,"input",66),t.qZA(),t.BQk()),2&o&&(t.xp6(4),t.Q6J("formControlName","upc"))}function Mt(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-option",64),t._uU(2),t.qZA(),t.BQk()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function zt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Debe seleccionar la marca. "),t.qZA())}function $t(o,r){if(1&o&&(t.TgZ(0,"mat-option",64),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.iso," ")}}function jt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Debe seleccionar una Moneda. "),t.qZA())}function Gt(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-option",64),t._uU(2),t.qZA(),t.BQk()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.abbr," ")}}function Ht(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El la unidad de medida es obligatoria. "),t.qZA())}function Kt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es obligatorio "),t.qZA())}function Vt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Este campo es obligatorio "),t.qZA())}function Wt(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El precio del producto es obligatorio "),t.qZA())}function Xt(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-form-field",68)(2,"mat-label"),t._uU(3,"Cantidad"),t.qZA(),t._UZ(4,"input",69),t.YNc(5,Kt,2,0,"mat-error",11),t.qZA(),t.TgZ(6,"mat-form-field",68)(7,"mat-label"),t._uU(8,"Cantidad M\xedn"),t.qZA(),t._UZ(9,"input",69),t.YNc(10,Vt,2,0,"mat-error",11),t.qZA(),t.TgZ(11,"mat-form-field",68)(12,"mat-label"),t._uU(13,"Costo"),t.qZA(),t._UZ(14,"mat-icon",70)(15,"input",71),t.qZA(),t.TgZ(16,"mat-form-field",68)(17,"mat-label"),t._uU(18,"Descuento"),t.qZA(),t._UZ(19,"mat-icon",70)(20,"input",71),t.qZA(),t.TgZ(21,"mat-form-field",68)(22,"mat-label"),t._uU(23,"Impuesto"),t.qZA(),t._UZ(24,"mat-icon",70)(25,"input",71),t.qZA(),t.TgZ(26,"mat-form-field",68)(27,"mat-label"),t._uU(28,"Precio"),t.qZA(),t._UZ(29,"mat-icon",70)(30,"input",72),t.YNc(31,Wt,2,0,"mat-error",11),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("formControlName","stock"),t.xp6(1),t.Q6J("ngIf",e.productForm.get("stock").hasError("required")),t.xp6(4),t.Q6J("formControlName","stockMin"),t.xp6(1),t.Q6J("ngIf",e.productForm.get("stock").hasError("required")),t.xp6(5),t.Q6J("formControlName","cost"),t.xp6(5),t.Q6J("formControlName","discount"),t.xp6(5),t.Q6J("formControlName","tax"),t.xp6(5),t.Q6J("formControlName","price"),t.xp6(1),t.Q6J("ngIf",e.productForm.get("price").hasError("required"))}}function te(o,r){1&o&&(t.ynx(0),t.TgZ(1,"mat-form-field",68)(2,"mat-label"),t._uU(3,"Largo"),t.qZA(),t._UZ(4,"mat-icon",73)(5,"mat-icon",70)(6,"input",71),t.qZA(),t.TgZ(7,"mat-form-field",68)(8,"mat-label"),t._uU(9,"Ancho"),t.qZA(),t._UZ(10,"mat-icon",73)(11,"input",71),t.qZA(),t.TgZ(12,"mat-form-field",68)(13,"mat-label"),t._uU(14,"Altura"),t.qZA(),t._UZ(15,"mat-icon",73)(16,"input",71),t.qZA(),t.TgZ(17,"mat-form-field",68)(18,"mat-label"),t._uU(19,"Peso"),t.qZA(),t._UZ(20,"mat-icon",74)(21,"input",71),t.qZA(),t.BQk()),2&o&&(t.xp6(6),t.Q6J("formControlName","length"),t.xp6(5),t.Q6J("formControlName","width"),t.xp6(5),t.Q6J("formControlName","height"),t.xp6(5),t.Q6J("formControlName","weight"))}const pt=function(){return{height:"270px"}};function ee(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",75)(2,"mat-label"),t._uU(3,"Especificaciones"),t.qZA(),t._UZ(4,"quill-editor",76),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("formControlName","specifications")("styles",t.DdM(3,pt))("modules",e.quillModules)}}function oe(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",75)(2,"mat-label"),t._uU(3,"Garant\xeda"),t.qZA(),t._UZ(4,"quill-editor",76),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(4),t.Q6J("formControlName","guaranty")("styles",t.DdM(3,pt))("modules",e.quillModules)}}function ne(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"input",77,78),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectFiles(i,"thumbnail"))}),t.qZA(),t.TgZ(3,"label",79),t._UZ(4,"mat-icon",80),t.qZA()()}2&o&&(t.xp6(1),t.Q6J("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","mat_solid:photo_camera"))}function ie(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"button",81),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.removeFile())}),t._UZ(2,"mat-icon",80),t.qZA()()}2&o&&(t.xp6(2),t.Q6J("svgIcon","mat_solid:delete"))}function re(o,r){if(1&o&&t._UZ(0,"img",82),2&o){const e=t.oxw();t.Q6J("src",e.productForm.get("thumbnail").value,t.LSH)}}function ae(o,r){1&o&&t._UZ(0,"mat-icon",48),2&o&&t.Q6J("svgIcon","mat_solid:edit")}function ce(o,r){1&o&&t._UZ(0,"mat-icon",48),2&o&&t.Q6J("svgIcon","mat_solid:done")}function se(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-checkbox",83),t.NdJ("change",function(i){const s=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.toggleProductTag(s,i))}),t._uU(2),t.qZA(),t.BQk()}if(2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("color","primary")("checked",n.selectedProduct.tags.includes(e.id)),t.xp6(1),t.hij(" ",e.name," ")}}function le(o,r){if(1&o&&(t.ynx(0),t.YNc(1,se,3,3,"ng-container",18),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.filteredTags)("ngForTrackBy",e.trackByFn)}}function de(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",68)(2,"input",85),t.NdJ("input",function(i){const s=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.updateTagName(s,i))}),t.qZA(),t.TgZ(3,"button",86),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.deleteTag(a))}),t._UZ(4,"mat-icon",48),t.qZA()(),t.BQk()}if(2&o){const e=r.$implicit;t.xp6(2),t.Q6J("value",e.name),t.xp6(2),t.Q6J("svgIcon","mat_solid:delete")}}function me(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",84),t.YNc(2,de,5,2,"ng-container",18),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.filteredTags)("ngForTrackBy",e.trackByFn)}}function ue(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",87),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),a=t.MAs(113);return i.createTag(a.value),t.KtG(a.value="")}),t._UZ(1,"mat-icon",88),t.TgZ(2,"div",89),t._uU(3,'Crear "'),t.TgZ(4,"b"),t._uU(5),t.qZA(),t._uU(6,'"'),t.qZA()()}if(2&o){t.oxw();const e=t.MAs(113);t.xp6(1),t.Q6J("svgIcon","mat_solid:add_circle"),t.xp6(4),t.Oqu(e.value)}}function pe(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",100),t.NdJ("removed",function(){const a=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.removeSize(a))}),t._uU(1),t.TgZ(2,"button",101),t._UZ(3,"mat-icon",48),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.Q6J("aria-label","Eliminar "+e),t.xp6(1),t.Q6J("svgIcon","mat_solid:cancel")}}function ge(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",94)(2,"mat-form-field",95)(3,"mat-label"),t._uU(4,"Variantes de tallas"),t.qZA(),t.TgZ(5,"input",96),t.NdJ("matChipInputTokenEnd",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addSize(i))}),t.qZA(),t.TgZ(6,"mat-chip-list",97,98),t.YNc(8,pe,4,3,"mat-chip",99),t.qZA()()(),t.BQk()}if(2&o){const e=t.MAs(7),n=t.oxw(2);t.xp6(5),t.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",n.addOnBlur),t.xp6(1),t.Q6J("formControl",n.sizesCtrl),t.xp6(2),t.Q6J("ngForOf",n.sizes)}}function _e(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",100),t.NdJ("removed",function(){const a=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.removeColor(a))}),t._UZ(1,"div",106),t.TgZ(2,"button",101),t._UZ(3,"mat-icon",48),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(1),t.Udp("background",e),t.xp6(1),t.Q6J("aria-label","Eliminar "+e),t.xp6(1),t.Q6J("svgIcon","mat_solid:cancel")}}function fe(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",102)(2,"span"),t._uU(3,"Variantes de colores"),t.qZA(),t.TgZ(4,"div",103)(5,"color-circle",104),t.NdJ("onChange",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.addColor(i))}),t.qZA(),t.TgZ(6,"mat-chip-list",105),t.YNc(7,_e,4,4,"mat-chip",99),t.qZA()()(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(5),t.Q6J("colors",e.defaultColors),t.xp6(2),t.Q6J("ngForOf",e.colors)}}function he(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-option",64),t._uU(2),t.qZA(),t.BQk()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function xe(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-form-field",68)(2,"mat-label",109),t._uU(3,"Talla"),t.qZA(),t.TgZ(4,"mat-select",116)(5,"mat-option",31),t._uU(6,"Seleccione una talla"),t.qZA(),t.YNc(7,he,3,2,"ng-container",28),t.qZA()(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(4),t.Q6J("formControlName","size")("required",e.showSize),t.xp6(3),t.Q6J("ngForOf",e.sizes)}}function ve(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-option",64)(2,"div",117),t._UZ(3,"div",118),t._uU(4),t.qZA()(),t.BQk()),2&o){const e=r.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(2),t.Udp("background",e),t.xp6(1),t.hij(" ",e," ")}}function Ze(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-form-field",68)(2,"mat-label",109),t._uU(3,"Color"),t.qZA(),t.TgZ(4,"mat-select",116)(5,"mat-option",31),t._uU(6,"Seleccione un color"),t.qZA(),t.YNc(7,ve,5,4,"ng-container",28),t.qZA()(),t.BQk()),2&o){const e=t.oxw(3);t.xp6(4),t.Q6J("formControlName","color")("required",e.showColor),t.xp6(3),t.Q6J("ngForOf",e.colors)}}function Ce(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",121),t._uU(2),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.size," ")}}function ke(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",123),t._UZ(2,"div",118),t.qZA(),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.Udp("background",e.color)}}function be(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",119)(2,"div",120),t._uU(3),t.qZA(),t.TgZ(4,"div",121),t._uU(5),t.qZA(),t.YNc(6,Ce,3,1,"ng-container",11),t.YNc(7,ke,3,2,"ng-container",11),t.TgZ(8,"div",121),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"div",121),t._uU(12),t.qZA(),t.TgZ(13,"button",122),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(4);return t.KtG(s.removeVariant(a))}),t._UZ(14,"mat-icon",56),t.qZA()(),t.BQk()}if(2&o){const e=r.$implicit,n=t.oxw(4);t.xp6(3),t.hij(" ",n.productForm.get("name").value," "),t.xp6(2),t.hij(" ",e.sku," "),t.xp6(1),t.Q6J("ngIf",n.showSize),t.xp6(1),t.Q6J("ngIf",n.showColor),t.xp6(2),t.hij(" ",t.xi3(10,7,e.price,"$ ")," "),t.xp6(3),t.hij(" ",e.stock," "),t.xp6(2),t.Q6J("svgIcon","mat_solid:remove")}}function Te(o,r){if(1&o&&(t.ynx(0),t.YNc(1,be,15,10,"ng-container",28),t.BQk()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.variants)}}function ye(o,r){1&o&&(t.TgZ(0,"div",124),t._uU(1," \xa1No se ha creado ninguna variante!"),t.qZA())}function Ie(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",107)(2,"span",91),t._uU(3,"Listado de variantes del producto"),t.qZA(),t.TgZ(4,"form",108)(5,"div"),t._uU(6),t.qZA(),t.TgZ(7,"mat-form-field",68)(8,"mat-label",109),t._uU(9,"SKU"),t.qZA(),t._UZ(10,"input",110),t.qZA(),t.YNc(11,xe,8,3,"ng-container",11),t.YNc(12,Ze,8,3,"ng-container",11),t.TgZ(13,"mat-form-field",68)(14,"mat-label",111),t._uU(15,"Precio"),t.qZA(),t._UZ(16,"input",112),t.qZA(),t.TgZ(17,"mat-form-field",68)(18,"mat-label",111),t._uU(19,"Cantidad"),t.qZA(),t._UZ(20,"input",112),t.qZA(),t.TgZ(21,"button",113),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.addVariant())}),t._UZ(22,"mat-icon",56),t.qZA()(),t.YNc(23,Te,2,1,"ng-container",114),t.YNc(24,ye,2,0,"ng-template",null,115,t.W1O),t.qZA(),t.BQk()}if(2&o){const e=t.MAs(25),n=t.oxw(2);t.xp6(4),t.Q6J("formGroup",n.variantForm),t.xp6(2),t.hij(" ",n.productForm.get("name").value," "),t.xp6(4),t.Q6J("formControlName","sku"),t.xp6(1),t.Q6J("ngIf",n.sizes.length>0),t.xp6(1),t.Q6J("ngIf",n.colors.length>0),t.xp6(4),t.Q6J("formControlName","price"),t.xp6(4),t.Q6J("formControlName","stock"),t.xp6(1),t.Q6J("disabled",n.variantForm.invalid)("ngClass",t.VKq(12,K,n.variantForm.invalid)),t.xp6(1),t.Q6J("svgIcon","mat_solid:add"),t.xp6(1),t.Q6J("ngIf",n.variants.length>0)("ngIfElse",e)}}function Ae(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",90)(2,"div",43)(3,"span",91),t._uU(4,"Tipo de Variante"),t.qZA(),t.TgZ(5,"span"),t._uU(6,"Selecciona el tipo de variante"),t.qZA(),t.TgZ(7,"div",92)(8,"mat-checkbox",93),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectShowSize(i))}),t._uU(9," Talla "),t.qZA(),t.TgZ(10,"mat-checkbox",93),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectShowColor(i))}),t._uU(11," Color "),t.qZA()(),t.YNc(12,ge,9,5,"ng-container",11),t.YNc(13,fe,8,2,"ng-container",11),t.YNc(14,Ie,26,14,"ng-container",11),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(8),t.Q6J("formControl",e.haveSizeCtrl),t.xp6(2),t.Q6J("formControl",e.haveColorCtrl),t.xp6(2),t.Q6J("ngIf",e.showSize),t.xp6(1),t.Q6J("ngIf",e.showColor),t.xp6(1),t.Q6J("ngIf",(e.colors.length>0||e.sizes.length>0)&&(e.showSize||e.showColor))}}let we=(()=>{class o{constructor(e,n,i,a,s,d,u,v,wo,So){this._activatedRoute=e,this._changeDetectorRef=n,this._dialog=i,this._formBuilder=a,this._fuseConfirmationService=s,this._imagesService=d,this._productsService=u,this._snackBar=v,this._router=wo,this.store=So,this.addOnBlur=!0,this.categories=[],this.categoriesFiltered$=(0,N.of)([]),this.currencies=[],this.descriptionLength=0,this.editMode=!1,this.flashMessage=null,this.images=[],this.isLoading=!1,this.haveSizeCtrl=new c.NI(!1),this.haveColorCtrl=new c.NI(!1),this.haveSpecificationsCtrl=new c.NI(!1),this.haveGuarantyCtrl=new c.NI(!1),this.productId=null,this.products$=(0,N.of)([]),this.searchInputControl=new c.NI,this.separatorKeysCodes=[et.K5,et.OC],this.selectedProduct=new rt,this.tagsEditMode=!1,this.thumbnail="",this.uoms=[],this.uoms$=(0,N.of)(null),this.quillModules={toolbar:[[{font:[]}],[{color:[]}],[{align:[]}],["bold","italic","underline"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{size:["small",!1,"large","huge"]}]]},this.showSize=!1,this.sizes=["S","M","L","XL"],this.sizesCtrl=new c.NI(["M"]),this.showColor=!1,this.colors=[],this.defaultColors=["#e9182d","#f78da7","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b"],this.variants=[],this._unsubscribeAll=new F.x,this._filter=(Po,Uo)=>{const Qo=Uo.toLowerCase();return Po.filter(qo=>qo.name.toLowerCase().trim().includes(Qo))},this.types=[{value:"standard",label:"Est\xe1ndar",details:"Producto que no tiene variantes.",active:!0,tooltip:"Seleccionar"},{value:"generic",label:"Gen\xe9rico",details:"Producto que re\xfane variantes.",active:!0,tooltip:"Seleccionar"},{value:"group",label:"Combo",details:"Agrupaci\xf3n de productos.",active:!1,tooltip:"Pr\xf3ximamente"}]}ngOnInit(){this.categoriesFiltered$=this.store.select(b),this.store.select(b).pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.categories=e,this._changeDetectorRef.markForCheck()}),this.productForm=this._formBuilder.group({id:[""],type:["standard",[c.kI.required]],categoryId:["",[c.kI.required]],name:["",[c.kI.required,c.kI.minLength(3),c.kI.maxLength(255)]],description:["",[c.kI.maxLength(1e4)]],brandId:["",[c.kI.required]],currencyId:["",[c.kI.required]],uomId:["",[c.kI.required]],thumbnail:["",[c.kI.required]],sku:[""],upc:[""],tags:[[]],cost:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],discount:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],tax:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],price:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],stock:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],stockMin:[0,[c.kI.required,c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],length:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],width:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],height:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],weight:[0,[c.kI.min(0),c.kI.max(999999999),c.kI.maxLength(9)]],specifications:[""],guaranty:[""],active:[!0],isPerishable:[!1],isService:[!1],isDigital:[!1]}),this.variantForm=this._formBuilder.group({sku:new c.NI(""),size:new c.NI,color:new c.NI,price:new c.NI,stock:new c.NI}),this._activatedRoute.params.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({productId:e})=>{this.productId=e,"new"!==this.productId&&(this.editMode=!0,this.store.select(B.Fn).pipe((0,m.R)(this._unsubscribeAll)).subscribe(n=>{this.selectedProduct=n,this.variants=n.variants,n.variants.length>0&&(null!==n.variants[0].color&&(this.showColor=!0,this.haveColorCtrl.setValue(!0)),null!==n.variants[0].size&&(this.showSize=!0,this.haveSizeCtrl.setValue(!0))),""!==n.specifications&&this.haveSpecificationsCtrl.setValue(!0),""!==n.guaranty&&this.haveGuarantyCtrl.setValue(!0),this.productForm.patchValue(n),this.variants=[...n.variants],this.images=this.selectedProduct.images})),this._changeDetectorRef.markForCheck()}),this.store.select(yt.zd).pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.currencies=e,this._changeDetectorRef.markForCheck()}),this.uoms$=this.store.select(Y),this.uoms$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.uoms=e,this._changeDetectorRef.markForCheck()}),this.store.select(L).pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.brands=e,this._changeDetectorRef.markForCheck()}),this.store.select(B.a0).pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.tags=e,this.filteredTags=e,this._changeDetectorRef.markForCheck()}),this.categoriesFiltered$=this.productForm.get("categoryId").valueChanges.pipe((0,Tt.O)(""),(0,Z.U)(e=>this._filterCategories(e.trim()||"")))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectType(e){"group"!==e&&this.productForm.get("type").setValue(e)}resetCategoryField(){this.productForm.get("general.categoryId").reset(),this.categoriesFiltered$=this.store.select(b)}selectShowSize(e){this.showSize=e.checked,this._changeDetectorRef.markForCheck()}addSize(e){const n=(e.value||"").trim();this.sizes.indexOf(n.toUpperCase())>=0?e.chipInput.clear():(n&&this.sizes.push(n),e.chipInput.clear(),this._changeDetectorRef.markForCheck())}removeSize(e){const n=this.sizes.indexOf(e);n>=0&&this.sizes.splice(n,1)}selectShowColor(e){this.showColor=e.checked,this._changeDetectorRef.markForCheck()}addColor({color:e}){this.colors.indexOf(e.hex)>=0||(e.hex&&this.colors.push(e.hex),this._changeDetectorRef.markForCheck())}removeColor(e){const n=this.colors.indexOf(e);n>=0&&this.colors.splice(n,1)}addVariant(){const e=this.variantForm.getRawValue();this.variants.indexOf(e)>=0||(e&&this.variants.push(e),this.variantForm.reset(),this._changeDetectorRef.markForCheck())}removeVariant(e){const n=this.variants.indexOf(e);n>=0&&this.variants.splice(n,1),this._changeDetectorRef.markForCheck()}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(e){const n=e.target.value.toLowerCase();this.filteredTags=this.tags.filter(i=>i.name.toLowerCase().includes(n))}filterTagsInputKeyDown(e){if("Enter"!==e.key)return;if(0===this.filteredTags.length)return this.createTag(e.target.value),void(e.target.value="");const n=this.filteredTags[0];this.selectedProduct.tags.find(a=>a===n.id)?this.removeTagFromProduct(n):this.addTagToProduct(n)}createTag(e){this._productsService.createTag({active:!0,name:e}).subscribe(({data:i})=>{this.addTagToProduct(i.createTag.tag),this._changeDetectorRef.markForCheck()})}updateTagName(e,n){e.name=n.target.value,setTimeout(()=>{this._productsService.updateTag(e).pipe((0,ot.b)(300)).subscribe(()=>{this._changeDetectorRef.markForCheck()})},1e3)}deleteTag(e){this._productsService.deleteTag(e.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToProduct(e){const n=(0,D.cloneDeep)(this.selectedProduct);n.tags.unshift(e.id),this.productForm.get("tags").patchValue(n.tags),this._changeDetectorRef.markForCheck()}removeTagFromProduct(e){const n=this.productForm.getRawValue();n.tags.splice(n.tags.findIndex(i=>i===e.id),1),this.productForm.get("tags").patchValue(n.tags),this._changeDetectorRef.markForCheck()}toggleProductTag(e,n){n.checked?this.addTagToProduct(e):this.removeTagFromProduct(e)}shouldShowCreateTagButton(e){return!(""===e||this.tags.findIndex(n=>n.name.toLowerCase()===e.toLowerCase())>-1)}createProduct(){const e=this.productForm.getRawValue();delete e.id,"generic"===e.type&&(delete e.stock,delete e.price),e.categoryId=this._findCategoryId(e.categoryId),e.haveColor=this.showColor,e.haveSize=this.showSize,e.variants=this.variants,console.log({product:e}),this._fuseConfirmationService.open({title:"Crear familia de productos",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._productsService.createProduct(e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:a})=>{this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:a.createProduct.message,type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/modules/stock/panels/products")}),this._changeDetectorRef.markForCheck()})}updateProduct(){const e=this.productForm.getRawValue();e.variants=this.variants,"generic"===e.type&&(delete e.stock,delete e.price),e.categoryId=this.selectedProduct.categoryId,this._fuseConfirmationService.open({title:"Actualizar Producto",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._productsService.updateProduct(e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:a})=>{this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:a.updateProduct.message,type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/modules/stock/panels/products")}),this._changeDetectorRef.markForCheck()})}showFlashMessage(e){this.flashMessage=e,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(e,n){return n.id||e}displayFn(e){let n="";if(void 0!==this.categories)for(const i of this.categories){const a=i.children.find(s=>s.id===e);if(a){n=a.name;break}}return n}selectFiles(e,n){0!==e.target.files.length&&this._openCropperDialog(e,n)}_checkOnSaleQty(e,n){return i=>{const a=i.get(e),s=i.get(n);if(!a||!s||(s.hasError("invalid")&&(delete s.errors.invalid,s.updateValueAndValidity()),a.value>=s.value))return null;const d={invalid:"La cantidad en venta no debe ser mayor a la disponible"};return s.setErrors(d),d}}_filterCategories(e){return e?this.categories.map(n=>({id:n.id,active:n.active,name:n.name,children:this._filter(n.children,e)})).filter(n=>n.children.length>0):this.categories}_findCategoryId(e){console.log({categoryName:e});let n="";for(const i of this.categories){const a=i.children.find(s=>s.name.trim().toLowerCase()===e.trim().toLowerCase());if(a){n=a.id;break}}return n}_findCategoryName(e){let n="";for(const i of this.categories){const a=i.children.find(s=>s.id===e);if(a){n=a.name;break}}return n}_uploadFile(e,n){this._imagesService.uploadImage("products",e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(i=>{const a=(0,D.cloneDeep)(this.selectedProduct);if(delete a.brand,delete a.uom,delete a.currency,delete a.merchantId,"thumbnail"===n&&(a.thumbnail=i.data.secure_url,a.thumbnailCode=i.data.public_id),"images"===n){const s=[...a.images,i.data.secure_url];a.images=s;const d=[...a.imagesCode,i.data.public_id];a.imagesCode=d}this._productsService.updateProduct(a).subscribe(()=>{this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:i.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}_openCropperDialog(e,n){this._dialog.open(It.u,{data:{image:e},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(a=>{this._uploadFile(a,n)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.gz),t.Y36(t.sBO),t.Y36(T.uw),t.Y36(c.qu),t.Y36(ct.R),t.Y36(st.C),t.Y36(H.s),t.Y36(R.ux),t.Y36(g.F0),t.Y36(_.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["stock-product-detail"]],decls:122,vars:64,consts:[["cdkScrollable","",1,"flex","flex-col","p-3","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-cover","dark:bg-transparent","overflow-y-auto","gap-5"],[1,"z-20","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:px-5","bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],["routerLink","/modules/stock/panels/products",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[4,"ngIf"],[1,"flex","flex-auto"],[1,"w-full",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","sm:grid-cols-4","gap-3"],[1,"sm:col-span-3","flex","flex-col","bg-card","shadow-md","rounded-md","p-3","gap-3"],[1,"font-semibold","text-xl"],[1,"grid","sm:grid-cols-3","gap-6","w-full"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","mt-5","gap-3"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript","col-span-2"],["matInput","","type","text","minlength","3","maxlength","255","required","",3,"formControlName"],["svgIcon","mat_solid:search","matPrefix",""],["type","text","matInput","","formControlName","categoryId","required","",3,"matAutocomplete"],[3,"displayWith"],["categoriesGroup","matAutocomplete"],[3,"label","disabled",4,"ngFor","ngForOf"],[3,"formControlName"],[4,"ngFor","ngForOf"],[3,"formControlName","required","placeholder"],[3,"value",4,"ngFor","ngForOf"],["value",""],[1,"w-full","sm:col-span-4"],["matInput","","matTextareaAutosize","","maxlength","10000",3,"formControlName","rows"],[1,"text-right"],[1,"flex","flex-col","bg-card","shadow-md","rounded-md","p-3","gap-3"],[1,"flex","items-center","justify-center","flex-auto","max-h-40"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-md","ring-4","ring-bg-card"],[1,"absolute","inset-0","z-10","bg-slate-300","bg-opacity-50"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],[3,"color","formControlName"],[3,"color","formControl"],[1,"flex","flex-col"],[1,"mb-px","font-semibold","text-xl","leading-tight"],[1,"mt-1.5","rounded-md","border","border-gray-300","dark:border-gray-500","shadow-sm","overflow-hidden"],[1,"flex","items-center","px-3","py-2","-my-px"],[1,"flex","items-center","flex-auto","min-w-0"],[1,"icon-size-5",3,"svgIcon"],["type","text","placeholder","Buscar",1,"min-w-0","py-1","ml-2","border-0",3,"minLength","maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"w-8","h-8","ml-3","min-h-8",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"overflow-y-auto","leading-none","border-t","border-gray-300","h-32","dark:border-gray-500"],["class","flex items-center h-10 min-h-8 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer border-t hover:bg-gray-50 dark:hover:bg-hover","matRipple","",3,"click",4,"ngIf"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"relative","flex","flex-col","items-start","justify-start","p-3","rounded-md","border",3,"ngClass","matTooltip","click"],[1,"font-semibold"],[1,"mt-1","whitespace-normal","text-secondary"],[1,"flex-auto"],[1,"absolute","top-0","right-0","mt-3","mr-3","icon-size-7","text-primary",3,"svgIcon"],[3,"label","disabled"],[3,"value"],["svgIcon","mat_solid:cancel","matSuffix","",1,"cursor-pointer",3,"click"],["matInput","","type","text","minlength","3","maxlength","255",3,"formControlName"],["matTooltip","C\xf3digo de barras",1,"w-full","fuse-mat-dense","fuse-mat-no-subscript","col-span-2"],[1,"w-full","fuse-mat-dense","fuse-mat-no-subscript"],["matInput","","type","number","min","0","max","999999999","maxlength","50","required","",3,"formControlName"],["matPrefix","","svgIcon","mat_solid:attach_money"],["matInput","","type","number","min","0","max","999999999","maxlength","9",3,"formControlName"],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName"],["matPrefix","","svgIcon","mat_solid:square_foot"],["matPrefix","","svgIcon","mat_solid:scale"],[1,"flex","flex-col","w-full","gap-5","sm:col-span-4"],[1,"h-full",3,"formControlName","styles","modules"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["thumbnailFileInput",""],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","h-10","px-4","min-h-8",3,"color","checked","change"],[1,"p-4","space-y-2"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],["matRipple","",1,"flex","items-center","h-10","min-h-8","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","border-t","hover:bg-gray-50","dark:hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"sm:col-span-4","w-full","flex","flex-col","bg-card","shadow-md","rounded-md","p-3","gap-3"],[1,"text-xl","font-semibold"],[1,"flex","flex-row","flex-wrap","gap-2","mt-2"],[3,"formControl","change"],[1,"flex","flex-row","mt-5"],["appearance","fill",1,"flex","flex-col","w-full"],["placeholder","Agregar talla...",1,"w-full",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["aria-label","Agregar talla",3,"formControl"],["sizesChipGrid",""],[3,"removed",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove","",1,"w-5","h-5",3,"aria-label"],[1,"flex","flex-col","gap-5","mt-5"],[1,"flex","flex-row","gap-5"],[3,"colors","onChange"],["aria-label","Colores"],[1,"w-5","h-5","rounded-full"],[1,"flex","flex-col","pt-5","mt-5","border-t"],["autocomplete","off",1,"grid","items-center","gap-4","px-6","py-3","border-b","variant-form-grid","md:px-8",3,"formGroup"],[1,"w-full","text-center"],["matInput","","type","text","maxlength","255",3,"formControlName"],[1,"w-full","text-right"],["matInput","","type","number","min","0","max","999999999","required","",3,"formControlName"],["mat-icon-button","","color","primary","matTooltip","Agregar Variante",3,"disabled","ngClass","click"],[4,"ngIf","ngIfElse"],["noVariants",""],[3,"formControlName","required"],[1,"inline-flex","items-center","gap-5"],[1,"rounded-full","h-7","w-7"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","variants-grid","md:px-8"],[1,"truncate"],[1,"text-center","truncate"],["mat-icon-button","","color","warn","matTooltip","Quitar Variante",3,"click"],[1,"flex","justify-center","w-full"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",5),t._UZ(9,"mat-icon",6),t.TgZ(10,"a",7),t._uU(11,"Productos"),t.qZA()(),t.TgZ(12,"div",5),t._UZ(13,"mat-icon",6),t.TgZ(14,"a",8),t._uU(15,"Listado"),t.qZA()(),t.TgZ(16,"div",5),t._UZ(17,"mat-icon",6),t.TgZ(18,"a",9),t._uU(19),t.qZA()()()()(),t.TgZ(20,"div",10),t.YNc(21,Ut,5,5,"ng-container",11),t.YNc(22,Qt,5,5,"ng-container",11),t.qZA()(),t.TgZ(23,"div",12)(24,"form",13)(25,"div",14)(26,"div",15)(27,"div",16),t._uU(28," Informaci\xf3n General "),t.qZA(),t.TgZ(29,"div",17),t.YNc(30,Jt,8,9,"ng-container",18),t.qZA(),t.TgZ(31,"div",19)(32,"mat-form-field",20)(33,"mat-label"),t._uU(34,"Nombre"),t.qZA(),t._UZ(35,"input",21),t.YNc(36,Nt,2,0,"mat-error",11),t.YNc(37,Dt,2,0,"mat-error",11),t.qZA(),t.TgZ(38,"mat-form-field",20)(39,"mat-label"),t._uU(40,"Categor\xeda"),t.qZA(),t._UZ(41,"mat-icon",22)(42,"input",23),t.TgZ(43,"mat-autocomplete",24,25),t.YNc(45,Bt,2,3,"mat-optgroup",26),t.ALo(46,"async"),t.qZA(),t.YNc(47,Yt,2,0,"ng-container",11),t.YNc(48,Rt,2,0,"mat-error",11),t.qZA(),t.YNc(49,Et,5,1,"ng-container",11),t.YNc(50,Ot,5,1,"ng-container",11),t.TgZ(51,"mat-form-field",20)(52,"mat-label"),t._uU(53,"Marca"),t.qZA(),t.TgZ(54,"mat-select",27),t.YNc(55,Mt,3,2,"ng-container",28),t.qZA(),t.YNc(56,zt,2,0,"mat-error",11),t.qZA(),t.TgZ(57,"mat-form-field",20)(58,"mat-label"),t._uU(59,"Moneda"),t.qZA(),t.TgZ(60,"mat-select",29),t.YNc(61,$t,2,2,"mat-option",30),t.qZA(),t.YNc(62,jt,2,0,"mat-error",11),t.qZA(),t.TgZ(63,"mat-form-field",20)(64,"mat-label"),t._uU(65,"Unidad de Medida"),t.qZA(),t.TgZ(66,"mat-select",27)(67,"mat-option",31),t._uU(68,"Seleccione la unidad de medida"),t.qZA(),t.YNc(69,Gt,3,2,"ng-container",28),t.qZA(),t.YNc(70,Ht,2,0,"mat-error",11),t.qZA(),t.YNc(71,Xt,32,9,"ng-container",11),t.YNc(72,te,22,4,"ng-container",11),t.TgZ(73,"mat-form-field",32)(74,"mat-label"),t._uU(75,"Descripci\xf3n"),t.qZA(),t._UZ(76,"textarea",33),t.TgZ(77,"mat-hint",34),t._uU(78),t.qZA()(),t.YNc(79,ee,5,4,"ng-container",11),t.YNc(80,oe,5,4,"ng-container",11),t.qZA()(),t.TgZ(81,"div",35)(82,"div",16),t._uU(83," Imagen "),t.qZA(),t.TgZ(84,"div",36)(85,"div",37),t._UZ(86,"div",38),t.TgZ(87,"div",39),t.YNc(88,ne,5,3,"div",11),t.YNc(89,ie,3,1,"div",11),t.qZA(),t.YNc(90,re,1,1,"img",40),t.qZA()(),t.TgZ(91,"div",16),t._uU(92," Opciones "),t.qZA(),t.TgZ(93,"mat-slide-toggle",41),t._uU(94,"\xbfEst\xe1 activo?"),t.qZA(),t.TgZ(95,"mat-slide-toggle",41),t._uU(96,"\xbfEs perecedero? "),t.qZA(),t.TgZ(97,"mat-slide-toggle",41),t._uU(98,"\xbfEs un servicio? "),t.qZA(),t.TgZ(99,"mat-slide-toggle",41),t._uU(100,"\xbfEs digital? "),t.qZA(),t.TgZ(101,"mat-slide-toggle",42),t._uU(102,"\xbfTiene garant\xeda? "),t.qZA(),t.TgZ(103,"mat-slide-toggle",42),t._uU(104,"\xbfTiene especificaciones? "),t.qZA(),t.TgZ(105,"div",43)(106,"span",44),t._uU(107,"Etiquetas"),t.qZA(),t.TgZ(108,"div",45)(109,"div",46)(110,"div",47),t._UZ(111,"mat-icon",48),t.TgZ(112,"input",49,50),t.NdJ("input",function(a){return n.filterTags(a)})("keydown",function(a){return n.filterTagsInputKeyDown(a)}),t.qZA()(),t.TgZ(114,"button",51),t.NdJ("click",function(){return n.toggleTagsEditMode()}),t.YNc(115,ae,1,1,"mat-icon",52),t.YNc(116,ce,1,1,"mat-icon",52),t.qZA()(),t.TgZ(117,"div",53),t.YNc(118,le,2,2,"ng-container",11),t.YNc(119,me,3,2,"ng-container",11),t.YNc(120,ue,7,2,"div",54),t.qZA()()()(),t.YNc(121,Ae,15,5,"ng-container",11),t.qZA()()()()),2&e){const i=t.MAs(44),a=t.MAs(113);t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(2),t.Oqu("new"===n.productId?"Crear Producto":n.selectedProduct.name),t.xp6(2),t.Q6J("ngIf",!n.editMode),t.xp6(1),t.Q6J("ngIf",n.editMode),t.xp6(2),t.Q6J("formGroup",n.productForm)("autocomplete","off"),t.xp6(6),t.Q6J("ngForOf",n.types)("ngForTrackBy",n.trackByFn),t.xp6(5),t.Q6J("formControlName","name"),t.xp6(1),t.Q6J("ngIf",n.productForm.get("name").hasError("required")),t.xp6(1),t.Q6J("ngIf",n.productForm.get("name").hasError("minlength")||n.productForm.get("name").hasError("maxlength")),t.xp6(5),t.Q6J("matAutocomplete",i),t.xp6(1),t.Q6J("displayWith",n.displayFn.bind(n)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(46,62,n.categoriesFiltered$)),t.xp6(2),t.Q6J("ngIf",n.productForm.get("categoryId").value),t.xp6(1),t.Q6J("ngIf",n.productForm.get("categoryId").hasError("required")),t.xp6(1),t.Q6J("ngIf","standard"===n.productForm.get("type").value),t.xp6(1),t.Q6J("ngIf","standard"===n.productForm.get("type").value),t.xp6(4),t.Q6J("formControlName","brandId"),t.xp6(1),t.Q6J("ngForOf",n.brands),t.xp6(1),t.Q6J("ngIf",n.productForm.get("brandId").hasError("required")),t.xp6(4),t.Q6J("formControlName","currencyId")("required",!0)("placeholder","Moneda"),t.xp6(1),t.Q6J("ngForOf",n.currencies),t.xp6(1),t.Q6J("ngIf",n.productForm.get("currencyId").hasError("required")),t.xp6(4),t.Q6J("formControlName","uomId"),t.xp6(3),t.Q6J("ngForOf",n.uoms),t.xp6(1),t.Q6J("ngIf",n.productForm.get("uomId").hasError("required")),t.xp6(1),t.Q6J("ngIf","generic"!==n.productForm.get("type").value),t.xp6(1),t.Q6J("ngIf","generic"!==n.productForm.get("type").value),t.xp6(4),t.Q6J("formControlName","description")("rows",1),t.xp6(2),t.hij("Total de caracteres ",n.descriptionLength," / 10000 "),t.xp6(1),t.Q6J("ngIf",n.haveSpecificationsCtrl.value),t.xp6(1),t.Q6J("ngIf",n.haveGuarantyCtrl.value),t.xp6(8),t.Q6J("ngIf",!n.productForm.get("thumbnail").value),t.xp6(1),t.Q6J("ngIf",n.productForm.get("thumbnail").value),t.xp6(1),t.Q6J("ngIf",n.productForm.get("thumbnail").value),t.xp6(3),t.Q6J("color","primary")("formControlName","active"),t.xp6(2),t.Q6J("color","primary")("formControlName","isPerishable"),t.xp6(2),t.Q6J("color","primary")("formControlName","isService"),t.xp6(2),t.Q6J("color","primary")("formControlName","isDigital"),t.xp6(2),t.Q6J("color","primary")("formControl",n.haveGuarantyCtrl),t.xp6(2),t.Q6J("color","primary")("formControl",n.haveSpecificationsCtrl),t.xp6(8),t.Q6J("svgIcon","mat_solid:search"),t.xp6(1),t.Q6J("minLength",3)("maxLength",50),t.xp6(3),t.Q6J("ngIf",!n.tagsEditMode),t.xp6(1),t.Q6J("ngIf",n.tagsEditMode),t.xp6(2),t.Q6J("ngIf",!n.tagsEditMode),t.xp6(1),t.Q6J("ngIf",n.tagsEditMode),t.xp6(1),t.Q6J("ngIf",n.shouldShowCreateTagButton(a.value)),t.xp6(1),t.Q6J("ngIf","generic"===n.productForm.get("type").value)}},dependencies:[g.yS,p.mk,p.sg,p.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.qQ,c.Fd,c.oH,c.sg,c.u,lt.PQ,dt.XC,dt.ZL,E.ey,E.Nv,O.lW,At.oG,M.qn,M.HS,M.oH,M.qH,J.Hw,k.TO,k.KE,k.bx,k.hX,k.qo,k.R9,mt.Nt,E.wG,wt.gD,ut.Rr,St.gM,Pt.HF,q.g6,p.Ov,p.H9],encapsulation:2,changeDetection:0}),o})(),Se=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["stock-products"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[g.lC],encapsulation:2}),o})();var gt=l(6087),V=l(4847),Pe=l(6451),f=l(3900),Ue=l(6428),Qe=l(8288),qe=l(773);function Fe(o,r){if(1&o&&t._UZ(0,"img",43),2&o){const e=t.oxw().$implicit;t.Q6J("alt","Product thumbnail image")("src",e.thumbnail,t.LSH)}}function Je(o,r){1&o&&(t.TgZ(0,"div",44),t._uU(1," SIN IMAGEN "),t.qZA())}function Ne(o,r){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.sku," ")}}function De(o,r){1&o&&(t.ynx(0),t._UZ(1,"div"),t.BQk())}function Le(o,r){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"currency"),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.gM2(2,1,e.price,"$ ","symbol","1.2-2")," ")}}function Be(o,r){1&o&&(t.ynx(0),t._UZ(1,"div"),t.BQk())}function Ye(o,r){1&o&&(t.TgZ(0,"div",49),t._UZ(1,"div",50),t.qZA())}function Re(o,r){1&o&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function Ee(o,r){1&o&&(t.TgZ(0,"div",53),t._UZ(1,"div",54),t.qZA())}function Oe(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",45),t._uU(2),t.qZA(),t.YNc(3,Ye,2,0,"div",46),t.YNc(4,Re,2,0,"div",47),t.YNc(5,Ee,2,0,"div",48),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.stock," "),t.xp6(1),t.Q6J("ngIf",e.stock<20),t.xp6(1),t.Q6J("ngIf",e.stock>=20&&e.stock<30),t.xp6(1),t.Q6J("ngIf",e.stock>=30)}}function Me(o,r){1&o&&(t.ynx(0),t._UZ(1,"div"),t.BQk())}function ze(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-slide-toggle",55),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw(),s=a.$implicit,d=a.index,u=t.oxw(4);return t.KtG(u.updateProductStatus(i,s,d))}),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("checked",e.active)("color","primary")}}function $e(o,r){1&o&&(t.ynx(0),t._UZ(1,"mat-spinner",56),t.BQk()),2&o&&(t.xp6(1),t.Q6J("diameter",20)("color","primary"))}function je(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.deleteProduct(i.id))}),t._UZ(2,"mat-icon",42),t.qZA(),t.BQk()}2&o&&(t.xp6(2),t.Q6J("svgIcon","mat_solid:delete"))}function Ge(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(4);return t.KtG(a.toggleVariants(i))}),t._UZ(2,"mat-icon",42),t.qZA(),t.BQk()}if(2&o){const e=t.oxw().$implicit,n=t.oxw(4);t.xp6(2),t.Q6J("svgIcon",(null==n.selectedProduct?null:n.selectedProduct.id)===e.id?"mat_solid:expand_more":"mat_solid:expand_less")}}function He(o,r){1&o&&t.GkF(0)}const Ke=function(o){return{$implicit:o}};function Ve(o,r){if(1&o&&(t.ynx(0),t.YNc(1,He,1,0,"ng-container",58),t.BQk()),2&o){const e=t.oxw().$implicit;t.oxw(4);const n=t.MAs(31);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,Ke,e))}}function We(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",30)(2,"div",31)(3,"div",32),t.YNc(4,Fe,1,2,"img",33),t.YNc(5,Je,2,0,"div",34),t.qZA()(),t.TgZ(6,"div",35),t.YNc(7,Ne,2,1,"ng-container",20),t.YNc(8,De,2,0,"ng-container",20),t.qZA(),t.TgZ(9,"div",35),t._uU(10),t.qZA(),t.TgZ(11,"div",36),t.YNc(12,Le,3,6,"ng-container",20),t.YNc(13,Be,2,0,"ng-container",20),t.qZA(),t.TgZ(14,"div",37),t.YNc(15,Oe,6,4,"ng-container",20),t.YNc(16,Me,2,0,"ng-container",20),t.qZA(),t.TgZ(17,"div",38),t._uU(18),t.qZA(),t.TgZ(19,"div",39),t.YNc(20,ze,2,2,"ng-container",20),t.YNc(21,$e,2,2,"ng-container",20),t.qZA(),t.TgZ(22,"div",40)(23,"button",41),t._UZ(24,"mat-icon",42),t.qZA(),t.YNc(25,je,3,1,"ng-container",20),t.YNc(26,Ge,3,1,"ng-container",20),t.qZA()(),t.TgZ(27,"div",24),t.YNc(28,Ve,2,4,"ng-container",20),t.qZA(),t.BQk()),2&o){const e=r.$implicit,n=r.index,i=t.oxw(4);t.xp6(3),t.Q6J("routerLink","/modules/stock/panels/product-images/"+e.id),t.xp6(1),t.Q6J("ngIf",e.thumbnail),t.xp6(1),t.Q6J("ngIf",!e.thumbnail),t.xp6(2),t.Q6J("ngIf","standard"===e.type),t.xp6(1),t.Q6J("ngIf","generic"===e.type),t.xp6(2),t.hij(" ",e.name," "),t.xp6(2),t.Q6J("ngIf","standard"===e.type),t.xp6(1),t.Q6J("ngIf","generic"===e.type),t.xp6(2),t.Q6J("ngIf","standard"===e.type),t.xp6(1),t.Q6J("ngIf","generic"===e.type),t.xp6(2),t.hij(" ",e.salesQty," "),t.xp6(2),t.Q6J("ngIf",!(i.isSlideLoading&&i.selectedSlide===n)),t.xp6(1),t.Q6J("ngIf",i.isSlideLoading&&i.selectedSlide===n),t.xp6(2),t.Q6J("routerLink","/modules/stock/panels/product/"+e.id),t.xp6(1),t.Q6J("svgIcon","mat_solid:edit"),t.xp6(1),t.Q6J("ngIf",0===e.variants.length),t.xp6(1),t.Q6J("ngIf","generic"===e.type),t.xp6(2),t.Q6J("ngIf",(null==i.selectedProduct?null:i.selectedProduct.id)===e.id)}}function Xe(o,r){if(1&o&&(t.ynx(0),t.YNc(1,We,29,18,"ng-container",29),t.BQk()),2&o){const e=r.ngIf,n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",n.trackByFn)}}const to=function(o){return{"pointer-events-none":o}},eo=function(){return[5,10,25,100]};function oo(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",24)(2,"div",25),t._UZ(3,"div"),t.TgZ(4,"div",26),t._uU(5," SKU "),t.qZA(),t.TgZ(6,"div",27),t._uU(7," Nombre "),t.qZA(),t.TgZ(8,"div",27),t._uU(9," Precio "),t.qZA(),t.TgZ(10,"div",27),t._uU(11," Stock "),t.qZA(),t.TgZ(12,"div",27),t._uU(13," Unidades Vendidas "),t.qZA(),t.TgZ(14,"div",26),t._uU(15," Activo "),t.qZA(),t.TgZ(16,"div",26),t._uU(17,"Detalles"),t.qZA()(),t.YNc(18,Xe,2,2,"ng-container",20),t.ALo(19,"async"),t.qZA(),t._UZ(20,"mat-paginator",28),t.BQk()),2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("mat-sort-header","name"),t.xp6(2),t.Q6J("mat-sort-header","price"),t.xp6(2),t.Q6J("mat-sort-header","stock"),t.xp6(2),t.Q6J("mat-sort-header","salesQty"),t.xp6(6),t.Q6J("ngIf",t.lcZ(19,11,e.products$)),t.xp6(2),t.Q6J("ngClass",t.VKq(13,to,e.isLoading))("length",e.pagination.length)("page",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.DdM(15,eo))("showFirstLastButtons",!0)}}function no(o,r){if(1&o&&(t.ynx(0),t.YNc(1,oo,21,16,"ng-container",23),t.BQk()),2&o){const e=r.ngIf;t.oxw();const n=t.MAs(33);t.xp6(1),t.Q6J("ngIf",e.length>0)("ngIfElse",n)}}function io(o,r){1&o&&(t.TgZ(0,"div",49),t._UZ(1,"div",50),t.qZA())}function ro(o,r){1&o&&(t.TgZ(0,"div",51),t._UZ(1,"div",52),t.qZA())}function ao(o,r){1&o&&(t.TgZ(0,"div",53),t._UZ(1,"div",54),t.qZA())}function co(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"div",62)(2,"div",26),t._uU(3),t.qZA(),t.TgZ(4,"div",26),t._uU(5),t.qZA(),t.TgZ(6,"div",26),t._uU(7),t.qZA(),t.TgZ(8,"div",26),t._uU(9),t.qZA(),t.TgZ(10,"div",26),t._uU(11),t.ALo(12,"number"),t.qZA(),t.TgZ(13,"div",63),t._uU(14),t.YNc(15,io,2,0,"div",46),t.YNc(16,ro,2,0,"div",47),t.YNc(17,ao,2,0,"div",48),t.qZA()(),t.BQk()),2&o){const e=r.$implicit,n=r.index;t.xp6(3),t.hij(" ",n+1," "),t.xp6(2),t.hij(" ",e.sku||"Sin SKU"," "),t.xp6(2),t.hij(" ",e.size||"Sin Talla"," "),t.xp6(2),t.hij(" ",e.color||"Sin Color"," "),t.xp6(2),t.hij(" ",t.xi3(12,9,e.price,"1.2-2")," "),t.xp6(3),t.hij(" ",e.stock," "),t.xp6(1),t.Q6J("ngIf",e.stock<20),t.xp6(1),t.Q6J("ngIf",e.stock>=20&&e.stock<30),t.xp6(1),t.Q6J("ngIf",e.stock>=30)}}function so(o,r){if(1&o&&(t.TgZ(0,"div",59)(1,"div",60)(2,"div",26),t._uU(3," Variante "),t.qZA(),t.TgZ(4,"div",26),t._uU(5," SKU "),t.qZA(),t.TgZ(6,"div",26),t._uU(7," Talla "),t.qZA(),t.TgZ(8,"div",26),t._uU(9," Color "),t.qZA(),t.TgZ(10,"div",26),t._uU(11," Precio "),t.qZA(),t.TgZ(12,"div",26),t._uU(13," Stock "),t.qZA()(),t.YNc(14,co,18,12,"ng-container",61),t.qZA()),2&o){const e=r.$implicit;t.xp6(14),t.Q6J("ngForOf",e.variants)}}function lo(o,r){1&o&&(t.TgZ(0,"div",64),t._uU(1,"\xa1No se ha creado ning\xfan producto!"),t.qZA())}let mo=(()=>{class o{constructor(e,n,i,a,s,d){this._changeDetectorRef=e,this._fuseConfirmationService=n,this._formBuilder=i,this._productsService=a,this._snackBar=s,this.store=d,this.isLoading=!1,this.products$=(0,N.of)([]),this.searchInputControl=new c.p4,this.selectedProduct=null,this.isSlideLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new F.x}ngOnInit(){this.store.select(Ue.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.products$=this.store.select(B.nR),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,ot.b)(300),(0,f.w)(e=>(this.isLoading=!0,this._productsService.getProducts(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,e))),(0,Z.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,Pe.T)(this._sort.sortChange,this._paginator.page).pipe((0,f.w)(()=>(this.isLoading=!0,this._productsService.getProducts(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,Z.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}toggleVariants(e){this.selectedProduct&&this.selectedProduct.id===e.id?this.closeDetails():this.selectedProduct=e}closeDetails(){this.selectedProduct=null}deleteProduct(e){this._fuseConfirmationService.open({title:"Eliminar Producto",message:"\xbfEsta seguro que desea eliminar el producto?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._productsService.removeProduct(e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:a})=>{this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:a.removeProduct.message,type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateProductStatus(e,n,i){this.isSlideLoading=!0,this.selectedSlide=i,this._productsService.updateProductStatus({id:n.id,active:e.checked}).subscribe(({data:a})=>{this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateProductStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(e,n){return n.id||e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(ct.R),t.Y36(c.QS),t.Y36(H.s),t.Y36(R.ux),t.Y36(_.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["stock-products-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(gt.NW,5),t.Gf(V.YE,5)),2&e){let i;t.iGM(i=t.CRH())&&(n._paginator=i.first),t.iGM(i=t.CRH())&&(n._sort=i.first)}},decls:34,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"mr-4","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","","routerLink","/modules/stock/panels/product/new",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-auto"],[4,"ngIf"],["rowVariantsTemplate",""],["noProducts",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","inventory-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"text-center"],[1,"text-center",3,"mat-sort-header"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","inventory-grid","md:px-8","overflow-x-auto"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","cursor-pointer","flex-0",3,"routerLink"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"font-mono"],[1,"items-center","justify-center","flex"],[1,"font-mono","text-center"],[1,"flex","justify-center"],[1,"flex","flex-row","flex-wrap","justify-center","gap-1"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[1,"font-mono","min-w-4"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-red-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-orange-200 rounded",4,"ngIf"],["class","flex items-end w-1 h-4 ml-2 overflow-hidden bg-green-100 rounded",4,"ngIf"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-red-200","rounded"],[1,"flex","w-full","bg-red-600","h-1/3"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-orange-200","rounded"],[1,"flex","w-full","bg-orange-400","h-2/4"],[1,"flex","items-end","w-1","h-4","ml-2","overflow-hidden","bg-green-100","rounded"],[1,"flex","w-full","h-full","bg-green-400"],[3,"checked","color","change"],[3,"diameter","color"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","flex-col","w-full","border-b","overflow-hidden"],[1,"z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","variant-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[4,"ngFor","ngForOf"],[1,"grid","items-center","w-full","gap-4","px-6","py-3","border-b","variant-grid","md:px-8"],[1,"flex","items-center","justify-center"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t._uU(6,"Inicio"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"mat-icon",6),t.TgZ(9,"a",7),t._uU(10,"Producto"),t.qZA()(),t.TgZ(11,"div",5),t._UZ(12,"mat-icon",6),t.TgZ(13,"a",8),t._uU(14,"Productos"),t.qZA()()(),t.TgZ(15,"div",9)(16,"h2",10),t._uU(17," Productos "),t.qZA()()(),t.TgZ(18,"div",11)(19,"mat-form-field",12),t._UZ(20,"mat-icon",13)(21,"input",14),t.qZA(),t.TgZ(22,"button",15),t._UZ(23,"mat-icon",16),t.TgZ(24,"span",17),t._uU(25,"Agregar"),t.qZA()()()(),t.TgZ(26,"div",18)(27,"div",19),t.YNc(28,no,2,2,"ng-container",20),t.ALo(29,"async"),t.YNc(30,so,15,1,"ng-template",null,21,t.W1O),t.YNc(32,lo,2,0,"ng-template",null,22,t.W1O),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(8),t.Q6J("svgIcon","mat_solid:search"),t.xp6(1),t.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar productos"),t.xp6(2),t.Q6J("svgIcon","mat_solid:add"),t.xp6(5),t.Q6J("ngIf",t.lcZ(29,8,n.products$)))},dependencies:[g.rH,g.yS,p.mk,p.sg,p.O5,p.tP,c.Fj,c.JJ,c.oH,O.lW,J.Hw,k.KE,k.qo,mt.Nt,gt.NW,qe.Ou,ut.Rr,V.YE,V.nU,p.Ov,p.JJ,p.H9],styles:[".inventory-grid{grid-template-columns:48px 112px auto 112px 112px 112px 72px 150px}\n"],encapsulation:2,data:{animation:Qe.L},changeDetection:0}),o})();var uo=l(1588);let po=(()=>{class o{constructor(e,n,i){this.data=e,this._dialogRef=n,this._snackBar=i,this.imageChangedEvent="",this.croppedImage="",this.imageChangedEvent=e.image}ngOnInit(){}imageCropped(e){this.croppedImage=e.base64}imageLoaded(e){}cropperReady(){}loadImageFailed(){this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Alerta",message:"No se pudo cargar la imagen, int\xe9ntelo nuevamente.",type:"warning",svgIcon:"mat_solid:warning"}}),this._dialogRef.close()}saveImage(){const e=this._croppedImageToFile(this.croppedImage,(0,uo.Z)());this._dialogRef.close(e)}_croppedImageToFile(e,n){const i=e.split(","),a=i[0].match(/:(.*?);/)[1],s=atob(i[1]);let d=s.length;const u=new Uint8Array(d);for(;d--;)u[d]=s.charCodeAt(d);return new File([u],n+"."+a.split("/")[1],{type:a})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(T.WI),t.Y36(T.so),t.Y36(R.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["stock-cropper-image-dialog"]],decls:16,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left","border-b"],["mat-dialog-title",""],[1,"flex","flex-row","items-center","flex-auto","w-full","px-8","pb-6"],[1,"w-1/2"],[3,"imageChangedEvent","maintainAspectRatio","imageCropped","imageLoaded","cropperReady","loadImageFailed"],[1,"flex-","flex-col","w-1/2"],[1,"text-xl","font-semibold","w-full","text-center","mb-2"],[3,"src"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","bg-gray-50"],["mat-button","","mat-dialog-close","",1,"-ml-4","rounded-full",3,"color"],["mat-flat-button","",1,"rounded-full",3,"color","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3,"Ajustar Imagen"),t.qZA()(),t.TgZ(4,"div",3)(5,"div",4)(6,"image-cropper",5),t.NdJ("imageCropped",function(a){return n.imageCropped(a)})("imageLoaded",function(a){return n.imageLoaded(a)})("cropperReady",function(){return n.cropperReady()})("loadImageFailed",function(){return n.loadImageFailed()}),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7),t._uU(9," Resultado "),t.qZA(),t._UZ(10,"img",8),t.qZA()(),t.TgZ(11,"div",9)(12,"button",10),t._uU(13,"Cancelar"),t.qZA(),t.TgZ(14,"button",11),t.NdJ("click",function(){return n.saveImage()}),t._uU(15,"Guardar"),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!0),t.xp6(4),t.Q6J("src",n.croppedImage,t.LSH),t.xp6(2),t.Q6J("color","warn"),t.xp6(2),t.Q6J("color","primary"))},dependencies:[Q.ap,O.lW,T.ZT,T.uh],encapsulation:2}),o})();function go(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",30)(2,"input",31,32),t.NdJ("change",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectFiles(i,"thumbnail"))}),t.qZA(),t.TgZ(4,"label",33)(5,"div",28),t._UZ(6,"mat-icon",29),t.qZA()()(),t.BQk()}2&o&&(t.xp6(2),t.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),t.xp6(4),t.Q6J("svgIcon","mat_solid:add"))}function _o(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",34),t._UZ(2,"img",35),t.TgZ(3,"button",36),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.removeFile(i.selectedProduct.thumbnailCode,"thumbnail"))}),t._UZ(4,"mat-icon",37),t.qZA()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("src",e.selectedProduct.thumbnail,t.LSH)}}function fo(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",39),t._UZ(2,"img",35),t.TgZ(3,"button",36),t.NdJ("click",function(){const a=t.CHM(e).index,s=t.oxw(2);return t.KtG(s.removeFile(s.selectedProduct.imagesCode[a],"images"))}),t._UZ(4,"mat-icon",37),t.qZA()(),t.BQk()}if(2&o){const e=r.$implicit;t.xp6(2),t.Q6J("src",e,t.LSH)}}function ho(o,r){if(1&o&&(t.ynx(0),t.YNc(1,fo,5,1,"ng-container",38),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.selectedProduct.images)}}let xo=(()=>{class o{constructor(e,n,i,a,s,d){this._changeDetectorRef=e,this._dialog=n,this._imagesService=i,this._productsService=a,this._snackBar=s,this.store=d,this.selectedProduct=new rt,this._unsubscribeAll=new F.x}ngOnInit(){this.store.select(B.Fn).pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.selectedProduct=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectFiles(e,n){0!==e.target.files.length&&this._openCropperDialog(e,n)}removeFile(e,n){void 0!==e&&this._imagesService.removeImage(e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(i=>{const a=(0,D.cloneDeep)(this.selectedProduct);if(delete a.brand,delete a.uom,delete a.currency,delete a.merchantId,"thumbnail"===n&&(a.thumbnail=null,a.thumbnailCode=null),"images"===n){const s=[...a.images],d=[...a.imagesCode],u=s.findIndex(v=>v===e);s.splice(u,1),d.splice(u,1),a.images=s,a.imagesCode=d}this._productsService.updateProduct(a).subscribe(({data:s})=>{this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{title:"Confirmaci\xf3n",message:s.updateProduct.message,type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}_uploadFile(e,n){this._imagesService.uploadImage("products",e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(i=>{const a=(0,D.cloneDeep)(this.selectedProduct);if(delete a.brand,delete a.uom,delete a.currency,delete a.merchantId,"thumbnail"===n&&(a.thumbnail=i.data.secure_url,a.thumbnailCode=i.data.public_id),"images"===n){const s=[...a.images,i.data.secure_url];a.images=s;const d=[...a.imagesCode,i.data.public_id];a.imagesCode=d}this._productsService.updateProduct(a).subscribe(()=>{this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:i.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}_openCropperDialog(e,n){this._dialog.open(po,{data:{image:e},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(a=>{this._uploadFile(a,n)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(T.uw),t.Y36(st.C),t.Y36(H.s),t.Y36(R.ux),t.Y36(_.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["stock-product-images"]],decls:47,vars:11,consts:[["cdkScrollable","",1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","bg-card","dark:bg-transparent"],[1,"z-20","flex","flex-col","p-6","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:py-8","sm:px-10","bg-card","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],["routerLink","/desktop",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/modules/stock/panels",1,"ml-1","text-primary-500"],["routerLink","/modules/stock/panels/products",1,"ml-1","text-primary-500"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","","routerLink","/modules/stock/panels/products",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-y-auto"],[1,"flex","flex-col","w-full","p-6","md:p-8","sm:flex-row"],[1,"flex","flex-col","w-full","px-5","border-r","sm:w-1/3"],[1,"font-medium"],[1,"flex","flex-col","items-center","justify-center","h-full"],[4,"ngIf"],[1,"flex","flex-col","w-full","px-5","mt-5","sm:w-2/3","sm:mt-0"],[1,"flex","flex-row","flex-wrap","items-center","justify-center","h-full","mt-5"],[1,"flex","items-center","justify-center"],["id","images-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["imagesFileInput",""],["for","images-file-input","matRipple",""],[1,"flex","flex-col","items-center","justify-center","transition-colors","duration-150","ease-in-out","border-2","border-gray-300","border-dashed","cursor-pointer","w-30","sm:w-40","h-30","sm:h-40","rounded-2xl","hover:bg-hover"],[1,"icon-size-12","text-hint",3,"svgIcon"],[1,"flex","flex-col","items-center","justify-center","mt-5"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["thumbnailFileInput",""],["for","thumbnail-file-input","matRipple",""],[1,"relative","flex","items-center","justify-center","p-4","m-2","overflow-hidden","shadow","w-30","sm:w-40","h-30","sm:h-40","rounded-2xl","bg-card"],[3,"src"],["mat-mini-fab","",1,"absolute","p-5","transition-opacity","ease-linear","delay-200","rounded-full","opacity-70","bg-primary-700","hover:opacity-100",3,"click"],["svgIcon","mat_solid:delete",1,"text-white","icon-size-5"],[4,"ngFor","ngForOf"],[1,"relative","flex","items-center","justify-center","m-2","overflow-hidden","shadow","w-30","sm:w-40","h-30","sm:h-40","sm:p-4","rounded-2xl","bg-card"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div")(6,"a",4),t._uU(7,"Inicio"),t.qZA()(),t.TgZ(8,"div",5),t._UZ(9,"mat-icon",6),t.TgZ(10,"a",7),t._uU(11,"Producto"),t.qZA()(),t.TgZ(12,"div",5),t._UZ(13,"mat-icon",6),t.TgZ(14,"a",8),t._uU(15,"Productos"),t.qZA()(),t.TgZ(16,"div",5),t._UZ(17,"mat-icon",6),t.TgZ(18,"a",9),t._uU(19," Im\xe1genes "),t.qZA()()()(),t.TgZ(20,"div",10)(21,"h2",11),t._uU(22),t.qZA()()(),t.TgZ(23,"div",12)(24,"button",13),t._UZ(25,"mat-icon",14),t.TgZ(26,"span",15),t._uU(27,"Regresar"),t.qZA()()()(),t.TgZ(28,"div",16)(29,"div",17)(30,"div",18)(31,"div",19),t._uU(32,"Imagen principal"),t.qZA(),t.TgZ(33,"div",20),t.YNc(34,go,7,3,"ng-container",21),t.YNc(35,_o,5,1,"ng-container",21),t.qZA()(),t.TgZ(36,"div",22)(37,"div",19),t._uU(38,"Im\xe1genes de apoyo"),t.qZA(),t.TgZ(39,"div",23)(40,"div",24)(41,"input",25,26),t.NdJ("change",function(a){return n.selectFiles(a,"images")}),t.qZA(),t.TgZ(43,"label",27)(44,"div",28),t._UZ(45,"mat-icon",29),t.qZA()()(),t.YNc(46,ho,2,1,"ng-container",21),t.qZA()()()()()),2&e&&(t.xp6(9),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(5),t.hij(" Im\xe1genes de ",n.selectedProduct.name," "),t.xp6(3),t.Q6J("svgIcon","mat_solid:west"),t.xp6(9),t.Q6J("ngIf",!n.selectedProduct.thumbnailCode),t.xp6(1),t.Q6J("ngIf",n.selectedProduct.thumbnailCode),t.xp6(6),t.Q6J("multiple",!1)("accept","image/jpeg, image/jpg, image/webp, image/png"),t.xp6(4),t.Q6J("svgIcon","mat_solid:add"),t.xp6(1),t.Q6J("ngIf",n.selectedProduct.images.length>0))},dependencies:[g.rH,g.yS,p.sg,p.O5,lt.PQ,O.lW,J.Hw,E.wG],encapsulation:2,changeDetection:0}),o})();var y=l(520),h=l(8505),_t=l(4813),x=l(5698),W=l(5714),X=l(2340),A=l(7505);const w=X.N.API_URL;let vo=(()=>{class o{constructor(e,n){this._httpClient=e,this.store=n}getBrands(e=1,n=10,i="name",a="asc",s=""){const d=(new y.LE).append("offset",n*(e-1)).append("limit",n).append("sort",i).append("order",a).append("search",s);return this._httpClient.get(`${w}/brands/`,{params:d}).pipe((0,h.b)(({pagination:u,brands:v})=>{this.store.dispatch((0,W.Jr)({pagination:u})),this.store.dispatch((0,A.dk)({brands:v}))}))}getBrandById(e){return this._httpClient.get(`${w}/brands/${e}`).pipe((0,_t.j)("brand"),(0,h.b)(n=>{this.store.dispatch((0,A.HB)({brand:n}))}))}createBrand(e){return this.store.select(L).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.post(`${w}/brands/`,e).pipe((0,h.b)(i=>{this.store.dispatch((0,A.dk)({brands:[i.brand,...n]}))}))))}updateBrand(e){return this.store.select(L).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.patch(`${w}/brands/${e.id}`,e).pipe((0,Z.U)(i=>([...n][n.findIndex(d=>d.id===e.id)]=i.brand,this.store.dispatch((0,A.dk)({brands:n})),i)))))}deleteBrand(e){return this.store.select(L).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.delete(`${w}/brands/${e}`).pipe((0,Z.U)(i=>{const a=n.findIndex(s=>s.id===e);return n.splice(a,1),this.store.dispatch((0,A.dk)({brands:n})),i}))))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN),t.LFG(_.yh))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Zo=(()=>{class o{constructor(e){this._brandsService=e}resolve(e,n){return this._brandsService.getBrands()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(vo))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var z=l(3402),tt=l(5840);const $=X.N.API_URL;let Co=(()=>{class o{constructor(e,n){this._httpClient=e,this.store=n}getCategories(e=1,n=10,i="name",a="asc",s=""){const d=(new y.LE).append("offset",n*(e-1)).append("limit",n).append("sort",i).append("order",a).append("search",s);return this._httpClient.get(`${$}/categories`,{params:d}).pipe((0,h.b)(({categories:u,pagination:v})=>{this.store.dispatch((0,z.DG)({categories:u})),this.store.dispatch((0,W.Jr)({pagination:v}))}))}createCategory(e){return this.store.select(b).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.post(`${$}/categories/`,e).pipe((0,h.b)(({category:i})=>{this.store.dispatch((0,z.DG)({categories:[i,...n]}))}))))}updateCategory(e){return this.store.select(b).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.patch(`${$}/categories/${e.id}`,e).pipe((0,Z.U)(i=>{const a=(0,tt.Z)(n);return a[n.findIndex(d=>d.id===e.id)]=i.category,this.store.dispatch((0,z.DG)({categories:a})),i}))))}deleteCategory(e){return this.store.select(b).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.delete(`${$}/categories/${e}`).pipe((0,h.b)(()=>{const i=(0,tt.Z)(n),a=n.findIndex(s=>s.id===e);i.splice(a,1),this.store.dispatch((0,z.DG)({categories:i}))}))))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN),t.LFG(_.yh))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),ko=(()=>{class o{constructor(e){this._categoriesService=e}resolve(e,n){return this._categoriesService.getCategories()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Co))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var bo=l(5681),j=l(4380),S=l(4560);const P=X.N.API_URL;let To=(()=>{class o{constructor(e,n){this._httpClient=e,this.store=n}getUoms(e=1,n=10,i="name",a="asc",s=""){const d=(new y.LE).append("offset",n*(e-1)).append("limit",n).append("sort",i).append("order",a).append("search",s);return this._httpClient.get(`${P}/uoms/`,{params:d}).pipe((0,h.b)(({pagination:u,uoms:v})=>{this.store.dispatch((0,W.Jr)({pagination:u})),this.store.dispatch((0,S.u8)({uoms:v}))}))}getUomById(e){return this._httpClient.get(`${P}/uoms/${e}`).pipe((0,_t.j)("uom"),(0,h.b)(n=>{this.store.dispatch((0,S.sh)({uom:n}))}))}createUom(e){return this.store.select(Y).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.post(`${P}/uoms/`,e).pipe((0,h.b)(i=>{this.store.dispatch((0,S.u8)({uoms:[i.uom,...n]}))}))))}updateUom(e){return this.store.select(Y).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.patch(`${P}/uoms/${e.id}`,e).pipe((0,Z.U)(i=>{let a=(0,tt.Z)(n);return a[n.indexOf(e)]=i.uom,this.store.dispatch((0,S.u8)({uoms:a})),i}))))}deleteUom(e){return this.store.select(Y).pipe((0,x.q)(1),(0,f.w)(n=>this._httpClient.delete(`${P}/uoms/${e}`).pipe((0,Z.U)(i=>{const a=n.findIndex(s=>s.id===e);return n.splice(a,1),this.store.dispatch((0,S.u8)({uoms:n})),i}))))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN),t.LFG(_.yh))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Io=[{path:"",pathMatch:"full",redirectTo:"panels"},{path:"panels",component:ht,children:[{path:"",component:bt},{path:"products",component:Se,children:[{path:"",component:mo,resolve:{products:j.SE}}]},{path:"product/:productId",component:we,resolve:{brands:Zo,currencies:bo.Y,categories:ko,product:j.M6,tags:j.Nj,uoms:(()=>{class o{constructor(e){this._uomService=e}resolve(e,n){return this._uomService.getUoms()}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(To))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}},{path:"product-images/:productId",component:xo,resolve:{product:j.M6}}]}];let Ao=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[Q.QG,g.Bz.forChild(Io),I.m,q.fi]}),o})()}}]);