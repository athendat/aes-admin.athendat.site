"use strict";(self.webpackChunkaes_admin=self.webpackChunkaes_admin||[]).push([[198],{810:(Q,A,a)=>{a.d(A,{Y:()=>e});var m=a(5e3),Z=a(3334);let e=(()=>{class f{constructor(u){this._currenciesService=u}resolve(u,C){return this._currenciesService.getCurrencies()}}return f.\u0275fac=function(u){return new(u||f)(m.LFG(Z.t))},f.\u0275prov=m.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},9987:(Q,A,a)=>{a.d(A,{zd:()=>f});var m=a(5094);const Z=h=>h.currencies,f=((0,m.P1)(Z,h=>h.currency),(0,m.P1)(Z,h=>h.currencies))},3334:(Q,A,a)=>{a.d(A,{t:()=>R});var m=a(5698),Z=a(3900),e=a(8505),f=a(5840),h=a(230),u=a(9987),C=a(9784),y=a(3921);const J=y.Ps`
    mutation CreateCurrency($createCurrencyInput: CreateCurrencyInput!) {
        createCurrency(createCurrencyInput: $createCurrencyInput) {

            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }

        }
    }
`,Y=y.Ps`
mutation UpdateCurrency($updateCurrencyInput: UpdateCurrencyInput!) {
    updateCurrency(updateCurrencyInput: $updateCurrencyInput) {
        ok
        message

        currency {
            id
            active
            name
            iso
            symbol
        }
    }
}
`,U=y.Ps`
mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
    updateCurrencyStatus(updateEntityStatusInput: $updateEntityStatusInput)
}
`,b=y.Ps`
mutation RemoveCurrency($removeCurrencyId: String!) {
    removeCurrency(id: $removeCurrencyId)
}
`,k=y.Ps`
    query FindAllCurrencies {
        findAllCurrencies {
            ok
            message

            currencies {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`,N=y.Ps`
    query FindCurrencyById($findCurrencyByIdId: String!) {
        findCurrencyById(id: $findCurrencyByIdId) {
            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`;var T=a(5e3),M=a(7261),E=a(5094);let R=(()=>{class x{constructor(n,l,s){this.apolloProvider=n,this._snackBar=l,this.store=s,this._apollo=this.apolloProvider.use("AES")}createCurrency(n){return this.store.select(u.zd).pipe((0,m.q)(1),(0,Z.w)(l=>this._apollo.mutate({mutation:J,variables:{createCurrencyInput:n},errorPolicy:"all"}).pipe((0,e.b)(({errors:s,data:p})=>{if(s){let d="";s.forEach(v=>d+=`\n ${v.message}.`),this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:d,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const _=(0,f.Z)(l);_.push(p.createCurrency.currency),this.store.dispatch((0,h.HC)({currencies:_}))}))))}getCurrencies(){return this._apollo.query({query:k,errorPolicy:"all"}).pipe((0,e.b)(({errors:n,data:l})=>{if(n){let s="";n.forEach(p=>s+=`\n ${p.message}.`),this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:s,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,h.HC)({currencies:l.findAllCurrencies.currencies}))}))}getCurrencyById(n){return this._apollo.query({query:N,variables:{findCurrencyByIdId:n},errorPolicy:"all"}).pipe((0,e.b)(({errors:l,data:s})=>{if(l){let p="";l.forEach(_=>p+=`\n ${_.message}.`),this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,h.NW)({currency:s.findCurrencyById.currency}))}))}updateCurrency(n){return this.store.select(u.zd).pipe((0,m.q)(1),(0,Z.w)(l=>this._apollo.mutate({mutation:Y,variables:{updateCurrencyInput:n},errorPolicy:"all"}).pipe((0,e.b)(({errors:s,data:p})=>{if(s){let v="";s.forEach(q=>v+=`\n ${q.message}.`),this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:v,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const _=(0,f.Z)(l);_[l.findIndex(v=>v.id===n.id)]=p.updateCurrency.currency,this.store.dispatch((0,h.HC)({currencies:_}))}))))}updateCurrencyStatus(n){return this.store.select(u.zd).pipe((0,m.q)(1),(0,Z.w)(l=>this._apollo.mutate({mutation:U,variables:{updateEntityStatusInput:n},errorPolicy:"all"}).pipe((0,e.b)(({errors:s})=>{if(s){let d="";s.forEach(v=>d+=`\n ${v.message}.`),this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:d,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const p=(0,f.Z)(l);p[l.findIndex(d=>d.id===n.id)].active=n.active,this.store.dispatch((0,h.HC)({currencies:p}))}))))}removeCurrency(n){return this.store.select(u.zd).pipe((0,m.q)(1),(0,Z.w)(l=>this._apollo.mutate({mutation:b,variables:{removeCurrencyId:n},errorPolicy:"all"}).pipe((0,e.b)(({errors:s})=>{if(s){let d="";s.forEach(v=>d+=`\n ${v.message}.`),this._snackBar.openFromComponent(C.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:d,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const p=(0,f.Z)(l),_=l.findIndex(d=>d.id===n);p.splice(_,1),this.store.dispatch((0,h.HC)({currencies:p}))}))))}}return x.\u0275fac=function(n){return new(n||x)(T.LFG(y._M),T.LFG(M.ux),T.LFG(E.yh))},x.\u0275prov=T.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},8198:(Q,A,a)=>{a.r(A),a.d(A,{SettingsModule:()=>Ze});var m=a(5357),Z=a(4576),e=a(5e3);let f=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings"]],decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"router-outlet")},dependencies:[m.lC],encapsulation:2}),o})();var h=a(7579),u=a(2722),C=a(7625),y=a(8288);class J{constructor(c="",t="",r="",i="",g="",F="",B=""){this.name=c,this.address=t,this.city=r,this.state=i,this.country=g,this.phone=F,this.email=B}}var U=a(5094),b=a(9808),k=a(7423),N=a(5245);function T(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"span",11),e._uU(2," Moneda por defecto "),e.qZA(),e.TgZ(3,"span",12),e._uU(4),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(4),e.AsE(" (",t.merchant.currency.iso||"",") ",t.merchant.currency.name||"No definida"," ")}}function M(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"div",18)(2,"span",19),e._uU(3),e.qZA(),e.TgZ(4,"span",12),e._uU(5),e.qZA(),e.TgZ(6,"span",12),e._uU(7),e.qZA()(),e.BQk()),2&o){const t=c.$implicit;e.xp6(3),e.hij(" ",t.bank," "),e.xp6(2),e.hij(" ",t.beneficiary," "),e.xp6(2),e.AsE(" (",t.currency,") ",t.no," ")}}const E=function(){return["/"]},R=function(){return["/settings/merchant-info"]},x=function(){return["/settings/merchant-bank-accounts"]};let P=(()=>{class o{constructor(t,r,i,g){this._activatedRoute=t,this._changeDetectorRef=r,this._router=i,this.store=g,this.merchant=new J,this._unsubscribeAll=new h.x}ngOnInit(){this.store.select(C.Q).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{""===t.name&&this._router.navigateByUrl("settings/merchant-info"),this.merchant=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.gz),e.Y36(e.sBO),e.Y36(m.F0),e.Y36(U.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["merchant"]],decls:63,vars:22,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full","max-w-5xl"],[1,"-ml-4","sm:mt-8"],["mat-button","",3,"routerLink","color"],[3,"svgIcon"],[1,"ml-2"],[1,"mt-2","text-4xl","sm:text-7xl","font-extrabold","tracking-tight","leading-tight"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","grid-flow-row","gap-y-12","sm:gap-x-4","mt-8","sm:mt-12"],[1,"flex","flex-col","items-start"],[1,"flex","items-center","mb-1","text-2xl","font-semibold"],[1,"mt-3","font-medium","text-primary-500"],[1,"font-medium"],[4,"ngIf"],[1,"flex","items-center","mt-5","pl-4","pr-3","py-0.5","rounded-full","cursor-pointer","bg-gray-200","hover:bg-gray-300","dark:bg-gray-800","dark:hover:bg-gray-700",3,"routerLink"],[1,"text-sm","font-medium","text-secondary"],[1,"ml-2","icon-size-5",3,"svgIcon"],[4,"ngFor","ngForOf"],[1,"flex","flex-col","mt-3"],[1,"font-medium","text-primary-500"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"mat-icon",5),e.TgZ(6,"span",6),e._uU(7,"Regresar"),e.qZA()()(),e.TgZ(8,"div",7),e._uU(9," Informaci\xf3n del negocio "),e.qZA(),e.TgZ(10,"div",8)(11,"div",9)(12,"span",10),e._uU(13," Informaci\xf3n General "),e.qZA(),e.TgZ(14,"span",11),e._uU(15," Nombre "),e.qZA(),e.TgZ(16,"span",12),e._uU(17),e.qZA(),e.TgZ(18,"span",11),e._uU(19," NIT "),e.qZA(),e.TgZ(20,"span",12),e._uU(21),e.qZA(),e.TgZ(22,"span",11),e._uU(23," REUPP "),e.qZA(),e.TgZ(24,"span",12),e._uU(25),e.qZA(),e.YNc(26,T,5,2,"ng-container",13),e.TgZ(27,"span",11),e._uU(28," Impuesto sobre las ventas por defecto "),e.qZA(),e.TgZ(29,"span",12),e._uU(30),e.ALo(31,"percent"),e.qZA()(),e.TgZ(32,"div",9)(33,"span",10),e._uU(34," Informaci\xf3n de Contacto "),e.qZA(),e.TgZ(35,"span",11),e._uU(36," Direcci\xf3n "),e.qZA(),e.TgZ(37,"span",12),e._uU(38),e.qZA(),e.TgZ(39,"span",11),e._uU(40," Sitio Web "),e.qZA(),e.TgZ(41,"span",12),e._uU(42),e.qZA(),e.TgZ(43,"span",11),e._uU(44," Tel\xe9fono "),e.qZA(),e.TgZ(45,"span",12),e._uU(46),e.qZA(),e.TgZ(47,"span",11),e._uU(48," Correo electr\xf3nico "),e.qZA(),e.TgZ(49,"span",12),e._uU(50),e.qZA(),e.TgZ(51,"a",14)(52,"span",15),e._uU(53,"Editar"),e.qZA(),e._UZ(54,"mat-icon",16),e.qZA()(),e.TgZ(55,"div",9)(56,"span",10),e._uU(57," Cuentas de Banco "),e.qZA(),e.YNc(58,M,8,4,"ng-container",17),e.TgZ(59,"a",14)(60,"span",15),e._uU(61,"Editar"),e.qZA(),e._UZ(62,"mat-icon",16),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(19,E))("color","primary"),e.xp6(1),e.Q6J("svgIcon","mat_solid:west"),e.xp6(12),e.hij(" ",r.merchant.name||"No definida"," "),e.xp6(4),e.hij(" ",r.merchant.nit||"No definida"," "),e.xp6(4),e.hij(" ",r.merchant.reupp||"No definida"," "),e.xp6(1),e.Q6J("ngIf",r.merchant.currency),e.xp6(4),e.hij(" ",e.lcZ(31,17,r.merchant.tax)||"No definido"," "),e.xp6(8),e.hij(" ",r.merchant.address||"No definida"," "),e.xp6(4),e.hij(" ",r.merchant.website||"No definida"," "),e.xp6(4),e.hij(" ",r.merchant.phone||"No definida"," "),e.xp6(4),e.hij(" ",r.merchant.email||"No definida"," "),e.xp6(1),e.Q6J("routerLink",e.DdM(20,R)),e.xp6(3),e.Q6J("svgIcon","mat_solid:east"),e.xp6(4),e.Q6J("ngForOf",r.merchant.bankAccounts),e.xp6(1),e.Q6J("routerLink",e.DdM(21,x)),e.xp6(3),e.Q6J("svgIcon","mat_solid:east"))},dependencies:[m.yS,b.sg,b.O5,k.zs,N.Hw,b.Zx],encapsulation:2,data:{animation:y.L},changeDetection:0}),o})();var n=a(3075),l=a(7489),s=a(9987),p=a(9784),_=a(1683),d=a(1158),v=a(413),q=a(7261),D=a(9071),w=a(508),j=a(4533),I=a(7322),z=a(8833),L=a(4107);const $=["merchantNgForm"];function G(o,c){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la empresa es obligatorio. "),e.qZA())}function H(o,c){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function W(o,c){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function K(o,c){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el pa\xeds. "),e.qZA())}function X(o,c){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function V(o,c){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar una provincia. "),e.qZA())}function ee(o,c){if(1&o&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t.city),e.xp6(1),e.hij(" ",t.city," ")}}function te(o,c){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un municipio. "),e.qZA())}function ne(o,c){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n del negocio es obligatoria. "),e.qZA())}const re=function(){return["../"]};let oe=(()=>{class o{constructor(t,r,i,g,F,B,S,Ce){this._changeDetectorRef=t,this._formBuilder=r,this._fuseConfirmationService=i,this._locationService=g,this._merchantService=F,this._router=B,this._snackBar=S,this.store=Ce,this.currencies=[],this.cities=[],this.states=[],this.stateSelected="",this._unsubscribeAll=new h.x}ngOnInit(){var t;this._locationService.states$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this.states=r,this._changeDetectorRef.markForCheck()}),this.merchantForm=this._formBuilder.group({id:new n.NI,name:new n.NI("",n.kI.required),abbr:new n.NI,nit:new n.NI,reupp:new n.NI,foundationDate:new n.NI,tax:new n.NI(0,[n.kI.min(0),n.kI.max(100)]),currencyId:new n.NI("",n.kI.required),country:new n.NI({disabled:!0,value:"Cuba"}),state:new n.NI("",n.kI.required),city:new n.NI({disabled:!0,value:""},n.kI.required),zip:new n.NI,address:new n.NI("",n.kI.required),website:new n.NI}),this.store.select(C.Q).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this.merchant=r,null!==r&&this.merchantForm.patchValue(r),null!==r&&this.merchantForm.get("tax").setValue(100*r.tax),this._changeDetectorRef.markForCheck()}),null===(t=this.merchantForm.get("state"))||void 0===t||t.valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this._getCitiesByState(r),this.merchantForm.get("city").enable(),this._changeDetectorRef.markForCheck()}),this.store.select(s.zd).pipe((0,u.R)(this._unsubscribeAll)).subscribe(r=>{this.currencies=r,this._changeDetectorRef.markForCheck()})}clearForm(){this.merchantNgForm.resetForm()}saveMerchant(){let t=this.merchantForm.getRawValue();null===t.id&&(t=(0,l.omit)(t,["id"])),t.tax=t.tax/100,this._fuseConfirmationService.open({title:"Actualizar informaci\xf3n del negocio",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{"confirmed"===i&&(t.id||this._merchantService.createMerchant(t).subscribe(({data:g})=>{this._snackBar.openFromComponent(p.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:g.updateMerchant.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/settings/merchant")}),t.id&&this._merchantService.updateMerchant(t).subscribe(({data:g})=>{this._snackBar.openFromComponent(p.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:g.updateMerchant.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/settings")}))}),this._changeDetectorRef.markForCheck()}trackByFn(t,r){return r.id||t}_getCitiesByState(t){t!==this.stateSelected&&this._locationService.getCitiesByState(t).subscribe(r=>{this.cities=r,this._changeDetectorRef.markForCheck()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(n.qu),e.Y36(_.R),e.Y36(d.a),e.Y36(v.c),e.Y36(m.F0),e.Y36(q.ux),e.Y36(U.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["merchant-form"]],viewQuery:function(t,r){if(1&t&&e.Gf($,5),2&t){let i;e.iGM(i=e.CRH())&&(r.merchantNgForm=i.first)}},decls:85,vars:41,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full","max-w-4xl"],[1,"-ml-4","sm:mt-8"],["mat-button","",3,"routerLink","color"],[3,"svgIcon"],[1,"ml-2"],[1,"mt-2","text-4xl","sm:text-7xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-8","sm:mt-12","p-6","pb-7","sm:p-10","sm:pb-7","shadow","rounded-2xl","bg-card"],[1,"space-y-3",3,"formGroup"],["merchantNgForm","ngForm"],[1,"mb-6"],[1,"text-2xl","font-bold","tracking-tight"],[1,"text-secondary"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"w-full"],["matInput","",1,"mat-fuse-dense",3,"formControlName","required"],[4,"ngIf"],["matInput","",1,"mat-fuse-dense",3,"formControlName"],["required","",1,"mat-fuse-dense",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","min","0","max","100",1,"mat-fuse-dense",3,"type","formControlName"],["value","Cuba"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],[1,"md:col-span-2"],["matInput","","cdkTextareaAutosize","",1,"mat-fuse-dense",3,"formControlName","required","rows"],[1,"flex","items-center","justify-end"],["mat-button","",3,"color","disabled","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","click"],[3,"value"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"mat-icon",5),e.TgZ(6,"span",6),e._uU(7,"Regresar"),e.qZA()()(),e.TgZ(8,"div",7),e._uU(9," Editar Informaci\xf3n del Negocio "),e.qZA(),e.TgZ(10,"div",8)(11,"form",9,10)(13,"div",11)(14,"div",12),e._uU(15,"Mantenga actualizada la informaci\xf3n de su negocio."),e.qZA(),e.TgZ(16,"div",13),e._uU(17," Esta informaci\xf3n se utilizar\xe1 en la generaci\xf3n de documentos comerciales como ofertas, facturas, tickets etc. "),e.qZA()(),e.TgZ(18,"div",14)(19,"mat-form-field",15),e._UZ(20,"input",16),e.TgZ(21,"mat-label"),e._uU(22,"Nombre"),e.qZA(),e.YNc(23,G,2,0,"mat-error",17),e.qZA(),e.TgZ(24,"mat-form-field",15),e._UZ(25,"input",18),e.TgZ(26,"mat-label"),e._uU(27,"N\xfamero de Identificaci\xf3n Tributaria"),e.qZA()(),e.TgZ(28,"mat-form-field",15),e._UZ(29,"input",18),e.TgZ(30,"mat-label"),e._uU(31,"C\xf3digo REUPP"),e.qZA()(),e.TgZ(32,"mat-form-field",15)(33,"mat-label"),e._uU(34,"Moneda por defecto"),e.qZA(),e.TgZ(35,"mat-select",19),e.YNc(36,H,2,2,"mat-option",20),e.qZA(),e._UZ(37,"mat-icon",21),e.YNc(38,W,2,0,"mat-error",17),e.qZA(),e.TgZ(39,"mat-form-field",15),e._UZ(40,"input",22),e.TgZ(41,"mat-label"),e._uU(42,"Impuesto por defecto"),e.qZA(),e._UZ(43,"mat-icon",21),e.qZA(),e.TgZ(44,"mat-form-field",15),e._UZ(45,"input",18),e.TgZ(46,"mat-label"),e._uU(47,"Sitio Web"),e.qZA(),e._UZ(48,"mat-icon",21),e.qZA(),e.TgZ(49,"mat-form-field",15)(50,"mat-label"),e._uU(51,"Pa\xeds"),e.qZA(),e.TgZ(52,"mat-select",19)(53,"mat-option",23),e._uU(54,"Cuba"),e.qZA()(),e._UZ(55,"mat-icon",21),e.YNc(56,K,2,0,"mat-error",17),e.qZA(),e.TgZ(57,"mat-form-field",15)(58,"mat-label"),e._uU(59,"Provincia"),e.qZA(),e.TgZ(60,"mat-select",19),e.YNc(61,X,2,2,"mat-option",24),e.qZA(),e._UZ(62,"mat-icon",21),e.YNc(63,V,2,0,"mat-error",17),e.qZA(),e.TgZ(64,"mat-form-field",15)(65,"mat-label"),e._uU(66,"Municipio"),e.qZA(),e.TgZ(67,"mat-select",19),e.YNc(68,ee,2,2,"mat-option",24),e.qZA(),e._UZ(69,"mat-icon",21),e.YNc(70,te,2,0,"mat-error",17),e.qZA(),e.TgZ(71,"mat-form-field",15),e._UZ(72,"input",18),e.TgZ(73,"mat-label"),e._uU(74,"C\xf3digo Postal"),e.qZA()(),e.TgZ(75,"mat-form-field",25),e._UZ(76,"textarea",26),e.TgZ(77,"mat-label"),e._uU(78,"Direcci\xf3n"),e.qZA(),e.YNc(79,ne,2,0,"mat-error",17),e.qZA()(),e.TgZ(80,"div",27)(81,"button",28),e.NdJ("click",function(){return r.clearForm()}),e._uU(82," Limpiar "),e.qZA(),e.TgZ(83,"button",29),e.NdJ("click",function(){return r.saveMerchant()}),e._uU(84," Guardar "),e.qZA()()()()()()()),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(40,re))("color","primary"),e.xp6(1),e.Q6J("svgIcon","mat_solid:west"),e.xp6(6),e.Q6J("formGroup",r.merchantForm),e.xp6(9),e.Q6J("formControlName","name")("required",!0),e.xp6(3),e.Q6J("ngIf",r.merchantForm.get("name").hasError("required")),e.xp6(2),e.Q6J("formControlName","nit"),e.xp6(4),e.Q6J("formControlName","reupp"),e.xp6(6),e.Q6J("formControlName","currencyId"),e.xp6(1),e.Q6J("ngForOf",r.currencies),e.xp6(1),e.Q6J("svgIcon","mat_solid:attach_money"),e.xp6(1),e.Q6J("ngIf",r.merchantForm.get("currencyId").hasError("required")),e.xp6(2),e.Q6J("type","number")("formControlName","tax"),e.xp6(3),e.Q6J("svgIcon","mat_solid:percent"),e.xp6(2),e.Q6J("formControlName","website"),e.xp6(3),e.Q6J("svgIcon","mat_solid:language"),e.xp6(4),e.Q6J("formControlName","country"),e.xp6(3),e.Q6J("svgIcon","mat_solid:public"),e.xp6(1),e.Q6J("ngIf",r.merchantForm.get("country").hasError("required")),e.xp6(4),e.Q6J("formControlName","state"),e.xp6(1),e.Q6J("ngForOf",r.states)("ngForTrackBy",r.trackByFn),e.xp6(1),e.Q6J("svgIcon","mat_solid:travel_explore"),e.xp6(1),e.Q6J("ngIf",r.merchantForm.get("state").hasError("required")),e.xp6(4),e.Q6J("formControlName","city"),e.xp6(1),e.Q6J("ngForOf",r.cities)("ngForTrackBy",r.trackByFn),e.xp6(1),e.Q6J("svgIcon","mat_solid:place"),e.xp6(1),e.Q6J("ngIf",r.merchantForm.get("city").hasError("required")),e.xp6(2),e.Q6J("formControlName","zip"),e.xp6(4),e.Q6J("formControlName","address")("required",!0)("rows",5),e.xp6(3),e.Q6J("ngIf",r.merchantForm.get("address").hasError("required")),e.xp6(2),e.Q6J("color","accent")("disabled",r.merchantForm.pristine||r.merchantForm.untouched),e.xp6(2),e.Q6J("color","primary")("disabled",r.merchantForm.pristine||r.merchantForm.invalid))},dependencies:[m.yS,b.sg,b.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,D.PQ,w.ey,k.lW,k.zs,N.Hw,j.IC,I.TO,I.KE,I.hX,I.qo,z.Nt,L.gD],encapsulation:2,changeDetection:0}),o})();var ae=a(7238);const ce=["merchantBankAccountsNgForm"];function ie(o,c){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Banco"),e.qZA())}function se(o,c){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Beneficiario"),e.qZA())}function me(o,c){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"N\xfamero de Cuenta"),e.qZA())}function le(o,c){1&o&&(e.TgZ(0,"mat-label"),e._uU(1,"Moneda"),e.qZA())}function ue(o,c){if(1&o&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&o){const t=c.$implicit;e.Q6J("value",t.iso),e.xp6(1),e.hij(" ",t.iso," ")}}const pe=function(o){return{"mt-6":o}};function de(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"button",33),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,g=e.oxw();return e.KtG(g.removeBankAccount(i))}),e._UZ(3,"mat-icon",18),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().first;e.xp6(1),e.Q6J("ngClass",e.VKq(2,pe,t)),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function he(o,c){if(1&o&&(e.ynx(0),e.TgZ(1,"div",23)(2,"mat-form-field",24),e.YNc(3,ie,2,0,"mat-label",25),e._UZ(4,"mat-icon",26)(5,"input",27),e.qZA(),e.TgZ(6,"mat-form-field",24),e.YNc(7,se,2,0,"mat-label",25),e._UZ(8,"mat-icon",26)(9,"input",27),e.qZA(),e.TgZ(10,"mat-form-field",24),e.YNc(11,me,2,0,"mat-label",25),e._UZ(12,"mat-icon",26)(13,"input",28),e.qZA(),e.TgZ(14,"mat-form-field",24),e.YNc(15,le,2,0,"mat-label",25),e._UZ(16,"mat-icon",26),e.TgZ(17,"mat-select",29),e.YNc(18,ue,2,2,"mat-option",30),e.qZA()(),e.YNc(19,de,4,4,"ng-container",25),e.qZA(),e.BQk()),2&o){const t=c.$implicit,r=c.first,i=c.last,g=e.oxw();e.xp6(3),e.Q6J("ngIf",r),e.xp6(1),e.Q6J("svgIcon","mat_solid:account_balance"),e.xp6(1),e.Q6J("type","text")("formControl",t.get("bank"))("placeholder","Ejemplo: Banco Financiero")("spellcheck",!1),e.xp6(2),e.Q6J("ngIf",r),e.xp6(1),e.Q6J("svgIcon","mat_solid:business"),e.xp6(1),e.Q6J("type","text")("formControl",t.get("beneficiary"))("placeholder","Ejemplo: Empresa SRL")("spellcheck",!1),e.xp6(2),e.Q6J("ngIf",r),e.xp6(1),e.Q6J("svgIcon","mat_solid:credit_card"),e.xp6(1),e.Q6J("type","text")("formControl",t.get("no"))("placeholder","Ejemplo: 1234567890123456")("spellcheck",!1),e.xp6(2),e.Q6J("ngIf",r),e.xp6(1),e.Q6J("svgIcon","mat_solid:monetization_on"),e.xp6(1),e.Q6J("formControl",t.get("currency"))("placeholder","Ejemplo: USD"),e.xp6(1),e.Q6J("ngForOf",g.currencies),e.xp6(1),e.Q6J("ngIf",!(r&&i))}}const ge=function(){return["../"]};let fe=(()=>{class o{constructor(t,r,i,g,F,B,S){this._changeDetectorRef=t,this._formBuilder=r,this._fuseConfirmationService=i,this._merchantService=g,this._router=F,this._snackBar=B,this.store=S,this.currencies=[],this._unsubscribeAll=new h.x}ngOnInit(){this.merchantBankAccountsForm=this._formBuilder.group({bankAccounts:new n.Oe([])}),this.store.select(C.Q).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{if(this.merchant=t,t.bankAccounts.length>0){this.merchantBankAccountsForm.get("bankAccounts").clear();const r=[];t.bankAccounts.length>0?t.bankAccounts.forEach(i=>{r.push(this._formBuilder.group({bank:new n.NI(i.bank),beneficiary:new n.NI(i.beneficiary),no:new n.NI(i.no),currency:new n.NI(i.currency)}))}):r.push(this._formBuilder.group({bank:new n.NI(null,[n.kI.required,n.kI.maxLength(255)]),beneficiary:new n.NI(null,[n.kI.required,n.kI.maxLength(255)]),no:new n.NI(null,[n.kI.required,n.kI.maxLength(20)]),currency:new n.NI(null,[n.kI.required,n.kI.maxLength(10)])})),r.forEach(i=>{this.merchantBankAccountsForm.get("bankAccounts").push(i)})}this._changeDetectorRef.markForCheck()}),this.store.select(s.zd).pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.currencies=t,this._changeDetectorRef.markForCheck()})}addBankAccount(){const t=this._formBuilder.group({bank:new n.NI(null,[n.kI.required,n.kI.maxLength(255)]),beneficiary:new n.NI(null,[n.kI.required,n.kI.maxLength(255)]),no:new n.NI(null,[n.kI.required,n.kI.maxLength(20)]),currency:new n.NI(null,[n.kI.required,n.kI.maxLength(10)])});this.merchantBankAccountsForm.get("bankAccounts").push(t),this._changeDetectorRef.markForCheck()}removeBankAccount(t){this.merchantBankAccountsForm.get("bankAccounts").removeAt(t),this._changeDetectorRef.markForCheck()}clearForm(){this.merchantBankAccountsNgForm.resetForm()}saveMerchant(){const t=this.merchantBankAccountsForm.get("bankAccounts").value;let r=Object.assign(Object.assign({},this.merchant),{bankAccounts:t});r=(0,l.omit)(r,["id","userId","slug","bankAccount","createdAt","updatedAt","__v","currency"]),this._fuseConfirmationService.open({title:"Guardar cuentas de banco",message:"\xbfEst\xe1 seguro que todos los datos son correctos?",icon:{show:!0,name:"mat_solid:help",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(g=>{"confirmed"===g&&this._merchantService.updateMerchant(r).subscribe(({data:F})=>{this._snackBar.openFromComponent(p.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:F.updateMerchant.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._router.navigateByUrl("/settings")})}),this._changeDetectorRef.markForCheck()}trackByFn(t,r){return r.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(n.qu),e.Y36(_.R),e.Y36(v.c),e.Y36(m.F0),e.Y36(q.ux),e.Y36(U.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["settings-merchant-bank-accounts"]],viewQuery:function(t,r){if(1&t&&e.Gf(ce,5),2&t){let i;e.iGM(i=e.CRH())&&(r.merchantBankAccountsNgForm=i.first)}},decls:30,vars:12,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-auto","items-center","p-6","sm:p-10"],[1,"flex","flex-col","w-full","max-w-4xl"],[1,"-ml-4","sm:mt-8"],["mat-button","",3,"routerLink","color"],[3,"svgIcon"],[1,"ml-2"],[1,"mt-2","text-4xl","sm:text-7xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-8","sm:mt-12","p-6","pb-7","sm:p-10","sm:pb-7","shadow","rounded-2xl","bg-card"],[1,"space-y-3",3,"formGroup"],["merchantBankAccountsNgForm","ngForm"],[1,"mb-6"],[1,"text-2xl","font-bold","tracking-tight"],[1,"text-secondary"],[1,"mt-8"],[1,"space-y-4"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"group","inline-flex","items-center","mt-2","-ml-4","py-2","px-4","rounded","cursor-pointer",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"flex","items-center","justify-end"],["mat-button","",3,"color","disabled","click"],["mat-flat-button","",1,"ml-2",3,"color","disabled","click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"flex-auto","mat-fuse-dense"],[4,"ngIf"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["maxlength","255","matInput","",3,"type","formControl","placeholder","spellcheck"],["maxlength","20","matInput","",3,"type","formControl","placeholder","spellcheck"],["required","",3,"formControl","placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","items-center","w-10","pl-2",3,"ngClass"],["mat-icon-button","","matTooltip","Eliminar cuenta",1,"w-8","h-8","min-h-8",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"mat-icon",5),e.TgZ(6,"span",6),e._uU(7,"Regresar"),e.qZA()()(),e.TgZ(8,"div",7),e._uU(9," Cuentas Bancarias del Negocio "),e.qZA(),e.TgZ(10,"div",8)(11,"form",9,10)(13,"div",11)(14,"div",12),e._uU(15," Agregue todas las cuentas bancarias que utilizar\xe1 en el negocio. "),e.qZA(),e.TgZ(16,"div",13),e._uU(17," Esta informaci\xf3n se utilizar\xe1 en la generaci\xf3n de documentos comerciales como las facturas y contratos. "),e.qZA()(),e.TgZ(18,"div",14)(19,"div",15),e.YNc(20,he,20,24,"ng-container",16),e.qZA(),e.TgZ(21,"div",17),e.NdJ("click",function(){return r.addBankAccount()}),e._UZ(22,"mat-icon",18),e.TgZ(23,"span",19),e._uU(24," Agregar Cuenta "),e.qZA()()(),e.TgZ(25,"div",20)(26,"button",21),e.NdJ("click",function(){return r.clearForm()}),e._uU(27," Limpiar "),e.qZA(),e.TgZ(28,"button",22),e.NdJ("click",function(){return r.saveMerchant()}),e._uU(29," Guardar "),e.qZA()()()()()()()),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(11,ge))("color","primary"),e.xp6(1),e.Q6J("svgIcon","mat_solid:west"),e.xp6(6),e.Q6J("formGroup",r.merchantBankAccountsForm),e.xp6(9),e.Q6J("ngForOf",r.merchantBankAccountsForm.get("bankAccounts").controls)("ngForTrackBy",r.trackByFn),e.xp6(2),e.Q6J("svgIcon","mat_solid:add_circle"),e.xp6(4),e.Q6J("color","accent")("disabled",r.merchantBankAccountsForm.pristine||r.merchantBankAccountsForm.untouched),e.xp6(2),e.Q6J("color","primary")("disabled",r.merchantBankAccountsForm.pristine||r.merchantBankAccountsForm.invalid))},dependencies:[m.yS,b.mk,b.sg,b.O5,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.nD,n.oH,n.sg,D.PQ,w.ey,k.lW,k.zs,N.Hw,I.KE,I.hX,I.qo,z.Nt,L.gD,ae.gM],encapsulation:2,changeDetection:0}),o})();var _e=a(1227),O=a(810);const ve=[{path:"",component:f,children:[{path:"",pathMatch:"full",redirectTo:"merchant"},{path:"merchant",component:P},{path:"merchant-bank-accounts",component:fe,resolve:{currencies:O.Y}},{path:"merchant-info",component:oe,resolve:{state:_e.G,currencies:O.Y}}]}];let Ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(ve),Z.m]}),o})()}}]);